{"version":3,"sources":["webpack:///./src/app/views/pages/user-management/club_tree/_sub/_DataShow/club_tree_data.html","webpack:///./src/app/views/pages/user-management/club_tree/_sub/_DataShow/club_tree_data.ts","webpack:///./src/app/views/pages/user-management/club_tree/club_tree.component.css","webpack:///./src/app/views/pages/user-management/club_tree/club_tree.component.html","webpack:///./src/app/views/pages/user-management/club_tree/club_tree.component.ts","webpack:///./src/app/views/pages/user-management/invitations/invitations-edit/invitations-edit.dialog.component.html","webpack:///./src/app/views/pages/user-management/invitations/invitations-edit/invitations-edit.dialog.component.ts","webpack:///./src/app/views/pages/user-management/invitations/invitations-edit/invitations.model.ts","webpack:///./src/app/views/pages/user-management/invitations/invitations.component.html","webpack:///./src/app/views/pages/user-management/invitations/invitations.component.ts","webpack:///./src/app/views/pages/user-management/roles/role-edit/role-edit.dialog.component.html","webpack:///./src/app/views/pages/user-management/roles/role-edit/role-edit.dialog.component.ts","webpack:///./src/app/views/pages/user-management/roles/roles-list/roles-list.component.html","webpack:///./src/app/views/pages/user-management/roles/roles-list/roles-list.component.ts","webpack:///./src/app/views/pages/user-management/user-management.component.html","webpack:///./src/app/views/pages/user-management/user-management.component.ts","webpack:///./src/app/views/pages/user-management/user-management.module.ts","webpack:///./src/app/views/pages/user-management/users/_subs/accessRight/accessRight.component.html","webpack:///./src/app/views/pages/user-management/users/_subs/accessRight/accessRight.component.ts","webpack:///./src/app/views/pages/user-management/users/_subs/address/address.component.html","webpack:///./src/app/views/pages/user-management/users/_subs/address/address.component.ts","webpack:///./src/app/views/pages/user-management/users/_subs/change-password/change-password.component.html","webpack:///./src/app/views/pages/user-management/users/_subs/change-password/change-password.component.ts","webpack:///./src/app/views/pages/user-management/users/_subs/shifts/shifts-edit/shifts-edit.dialog.component.html","webpack:///./src/app/views/pages/user-management/users/_subs/shifts/shifts-edit/shifts-edit.dialog.component.ts","webpack:///./src/app/views/pages/user-management/users/_subs/shifts/shifts-edit/shifts.model.ts","webpack:///./src/app/views/pages/user-management/users/_subs/shifts/shifts.component.html","webpack:///./src/app/views/pages/user-management/users/_subs/shifts/shifts.component.ts","webpack:///./src/app/views/pages/user-management/users/_subs/social-networks/social-networks.component.html","webpack:///./src/app/views/pages/user-management/users/_subs/social-networks/social-networks.component.ts","webpack:///./src/app/views/pages/user-management/users/_subs/user-roles/user-roles-list.component.html","webpack:///./src/app/views/pages/user-management/users/_subs/user-roles/user-roles-list.component.ts","webpack:///./src/app/views/pages/user-management/users/update-message/update-message.component.html","webpack:///./src/app/views/pages/user-management/users/update-message/update-message.component.scss","webpack:///./src/app/views/pages/user-management/users/update-message/update-message.component.ts","webpack:///./src/app/views/pages/user-management/users/user-edit/user-edit.component.html","webpack:///./src/app/views/pages/user-management/users/user-edit/user-edit.component.scss","webpack:///./src/app/views/pages/user-management/users/user-edit/user-edit.component.ts","webpack:///./src/app/views/pages/user-management/users/users-list/users-list.component.html","webpack:///./src/app/views/pages/user-management/users/users-list/users-list.component.ts","webpack:///./src/app/views/pages/user-management/usser.management.scss"],"names":[],"mappings":"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","file":"app-views-pages-user-management-user-management-module.js","sourcesContent":["module.exports = \"<div class=\\\"kt-portlet\\\"\\r\\n    [ngClass]=\\\"{ 'kt-portlet--body-progress' : viewLoading, 'kt-portlet--body-progress-overlay' : loadingAfterSubmit }\\\">\\r\\n    <div class=\\\"kt-portlet__head kt-portlet__head__custom\\\">\\r\\n        <div class=\\\"kt-portlet__head-label\\\">\\r\\n            <h3 class=\\\"kt-portlet__head-title\\\">{{ data['header'] }}</h3>\\r\\n        </div>\\r\\n    </div>\\r\\n    <div *ngIf=\\\"data&&data.edit\\\">\\r\\n        <div class=\\\"kt-form\\\">\\r\\n            <div class=\\\"kt-portlet__body\\\">\\r\\n                <div *ngIf=\\\"treeItemForm\\\">\\r\\n                    <form *ngIf=\\\"data\\\" [formGroup]=\\\"treeItemForm\\\" class=\\\"kt-form kt-form--group-seperator-dashed\\\">\\r\\n                        <kt-alert *ngIf=\\\"hasFormErrors\\\" type=\\\"warn\\\" [showCloseButton]=\\\"true\\\" [duration]=\\\"10000\\\"\\r\\n                            (close)=\\\"onAlertClose($event)\\\">\\r\\n                            Oh snap! Change a few things up and try submitting again.\\r\\n                        </kt-alert>\\r\\n                        <div class=\\\"kt-form__section kt-form__section--first\\\">\\r\\n                            <div *ngIf=\\\"treeItemForm.controls&&!resource\\\" class=\\\"form-group kt-form__group row\\\">\\r\\n                                <div class=\\\"col-lg-4 kt-margin-bottom-20-mobile\\\">\\r\\n                                    <mat-form-field class=\\\"mat-form-field-fluid\\\">\\r\\n                                        <input matInput formControlName=\\\"name\\\" placeholder=\\\"name\\\" />\\r\\n                                        <mat-error *ngIf=\\\"treeItemForm.controls['name'].touched&&treeItemForm.controls['name'].errors?.required\\\"> Name is\\r\\n                                            <strong>required</strong>\\r\\n                                        </mat-error>\\r\\n                                        <mat-error *ngIf=\\\"treeItemForm.controls['name'].touched&&treeItemForm.controls['name'].invalid&&treeItemForm.controls['name'].errors?.pattern\\\"> Please enter\\r\\n                                            <strong>valid name</strong>\\r\\n                                        </mat-error>\\r\\n                                        <mat-hint align=\\\"start\\\">\\r\\n                                            <strong>name</strong>\\r\\n                                        </mat-hint>\\r\\n                                    </mat-form-field>\\r\\n                                </div>\\r\\n                                <div class=\\\"col-lg-4 kt-margin-bottom-20-mobile\\\">\\r\\n                                    <mat-form-field class=\\\"mat-form-field-fluid\\\">\\r\\n                                        <input matInput formControlName=\\\"username\\\" placeholder=\\\"username\\\" />\\r\\n                                        <mat-error *ngIf=\\\"treeItemForm.controls['username'].touched&&treeItemForm.controls['username'].errors?.required\\\"> Name is\\r\\n                                            <strong>required</strong>\\r\\n                                        </mat-error>\\r\\n                                        <mat-error *ngIf=\\\"treeItemForm.controls['username'].touched&&treeItemForm.controls['username'].invalid&&treeItemForm.controls['username'].errors?.pattern\\\"> Please enter\\r\\n                                            <strong>valid name</strong>\\r\\n                                        </mat-error>\\r\\n                                        <mat-hint align=\\\"start\\\">\\r\\n                                            <strong>username</strong>\\r\\n                                        </mat-hint>\\r\\n                                    </mat-form-field>\\r\\n                                </div>\\r\\n                                <div class=\\\"col-lg-4 kt-margin-bottom-20-mobile\\\">\\r\\n                                    <mat-form-field class=\\\"mat-form-field-fluid\\\">\\r\\n                                        <input matInput formControlName=\\\"email\\\" placeholder=\\\"email\\\" />\\r\\n                                        <mat-error *ngIf=\\\"treeItemForm.controls['email'].touched&&treeItemForm.controls['email'].errors?.required\\\"> Name is\\r\\n                                            <strong>required</strong>\\r\\n                                        </mat-error>\\r\\n                                        <mat-error *ngIf=\\\"treeItemForm.controls['email'].touched&&treeItemForm.controls['email'].invalid&&treeItemForm.controls['email'].errors?.pattern\\\"> Please enter\\r\\n                                            <strong>valid email</strong>\\r\\n                                        </mat-error>\\r\\n                                        <mat-hint align=\\\"start\\\">\\r\\n                                            <strong>Email</strong>\\r\\n                                        </mat-hint>\\r\\n                                    </mat-form-field>\\r\\n                                </div>\\r\\n                                <div class=\\\"col-lg-4 kt-margin-bottom-20-mobile\\\">\\r\\n                                    <mat-form-field class=\\\"mat-form-field-fluid\\\">\\r\\n                                        <input matInput placeholder=\\\"country\\\" formControlName='Country' />\\r\\n                                        <mat-error *ngIf=\\\"treeItemForm.controls['Country'].touched&&treeItemForm.controls['Country'].errors?.required\\\"> Country is\\r\\n                                            <strong>required</strong>\\r\\n                                        </mat-error>\\r\\n                                        <mat-error *ngIf=\\\"treeItemForm.controls['Country'].touched&&treeItemForm.controls['Country'].invalid&&treeItemForm.controls['Country'].errors?.pattern\\\"> Please enter\\r\\n                                            <strong>valid country</strong>\\r\\n                                        </mat-error>\\r\\n                                        <mat-hint align=\\\"start\\\">\\r\\n                                            <strong>Country</strong>\\r\\n                                        </mat-hint>\\r\\n                                    </mat-form-field>\\r\\n                                </div>\\r\\n                                <div class=\\\"col-lg-4 kt-margin-bottom-20-mobile\\\">\\r\\n                                    <mat-form-field class=\\\"mat-form-field-fluid\\\">\\r\\n                                        <input matInput placeholder=\\\"city\\\" formControlName='City' />\\r\\n                                        <mat-error *ngIf=\\\"treeItemForm.controls['City'].touched&&treeItemForm.controls['City'].errors?.required\\\"> Name is\\r\\n                                            <strong>required</strong>\\r\\n                                        </mat-error>\\r\\n                                        <mat-error *ngIf=\\\"treeItemForm.controls['City'].touched&&treeItemForm.controls['City'].touched&&treeItemForm.controls['City'].invalid&&treeItemForm.controls['City'].errors?.pattern\\\"> Please enter\\r\\n                                            <strong>valid City</strong>\\r\\n                                        </mat-error>\\r\\n                                        <mat-hint align=\\\"start\\\">\\r\\n                                            <strong>City</strong>\\r\\n                                        </mat-hint>\\r\\n                                    </mat-form-field>\\r\\n                                </div>\\r\\n                                <div class=\\\"col-lg-4 kt-margin-bottom-20-mobile\\\">\\r\\n                                    <mat-form-field class=\\\"mat-form-field-fluid\\\">\\r\\n                                        <input matInput formControlName=\\\"brief\\\" placeholder=\\\"brief\\\" />\\r\\n                                        <mat-error>brief is\\r\\n                                            <strong>required</strong>\\r\\n                                        </mat-error>\\r\\n                                        <mat-hint align=\\\"start\\\">\\r\\n                                            <strong>brief</strong>\\r\\n                                        </mat-hint>\\r\\n                                    </mat-form-field>\\r\\n                                </div>\\r\\n                                <div *ngIf=\\\"!data._id&&!data.id\\\" class=\\\"col-lg-4 kt-margin-bottom-20-mobile\\\">\\r\\n                                    <mat-form-field class=\\\"mat-form-field-fluid\\\">\\r\\n                                        <input matInput formControlName=\\\"password\\\" placeholder=\\\"password\\\" />\\r\\n                                        <mat-error *ngIf=\\\"treeItemForm.controls['password'].touched&&treeItemForm.controls['password'].errors?.required\\\"> Name is\\r\\n                                            <strong>required</strong>\\r\\n                                        </mat-error>\\r\\n                                        <mat-error *ngIf=\\\"treeItemForm.controls['password'].touched&&treeItemForm.controls['password'].invalid&&treeItemForm.controls['password'].errors?.min\\\"> Please enter\\r\\n                                            <strong>at least 8 chars</strong>\\r\\n                                        </mat-error>\\r\\n                                        <mat-hint align=\\\"start\\\">\\r\\n                                            <strong>password</strong>\\r\\n                                        </mat-hint>\\r\\n                                    </mat-form-field>\\r\\n                                </div>\\r\\n<div class=\\\"col-lg-4 kt-margin-bottom-20-mobile\\\">\\r\\n                                    <mat-form-field class=\\\"mat-form-field-fluid\\\">\\r\\n                                        <input matInput formControlName=\\\"lat\\\" placeholder=\\\"lat\\\" />\\r\\n                                        <mat-error>lat is\\r\\n                                            <strong>required</strong>\\r\\n                                        </mat-error>\\r\\n                                        <mat-hint align=\\\"start\\\">\\r\\n                                            <strong>lat</strong>\\r\\n                                        </mat-hint>\\r\\n                                    </mat-form-field>\\r\\n                                </div>\\r\\n                                <div class=\\\"col-lg-4 kt-margin-bottom-20-mobile\\\">\\r\\n                                    <mat-form-field class=\\\"mat-form-field-fluid\\\">\\r\\n                                        <input matInput formControlName=\\\"lang\\\" placeholder=\\\"lang\\\" />\\r\\n                                        <mat-error>lang is\\r\\n                                            <strong>required</strong>\\r\\n                                        </mat-error>\\r\\n                                        <mat-hint align=\\\"start\\\">\\r\\n                                            <strong>lang</strong>\\r\\n                                        </mat-hint>\\r\\n                                    </mat-form-field>\\r\\n                                </div>\\r\\n                                <div *ngIf=\\\"resource\\\" class=\\\"form-group kt-form__group row\\\">\\r\\n                                    <div class=\\\"col-lg-4 kt-margin-bottom-20-mobile\\\">\\r\\n                                        <mat-form-field class=\\\"mat-form-field-fluid\\\">\\r\\n                                            <input matInput formControlName=\\\"title\\\" placeholder=\\\"title\\\" />\\r\\n                                            <mat-error>title is\\r\\n                                                <strong>required</strong>\\r\\n                                            </mat-error>\\r\\n                                            <mat-hint align=\\\"start\\\">\\r\\n                                                <strong>title</strong>\\r\\n                                            </mat-hint>\\r\\n                                        </mat-form-field>\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                                <!-- <div  *ngIf=\\\"!data._id&&!data.id\\\" class=\\\"col-lg-4 kt-margin-bottom-20-mobile\\\">\\r\\n                                        <mat-form-field class=\\\"mat-form-field-fluid\\\">\\r\\n                                            <input matInput formControlName=\\\"confirmPassword\\\"  placeholder=\\\"confirm password\\\" />\\r\\n                                            <div *ngIf=\\\"valid.confirmPassword.errors.mustMatch\\\">Passwords must match</div>\\r\\n                                            <mat-hint align=\\\"start\\\">\\r\\n                                                <strong>password</strong>\\r\\n                                            </mat-hint>\\r\\n                                        </mat-form-field>\\r\\n                                    </div> -->\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </form>\\r\\n                </div>\\r\\n                <!--end::Form-->\\r\\n                <div *ngIf=\\\"data.edit\\\" class=\\\"kt-portlet__foot kt-portlet__foot--fit kt-portlet__no-border\\\">\\r\\n                    <div class=\\\"kt-form__actions kt-form__actions--solid\\\">\\r\\n                        <div class=\\\"row text-right\\\">\\r\\n                            <div class=\\\"col-lg-12\\\">\\r\\n                                <button type=\\\"button\\\" mat-raised-button [mat-dialog-close]=\\\"data\\\" cdkFocusInitial\\r\\n                                    matTooltip=\\\"Cancel changes\\\">\\r\\n                                    Cancel\\r\\n                                </button>&nbsp;\\r\\n                                <button type=\\\"button\\\" mat-raised-button color=\\\"primary\\\" (click)=\\\"save()\\\"\\r\\n                                    [disabled]=\\\"viewLoading\\\" matTooltip=\\\"Save changes\\\">\\r\\n                                    Save\\r\\n                                </button>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n    <div *ngIf=\\\"!data.edit&&!resource\\\">\\r\\n        <div class=\\\"kt-portlet__body\\\">\\r\\n            <div class=\\\"kt-form__section kt-form__section--first\\\">\\r\\n                <div class=\\\"form-group kt-form__group row\\\">\\r\\n                    <div class=\\\"col-lg-4 kt-margin-bottom-20-mobile\\\">\\r\\n                        <mat-hint align=\\\"start\\\">\\r\\n                            <strong>name</strong>\\r\\n                        </mat-hint>\\r\\n                        <p>{{data.name}}</p>\\r\\n                    </div>\\r\\n                    <div class=\\\"col-lg-4 kt-margin-bottom-20-mobile\\\">\\r\\n                        <mat-hint align=\\\"start\\\">\\r\\n                            <strong>username</strong>\\r\\n                        </mat-hint>\\r\\n                        <p>{{data.username}}</p>\\r\\n                    </div>\\r\\n                    <div class=\\\"col-lg-4 kt-margin-bottom-20-mobile\\\">\\r\\n                        <mat-hint align=\\\"start\\\">\\r\\n                            <strong>email</strong>\\r\\n                        </mat-hint>\\r\\n                        <p>{{data.email}}</p>\\r\\n                    </div>\\r\\n                    <div class=\\\"col-lg-4 kt-margin-bottom-20-mobile\\\">\\r\\n                        <mat-hint align=\\\"start\\\">\\r\\n                            <strong>Address</strong>\\r\\n                        </mat-hint>\\r\\n                        <p>{{data.Adress}}</p>\\r\\n                    </div>\\r\\n                    <div class=\\\"col-lg-4 kt-margin-bottom-20-mobile\\\">\\r\\n                        <mat-hint align=\\\"start\\\">\\r\\n                            <strong>brief</strong>\\r\\n                        </mat-hint>\\r\\n                        <p>{{data.brief}}</p>\\r\\n                    </div>\\r\\n                    <div class=\\\"col-lg-4 kt-margin-bottom-20-mobile\\\">\\r\\n                        <mat-hint align=\\\"start\\\">\\r\\n                            <strong>lat</strong>\\r\\n                        </mat-hint>\\r\\n                        <p>{{data.lat}}</p>\\r\\n                    </div>\\r\\n                    <div class=\\\"col-lg-4 kt-margin-bottom-20-mobile\\\">\\r\\n                        <mat-hint align=\\\"start\\\">\\r\\n                            <strong>lang</strong>\\r\\n                        </mat-hint>\\r\\n                        <p>{{data.lang}}</p>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n    <div *ngIf=\\\"!data.edit&&resource\\\">\\r\\n        <div class=\\\"kt-portlet__body\\\">\\r\\n            <div class=\\\"kt-form__section kt-form__section--first\\\">\\r\\n                <div class=\\\"form-group kt-form__group row\\\">\\r\\n                    <div class=\\\"col-lg-4 kt-margin-bottom-20-mobile\\\">\\r\\n                        <mat-hint align=\\\"start\\\">\\r\\n                            <strong>title</strong>\\r\\n                        </mat-hint>\\r\\n                        <p>{{data.title}}</p>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\"","import { SelectionModel } from '@angular/cdk/collections';\r\nimport { FlatTreeControl } from '@angular/cdk/tree';\r\nimport { Component, Injectable, Inject,OnInit,ChangeDetectorRef } from '@angular/core';\r\nimport { MatDialog, MAT_DIALOG_DATA, MatDialogRef } from '@angular/material';\r\nimport { MatTreeFlatDataSource, MatTreeFlattener } from '@angular/material/tree';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { ClubTreeService } from '../../../../../../core/auth/_services/club-tree.service'\r\nimport { Router } from '@angular/router'\r\nimport {FormGroup,FormBuilder,Validators} from '@angular/forms'\r\nimport { LayoutUtilsService, MessageType, QueryParamsModel } from '../../../../../../core/_base/crud';\r\nimport { MustMatch } from '../must-match.validator';\r\n@Injectable()\r\n@Component({\r\n  selector: 'club_tree_data',\r\n  templateUrl: 'club_tree_data.html',\r\n  \r\n})\r\nexport class ClubTreeDataComponent {\r\n  treeItemForm: FormGroup;\r\n  treeItem;\r\n\thasFormErrors: boolean = false;\r\n  errormessage: string ;\r\n  viewLoading: boolean = false;\r\n  loadingAfterSubmit: boolean = false;\r\n  resource=false\r\n  constructor(\r\n    public dialogRef: MatDialogRef<ClubTreeDataComponent>,\r\n    private itemFB:FormBuilder,\r\n    private router: Router,\r\n    private ChangeDetectorRef:ChangeDetectorRef,\r\n    private clubTreeService: ClubTreeService,\r\n    @Inject(MAT_DIALOG_DATA) public data: any,\r\n    private layoutUtilsService: LayoutUtilsService) {\r\n\r\n      this.data = data['node']\r\n      //console.log(this.data)\r\n      if(this.data['type']=='resources')\r\n      this.resource=true\r\n      else\r\n      this.resource=false\r\n      //console.log(this.resource)\r\n      if (this.data['_id'])\r\n        this.prepareDataToShow()\r\n      else\r\n         this.createForm()\r\n        \r\n          }\r\n  ngOnInit() {\r\n\r\n    //console.log(this.data)\r\n    if (this.data['_id']||this.data['id'])\r\n      this.prepareDataToShow()\r\n    else\r\n       this.createForm()\r\n\r\n  }\r\n  createForm() {\r\n    \r\n\t\tthis.treeItemForm = this.itemFB.group({\r\n      name:[this.data['name'], [Validators.required, Validators.pattern(/^[a-zA-Z- ]*$/)]],\r\n      City:[this.data['city'], [Validators.required, Validators.pattern(/^[a-zA-Z-]*$/)]],\r\n\t\t\tCountry:[this.data['country'], [Validators.required, Validators.pattern(/^[a-zA-Z-]*$/)]],\r\n\t\t\temail:[this.data['email'], [Validators.pattern(/^[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]$/)]],\r\n      brief:[this.data['brief'],Validators.required],\r\n      title:[this.data['title'],Validators.required],\r\n      lat:[this.data['lat'],Validators.required],\r\n      lang:[this.data['lang'],Validators.required],\r\n      username:[this.data['username'],[Validators.required, Validators.pattern(/^[a-zA-Z- ]*$/)]],\r\n      password:[this.data['password'],[Validators.required,Validators.min(8)]] })\r\n     // confirmPassword: ['', Validators.required})\r\n    // }, {\r\n    //     validator: MustMatch('password', 'confirmPassword')\r\n    // })\r\n    //console.log(this.treeItemForm)\r\n\t}\r\n  //method to access data from server\r\n  prepareDataToShow() {\r\n    this.resource=false\r\n    const edit = this.data['edit']\r\n    const type = this.data['type']\r\n    if (this.data['type'] == 'branch') {\r\n      this.clubTreeService.getBranchData(this.data['pub_key']).subscribe(res => {\r\n        if (res && res['result']) {\r\n\r\n          this.data = res['user']\r\n          this.data['edit'] = edit\r\n          this.data['type'] = type\r\n          this.data['header'] = `${this.data['name']}  informaton`\r\n          this.createForm()\r\n          this.ChangeDetectorRef.detectChanges()\r\n        }\r\n      })\r\n    }\r\n    else if (this.data['type'] == 'units') {\r\n      this.clubTreeService.getUnitData(this.data['pub_key']).subscribe(res => {\r\n        if (res && res['result']) {\r\n\r\n          this.data = res['user']\r\n          this.data['edit'] = edit\r\n          this.data['type'] = type\r\n          this.data['header'] = `${this.data['name']}  informaton`\r\n          //console.log(res['user'])\r\n          this.createForm()\r\n            this.ChangeDetectorRef.detectChanges()\r\n        }\r\n      })\r\n    }\r\n    else if (this.data['type'] == 'resources') {\r\n\r\n      this.clubTreeService.getResourceData(this.data['_id']).subscribe(res => {\r\n        //console.log(res,)\r\n        if (res && res['result']) {\r\n\r\n          this.data = res['data'][0]\r\n          this.data['edit'] = edit\r\n          this.data['type'] = type\r\n          this.data['header'] = `${this.data['title']}  informaton`\r\n          //console.log(this.data)\r\n          this.resource=true\r\n          this.createForm()\r\n          this.ChangeDetectorRef.detectChanges()\r\n        }\r\n      })\r\n    }\r\n  }\r\n  addItem() {\r\n    //console.log()\r\n    this.resource=false\r\n    let user,club_key;\r\n    if(localStorage.getItem('user'))\r\n    {\r\n       user=JSON.parse(localStorage.getItem('user'))['username']\r\n      club_key=JSON.parse(localStorage.getItem('user'))['pub_key']\r\n    }\r\n    this.checkedForm()\r\n    this.resource=false\r\n    const controls=this.treeItemForm.controls;\r\n    if (this.data['type'] == 'units') {\r\n    this.clubTreeService.addUnits({'branch_key':this.data['branch_key'],'units_key':this.data['units_key'],\r\n    'username':controls['username'].value,'name':controls['name'].value,\r\n     'email':controls['email'].value,'city':controls['City'].value,\r\n    'country':controls['Country'].value,'brief':controls['brief'].value,'lat':controls['lat'].value,'lang':controls['lang'].value,'password':controls['password'].value}).subscribe(res=>{\r\n      //console.log(res)\r\n      if (res['result']) {\r\n        this.afterupdate()\r\n      }\r\n      else {\r\n        this.errormessage=res['error']\r\n\r\n      }\r\n    })\r\n\r\n    }\r\n    else if (this.data['type'] == 'resources') {\r\n      this.resource=true\r\n      this.clubTreeService.addResources({'branch_key':this.data['branch_key'],'units_key':this.data['units_key'],'club_key':club_key,\r\n      'title':controls['title'].value,\r\n        }).subscribe(res=>{\r\n          //console.log(res)\r\n        if (res['result']) {\r\n          this.afterupdate()\r\n        }\r\n        else {\r\n         this.errormessage=res['error']\r\n        }\r\n      })\r\n    }\r\n    else if (this.data['type'] == 'branch') {\r\n      this.clubTreeService.addBranch({\r\n    'username':controls['username'].value,'name':controls['name'].value,\r\n     'email':controls['email'].value,'country':controls['Country'].value,\r\n     'city':controls['City'].value,'brief':controls['brief'].value,'lat':controls['lat'].value,'lang':controls['lang'].value,'password':controls['password'].value}).subscribe(res=>{\r\n      if (res['result']) {\r\n        this.afterupdate()\r\n      }\r\n      else {\r\n        this.hasFormErrors=true\r\n        this.errormessage=res['error']\r\n\r\n      }\r\n    })\r\n    }\r\n  }\r\n  onSubmit() {\r\n    this.resource=false\r\n    const controls = this.treeItemForm.controls;\r\n   this.checkedForm()\r\n    if (this.data['type'] == 'branch') {\r\n      this.clubTreeService.updateBranchData({\r\n        'pub_key': this.data['pub_key'],\r\n        'name': controls['name'].value,\r\n        'username': controls['username'].value,\r\n        'country':controls['Country'].value,\r\n        'city':controls['City'].value,\r\n        'email': controls['email'].value,\r\n        'brief':controls['brief'].value,\r\n        'lat':controls['lat'].value,\r\n        'lang':controls['lang'].value,\r\n        'password':controls['password'].value\r\n      }).subscribe(res => {\r\n        //console.log(res, this.data)\r\n        if (res['result']) {\r\n\r\n          this.afterupdate()\r\n        }\r\n        else {\r\n          this.errormessage=res['error']\r\n        }\r\n      })\r\n\r\n    }\r\n    else if (this.data['type'] == 'units') {\r\n      this.clubTreeService.updateUnitData({\r\n        'pub_key': this.data['pub_key'],\r\n        'username': controls['username'].value,\r\n        'name': controls['name'].value,\r\n        'country':controls['Country'].value,\r\n        'city':controls['City'].value,\r\n        'email': controls['email'].value,\r\n        'brief':controls['brief'].value,\r\n        'lat':controls['lat'].value,\r\n        'lang':controls['lang'].value,\r\n        'password':controls['password'].value\r\n\r\n      }).subscribe(res => {\r\n        //console.log(res)\r\n        if (res['result']) {\r\n          this.afterupdate()\r\n        }\r\n        else {\r\n\r\n          this.errormessage = res['error'];\r\n        }\r\n      })\r\n    }\r\n    else if (this.data['type'] == 'resources') {\r\n      this.resource=true\r\n      //console.log(this.data)\r\n    this.clubTreeService.updateResourceData({'title':controls['title'],'_id':this.data['_id']}).subscribe(res => {\r\n      //console.log(res)\r\n      if (res['result']) {\r\n        this.afterupdate()\r\n      }\r\n      else {\r\n\r\n        this.errormessage = res['error'];\r\n      }\r\n    })\r\n    }\r\n\r\n  }\r\n  afterupdate() {\r\n    this.dialogRef.close({});\r\n    //console.log(this.router.url)\r\n    if (this.router.url == '/default/user-management/clubtree')\r\n      this.router.navigate(['/default/user-management/clubtrees'])\r\n    else\r\n      this.router.navigate(['/default/user-management/clubtree'])\r\n   \r\n    setTimeout(() => {\r\n      this.layoutUtilsService.showActionNotification(`successfuly update ${this.data['type']}`, MessageType.Update);\r\n    }, 1000)\r\n  }\r\n\r\n\r\n\r\n\t/**\r\n\t * Close alert\r\n\t *\r\n\t * @param $event: Event\r\n\t */\r\n  onAlertClose($event) {\r\n    this.hasFormErrors = false;\r\n  }\r\n\r\ncheckedForm()\r\n{\r\n  this.hasFormErrors = false;\r\n  const controls = this.treeItemForm.controls;\r\n  //console.log(this.treeItemForm)\r\n  if (this.treeItemForm.invalid) {\r\n    Object.keys(controls).forEach(controlName =>\r\n    {\r\n      controls[controlName].markAsTouched()\r\n    }\r\n    );\r\n    //console.log('invalid')\r\n    this.hasFormErrors = true;\r\n    return;\r\n  }\r\n}\r\nsave()\r\n{\r\n  //console.log(this.data)\r\n  if(this.data['_id']||this.data['id'])\r\n  {\r\n    this.onSubmit()\r\n  }\r\n  else{\r\n    this.addItem()\r\n  }\r\n}\r\n\r\nget valid() { return this.treeItemForm.controls; }\r\n\r\n}\r\n","module.exports = \".drop-above {\\r\\n  border-top: 10px solid #dddddd;\\r\\n  margin-top: -10px;\\r\\n}\\r\\n\\r\\n.drop-below {\\r\\n  border-bottom: 10px solid #dddddd;\\r\\n  margin-bottom: -10px;\\r\\n}\\r\\n\\r\\n.drop-center {\\r\\n  background-color: #dddddd;\\r\\n}\\r\\n\\r\\n.warn-snackbar{\\r\\n  background-color: #ff4081;\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdmlld3MvcGFnZXMvdXNlci1tYW5hZ2VtZW50L2NsdWJfdHJlZS9jbHViX3RyZWUuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLDhCQUE4QjtFQUM5QixpQkFBaUI7QUFDbkI7O0FBRUE7RUFDRSxpQ0FBaUM7RUFDakMsb0JBQW9CO0FBQ3RCOztBQUVBO0VBQ0UseUJBQXlCO0FBQzNCOztBQUNBO0VBQ0UseUJBQXlCO0FBQzNCIiwiZmlsZSI6InNyYy9hcHAvdmlld3MvcGFnZXMvdXNlci1tYW5hZ2VtZW50L2NsdWJfdHJlZS9jbHViX3RyZWUuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5kcm9wLWFib3ZlIHtcclxuICBib3JkZXItdG9wOiAxMHB4IHNvbGlkICNkZGRkZGQ7XHJcbiAgbWFyZ2luLXRvcDogLTEwcHg7XHJcbn1cclxuXHJcbi5kcm9wLWJlbG93IHtcclxuICBib3JkZXItYm90dG9tOiAxMHB4IHNvbGlkICNkZGRkZGQ7XHJcbiAgbWFyZ2luLWJvdHRvbTogLTEwcHg7XHJcbn1cclxuXHJcbi5kcm9wLWNlbnRlciB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI2RkZGRkZDtcclxufVxyXG4ud2Fybi1zbmFja2JhcntcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmY0MDgxO1xyXG59XHJcbiJdfQ== */\"","module.exports = \"<kt-portlet>\\r\\n  <!-- PORTLET LOADING | Binded to TABLE Datasource -->\\r\\n  <!-- See prop => '~/core/_crud/models/data-sources/_base.datasource.ts' (loading$) -->\\r\\n  <kt-portlet-header [title]=\\\"'Club tree'\\\" [class]=\\\"'kt-portlet__head--lg'\\\">\\r\\n    <ng-container ktPortletTools>\\r\\n      <button (click)=\\\" Show_EditData({type:'branch'},true)\\\" mat-raised-button color=\\\"primary\\\"\\r\\n        matTooltip=\\\"add branch\\\">Add Branch\\r\\n      </button>\\r\\n      <!-- Buttons (Material Angular) | See off.documenations 'https://material.angular.io/components/button/overview' -->\\r\\n      <!-- mat-raised-button | Rectangular contained button w/ elevation  -->\\r\\n    </ng-container>\\r\\n  </kt-portlet-header>\\r\\n  <mat-tree *ngIf=\\\"dataSource\\\" [dataSource]=\\\"dataSource\\\" [treeControl]=\\\"treeControl\\\">\\r\\n    <mat-tree-node *matTreeNodeDef=\\\"let node\\\" matTreeNodePadding>\\r\\n      <button mat-icon-button matTreeNodeToggle [attr.aria-label]=\\\"'toggle ' + node.filename\\\">\\r\\n        <mat-icon class=\\\"mat-icon-rtl-mirror\\\">\\r\\n          {{node['child'] ? 'expand_more' : ''}}\\r\\n        </mat-icon>\\r\\n      </button>\\r\\n      <button *ngIf=\\\"!node._id\\\" mat-icon-button color=\\\"accent\\\">\\r\\n        <mat-icon>folder_open</mat-icon>\\r\\n      </button>\\r\\n      <span [ngClass]=\\\"{'drop-above': dragNodeExpandOverArea === 'above' && dragNodeExpandOverNode === node,\\r\\n    'drop-below': dragNodeExpandOverArea === 'below' && dragNodeExpandOverNode === node,\\r\\n    'drop-center': dragNodeExpandOverArea === 'center' && dragNodeExpandOverNode === node}\\\" draggable=\\\"true\\\"\\r\\n        (dragstart)=\\\"handleDragStart($event, node);\\\" (dragover)=\\\"handleDragOver($event, node);\\\"\\r\\n        (drop)=\\\"handleDrop($event, node);\\\" (dragend)=\\\"handleDragEnd($event);\\\">{{node.item}}</span>\\r\\n      <button *ngIf=\\\"node._id\\\" mat-icon-button color=\\\"accent\\\" (click)=\\\" Show_EditData(node,false)\\\">\\r\\n        <mat-icon>visibility</mat-icon>\\r\\n      </button>\\r\\n      <button *ngIf=\\\"node._id\\\" mat-icon-button color=\\\"accent\\\" (click)=\\\" Show_EditData(node,true)\\\">\\r\\n        <mat-icon>edit</mat-icon>\\r\\n      </button>\\r\\n      <button *ngIf=\\\"node._id\\\" mat-icon-button color=\\\"accent\\\" (click)=\\\"deleteItem(node)\\\">\\r\\n        <mat-icon>delete</mat-icon>\\r\\n      </button>\\r\\n    </mat-tree-node>\\r\\n\\r\\n    <!-- <mat-tree-node *matTreeNodeDef=\\\"let node; when: hasNoContent\\\" matTreeNodePadding>\\r\\n     <button mat-icon-button disabled></button>\\r\\n     <mat-form-field>\\r\\n       <input matInput #itemValue placeholder=\\\"New item...\\\">\\r\\n     </mat-form-field>\\r\\n     <button mat-button (click)=\\\"saveNode(node, itemValue.value)\\\">Save</button>\\r\\n  </mat-tree-node> -->\\r\\n\\r\\n    <mat-tree-node *matTreeNodeDef=\\\"let node; when: hasChild\\\" matTreeNodePadding>\\r\\n      <button mat-icon-button matTreeNodeToggle [attr.aria-label]=\\\"'toggle ' + node.filename\\\">\\r\\n        <mat-icon class=\\\"mat-icon-rtl-mirror\\\">\\r\\n          {{node['child'] ? 'expand_more' : 'empty'}}\\r\\n        </mat-icon>\\r\\n      </button>\\r\\n      <button *ngIf=\\\"!node._id&&node.type=='resources'\\\" mat-icon-button color=\\\"accent\\\">\\r\\n        <mat-icon>spa</mat-icon>\\r\\n      </button>\\r\\n      <button *ngIf=\\\"!node._id&&node.type=='units'\\\" mat-icon-button color=\\\"accent\\\">\\r\\n      <img  _ngcontent-c24=\\\"\\\" alt=\\\"\\\" src=\\\"./assets/media/icons/Fitness Building.png\\\">\\r\\n      </button>\\r\\n      <!-- <span _ngcontent-c24=\\\"\\\" class=\\\"kt-widget4__icon ng-star-inserted\\\"><i _ngcontent-c24=\\\"\\\" class=\\\"flaticon2-line-chart kt-font-danger\\\" ng-reflect-ng-class=\\\"flaticon2-line-chart kt-font-d\\\"></i></span> -->\\r\\n      <span [ngClass]=\\\"{'drop-above': dragNodeExpandOverArea === 'above' && dragNodeExpandOverNode === node,\\r\\n    'drop-below': dragNodeExpandOverArea === 'below' && dragNodeExpandOverNode === node,\\r\\n    'drop-center': dragNodeExpandOverArea === 'center' && dragNodeExpandOverNode === node}\\\" draggable=\\\"true\\\"\\r\\n        (dragstart)=\\\"handleDragStart($event, node);\\\" (dragover)=\\\"handleDragOver($event, node);\\\"\\r\\n        (drop)=\\\"handleDrop($event, node);\\\" (dragend)=\\\"handleDragEnd($event);\\\">{{node.item}}</span>\\r\\n      <button *ngIf=\\\"node._id\\\" mat-icon-button color=\\\"accent\\\" (click)=\\\" Show_EditData(node,false)\\\">\\r\\n        <mat-icon>visibility</mat-icon>\\r\\n      </button>\\r\\n      <button *ngIf=\\\"node._id\\\" mat-icon-button color=\\\"accent\\\" (click)=\\\" Show_EditData(node,true)\\\">\\r\\n        <mat-icon>edit</mat-icon>\\r\\n      </button>\\r\\n      <button *ngIf=\\\"node._id\\\" mat-icon-button color=\\\"accent\\\" (click)=\\\"deleteItem(node)\\\">\\r\\n        <mat-icon>delete</mat-icon>\\r\\n      </button>\\r\\n      <button *ngIf=\\\"!node._id\\\" mat-icon-button color=\\\"accent\\\" (click)='Show_EditData(node,true)'>\\r\\n        <mat-icon>add</mat-icon>\\r\\n      </button>\\r\\n    </mat-tree-node>\\r\\n  </mat-tree>\\r\\n  <span #emptyItem></span>\\r\\n\\r\\n\\r\\n</kt-portlet>\"","import { SelectionModel } from '@angular/cdk/collections';\r\nimport { FlatTreeControl } from '@angular/cdk/tree';\r\nimport { ViewEncapsulation,Component, Injectable, Inject, ChangeDetectorRef, OnInit, ElementRef, ViewChild } from '@angular/core';\r\nimport { MatDialog, MAT_DIALOG_DATA, MatDialogConfig } from '@angular/material';\r\nimport { MatTreeFlatDataSource, MatTreeFlattener } from '@angular/material/tree';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { ClubTreeService } from '../../../../core/auth/_services/club-tree.service'\r\nimport { LayoutUtilsService, MessageType } from '../../../../core/_base/crud';\r\n//Dialog \r\n\r\nimport { ClubTreeDataComponent } from './_sub/_DataShow/club_tree_data'\r\nimport { LayoutConfigService, SplashScreenService } from '../../../../core/_base/layout';\r\nimport {\r\n  MatSnackBar,\r\n  MatSnackBarConfig,\r\n  MatSnackBarHorizontalPosition,\r\n  MatSnackBarVerticalPosition,\r\n} from '@angular/material';\r\n\r\n/**\r\n* Node for to-do item\r\n*/\r\nimport { browserRefresh } from '../../../../app.component';\r\nexport class TodoItemNode {\r\n  children: TodoItemNode[];\r\n  item: string;\r\n}\r\n\r\n/** Flat to-do item node with expandable and level information */\r\nexport class TodoItemFlatNode {\r\n  item: string;\r\n  level: number;\r\n  expandable: boolean;\r\n}\r\n\r\n/**\r\n* The Json object for to-do list data.\r\n*/\r\n\r\n\r\n/**\r\n* Checklist database, it can build a tree structured Json object.\r\n* Each node in Json object represents a to-do item or a category.\r\n* If a node is a category, it has children items and new items can be added under the category.\r\n*/\r\n@Injectable()\r\nexport class ChecklistDatabase {\r\n\r\n  dataChange = new BehaviorSubject<TodoItemNode[]>([]);\r\n    \r\n  get data(): TodoItemNode[] { \r\n    if(this.dataChange)\r\n     return this.dataChange.value; }\r\n\r\n  constructor(private clubTreeSevice: ClubTreeService,\r\n    private changeDetectorRefs: ChangeDetectorRef,\r\n    private layoutConfigService: LayoutConfigService\r\n  ) {\r\n    this.initialize();\r\n  }\r\n\r\n  initialize() {\r\n  \r\n    // Build the tree nodes from Json object. The result is a list of `TodoItemNode` with nested\r\n    //     file node as children.\r\n    this.clubTreeSevice.getUnitsData().subscribe(res => {\r\n      if (res && res['result']) {\r\n        res['data'].forEach(elem => {\r\n          elem['type'] = 'branch'\r\n          elem['branch_key']=elem['pub_key']\r\n        })\r\n        const data = this.buildFileTree(res['data'], 0);\r\n        console.log(data)\r\n        this.dataChange.next(data);\r\n        this.changeDetectorRefs.detectChanges();\r\n      }\r\n    },\r\n    error=>{console.log(error)})\r\n\r\n  }\r\n\r\n  /**\r\n  * Build the file structure tree. The `value` is the Json object, or a sub-tree of a Json object.\r\n  * The return value is the list of `TodoItemNode`.\r\n  */\r\n  // buildFileTree(obj: object, level: number): TodoItemNode[] {\r\n  //   console.log(obj)\r\n  //   return Object.keys(obj).reduce<TodoItemNode[]>((accumulator, key) => {\r\n  //     const value = obj[key];\r\n  //     const node = new TodoItemNode();\r\n  //     console.log(value)\r\n  //     node.item=value['name']\r\n  //     Object.values(value).forEach(value=>{\r\n  //      if(typeof value =='object')\r\n  //      {\r\n  //        console.log(typeof value)\r\n  //        node.children= this.buildFileTree(value,level+1)\r\n  //      }\r\n  //     })\r\n\r\n\r\n  //     return accumulator.concat(node);\r\n  //   }, []);\r\n  //   }\r\n\r\n  buildFileTree(obj, level: number): TodoItemNode[] {\r\n\r\n    return Object.keys(obj).reduce<TodoItemNode[]>((accumulator, key, currentindex) => {\r\n      const node = new TodoItemNode();\r\n      \r\n      node['pub_key'] = obj[key]['pub_key']\r\n      node['parent'] = obj[key]['parent']\r\n      node['_id'] = obj[key]['_id']\r\n      node['type'] = obj[key]['type']\r\n      \r\n      if(obj[key]['type']=='branch')\r\n      {\r\n        node['branch_key']=obj[key]['pub_key']\r\n      }\r\n      if(obj['type']=='units')\r\n      {\r\n        node['units_key']=obj['pub_key']\r\n      }\r\n      if(obj['branch_key'])\r\n      {\r\n        node['branch_key']=obj['branch_key']\r\n      }\r\n      if(obj['units_key'])\r\n      {\r\n        node['units_key']=obj[key]['units_key']\r\n      }\r\n     \r\n      if (key == 'units') {\r\n       \r\n        if(obj['branch_key'])\r\n        {\r\n          node['branch_key']=obj['branch_key']\r\n        }\r\n        if(obj['units_key'])\r\n        {\r\n          node['units_key']=obj['units_key']\r\n        }\r\n        node['pub_key'] = obj['pub_key']\r\n        node['type'] = 'units'\r\n      }\r\n      if (key == 'resources') {\r\n        node['pub_key'] = obj['pub_key']\r\n        node['type'] = 'resources'\r\n      }\r\n      if (key == '0' || parseInt(key)) {\r\n        node.item = obj[key]['name']\r\n      }\r\n      else {\r\n        node.item = key;\r\n      }\r\n\r\n      const notImportantitem = ['_id', 'pub_key', 'parent', 'name', 'type','branch_key']\r\n      const value = obj[key];\r\n\r\n      if (value != null) {\r\n        if (typeof value === 'object') {\r\n          if (!(key == '0' || parseInt(key))) {\r\n            if (value && value.length > 0) {\r\n              value['pub_key'] = obj['pub_key']\r\n              \r\n              value.forEach(elem => {\r\n                elem['type'] = key\r\n                elem['branch_key']=obj['branch_key']\r\n\r\n              })\r\n            }\r\n          }\r\n\r\n\r\n          node.children = this.buildFileTree(value, level + 1);\r\n        } else {\r\n          node.item = value;\r\n        }\r\n\r\n\r\n        if (!notImportantitem.includes(key)) {\r\n          return accumulator.concat(node);\r\n        }\r\n        else\r\n          return accumulator.concat();\r\n      }\r\n\r\n    }\r\n      , []);\r\n  }\r\n\r\n  /** Add an item to to-do list */\r\n  insertItem(parent: TodoItemNode, node): TodoItemNode {\r\n    //  console.log(parent)\r\n    if (!parent.children) {\r\n      parent.children = [];\r\n    }\r\n    let newItem = node as TodoItemNode;\r\n    console.log(newItem)\r\n    parent.children.push(newItem);\r\n    this.dataChange.next(this.data);\r\n    return newItem;\r\n  }\r\n\r\n  getParentFromNodes(node: TodoItemNode): TodoItemNode {\r\n    for (let i = 0; i < this.data.length; ++i) {\r\n      const currentRoot = this.data[i];\r\n      const parent = this.getParent(currentRoot, node);\r\n      if (parent != null) {\r\n        return parent;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  getParent(currentRoot: TodoItemNode, node: TodoItemNode): TodoItemNode {\r\n    if (currentRoot.children && currentRoot.children.length > 0) {\r\n      for (let i = 0; i < currentRoot.children.length; ++i) {\r\n        const child = currentRoot.children[i];\r\n        if (child === node) {\r\n          return currentRoot;\r\n        } else if (child.children && child.children.length > 0) {\r\n          const parent = this.getParent(child, node);\r\n          if (parent != null) {\r\n            return parent;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n\r\n  insertItemAbove(node: TodoItemNode, nodechild): TodoItemNode {\r\n    const parentNode = this.getParentFromNodes(node);\r\n    //  console.log(parentNode)\r\n\r\n    const newItem = nodechild as TodoItemNode;\r\n    if (parentNode != null) {\r\n      parentNode.children.splice(parentNode.children.indexOf(node), 0, newItem);\r\n    } else {\r\n      this.data.splice(this.data.indexOf(node), 0, newItem);\r\n    }\r\n    this.dataChange.next(this.data);\r\n    console.log(this.data)\r\n    return newItem;\r\n  }\r\n\r\n  insertItemBelow(node: TodoItemNode, nodechild): TodoItemNode {\r\n    const parentNode = this.getParentFromNodes(node);\r\n    const newItem = nodechild as TodoItemNode;\r\n    if (parentNode != null) {\r\n      parentNode.children.splice(parentNode.children.indexOf(node) + 1, 0, newItem);\r\n    } else {\r\n      this.data.splice(this.data.indexOf(node) + 1, 0, newItem);\r\n    }\r\n    this.dataChange.next(this.data);\r\n    return newItem;\r\n  }\r\n  updateItem(node: TodoItemNode, nodechild) {\r\n    node = nodechild\r\n    this.dataChange.next(this.data);\r\n  }\r\n\r\n\r\n  deleteItem(node: TodoItemNode) {\r\n    this.deleteNode(this.data, node);\r\n    this.dataChange.next(this.data);\r\n  }\r\n\r\n  copyPasteItem(from: TodoItemNode, to: TodoItemNode): TodoItemNode {\r\n      console.log(from,to)\r\n    const newItem = this.insertItem(to, { 'item': from['item'], 'pub_key': from['pub_key'], 'type': from['type'], '_id': from['_id'], 'parent': from['parent'] });\r\n    if (from.children) {\r\n      from.children.forEach(child => {\r\n        this.copyPasteItem(child, newItem);\r\n      });\r\n    }\r\n    return newItem;\r\n  }\r\n\r\n  copyPasteItemAbove(from: TodoItemNode, to: TodoItemNode): TodoItemNode {\r\n    const newItem = this.insertItemAbove(to, { 'item': from['item'], 'pub_key': from['pub_key'], 'type': from['type'], '_id': from['_id'], 'parent': from['parent'] });\r\n    if (from.children) {\r\n      from.children.forEach(child => {\r\n        this.copyPasteItem(child, newItem);\r\n      });\r\n    }\r\n    return newItem;\r\n  }\r\n\r\n  copyPasteItemBelow(from: TodoItemNode, to: TodoItemNode): TodoItemNode {\r\n    const newItem = this.insertItemBelow(to, { 'item': from['item'], 'pub_key': from['pub_key'], 'type': from['type'], '_id': from['_id'], 'parent': from['parent'] });\r\n    if (from.children) {\r\n      from.children.forEach(child => {\r\n        this.copyPasteItem(child, newItem);\r\n      });\r\n    }\r\n    return newItem;\r\n  }\r\n  deleteNode(nodes: TodoItemNode[], nodeToDelete: TodoItemNode) {\r\n    const index = nodes.indexOf(nodeToDelete, 0);\r\n    if (index > -1) {\r\n      nodes.splice(index, 1);\r\n    } else {\r\n      nodes.forEach(node => {\r\n        if (node.children && node.children.length > 0) {\r\n          this.deleteNode(node.children, nodeToDelete);\r\n        }\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n* @title Tree with checkboxes\r\n*/\r\n@Component({\r\n  selector: 'club_tree.component',\r\n  styleUrls: ['./club_tree.component.css'],\r\n  templateUrl: 'club_tree.component.html',\r\n  providers: [ChecklistDatabase],\r\n  entryComponents:[],\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\n\r\n\r\nexport class ClubTreeComponent {\r\n  /** Map from flat node to nested node. This helps us finding the nested node to be modified */\r\n  flatNodeMap = new Map<TodoItemFlatNode, TodoItemNode>();\r\n\r\n  /** Map from nested node to flattened node. This helps us to keep the same object for selection */\r\n  nestedNodeMap = new Map<TodoItemNode, TodoItemFlatNode>();\r\n\r\n  /** A selected parent node to be inserted */\r\n  selectedParent: TodoItemFlatNode | null = null;\r\n\r\n  /** The new item's name */\r\n  newItemName = '';\r\n\r\n  treeControl: FlatTreeControl<TodoItemFlatNode>;\r\n\r\n  treeFlattener: MatTreeFlattener<TodoItemNode, TodoItemFlatNode>;\r\n\r\n  dataSource: MatTreeFlatDataSource<TodoItemNode, TodoItemFlatNode>;\r\n\r\n  /**Drag and drop */\r\n  dragNode: any;\r\n  dragNodeExpandOverWaitTimeMs = 300;\r\n  dragNodeExpandOverNode: any;\r\n  dragNodeExpandOverTime: number;\r\n  dragNodeExpandOverArea: string;\r\n  @ViewChild('emptyItem') emptyItem: ElementRef;\r\n\r\n  /** The selection for checklist */\r\n  checklistSelection = new SelectionModel<TodoItemFlatNode>(true /* multiple */);\r\n\r\n  constructor(private database: ChecklistDatabase, private treeClubService: ClubTreeService, public dialog: MatDialog,\r\n    private layoutUtilsService: LayoutUtilsService,\r\n    private treeclubservice: ClubTreeService,\r\n    public snackBar: MatSnackBar,\r\n    private changeDetectorRefs: ChangeDetectorRef) {\r\n    this.treeFlattener = new MatTreeFlattener(this.transformer, this.getLevel,\r\n      this.isExpandable, this.getChildren);\r\n    this.treeControl = new FlatTreeControl<TodoItemFlatNode>(this.getLevel, this.isExpandable);\r\n    this.dataSource = new MatTreeFlatDataSource(this.treeControl, this.treeFlattener);\r\n    // this.changeDetectorRefs.detectChanges()\r\n  \r\n    database.dataChange.subscribe(data => {\r\n      this.dataSource.data = data;\r\n    });\r\n  }\r\n\r\n  //config data of dialog of show data and edit\r\n\r\n\r\n  getLevel = (node: TodoItemFlatNode) => node.level;\r\n\r\n  isExpandable = (node: TodoItemFlatNode) => node.expandable;\r\n\r\n  getChildren = (node: TodoItemNode): TodoItemNode[] => node.children;\r\n\r\n  hasChild = (_: number, _nodeData: TodoItemFlatNode) => _nodeData.expandable;\r\n\r\n  hasNoContent = (_: number, _nodeData: TodoItemFlatNode) => _nodeData.item === '';\r\n\r\n  /**\r\n  * Transformer to convert nested node to flat node. Record the nodes in maps for later use.\r\n  */\r\n  transformer = (node: TodoItemNode, level: number) => {\r\n\r\n    const existingNode = this.nestedNodeMap.get(node);\r\n    const flatNode = existingNode && existingNode.item === node.item\r\n      ? existingNode\r\n      : new TodoItemFlatNode();\r\n    flatNode.item = node.item;\r\n    flatNode.level = level;\r\n    flatNode['pub_key'] = node['pub_key']\r\n    if(node['branch_key'])\r\n    flatNode['branch_key']=node['branch_key']\r\n    if(node['units_key'])\r\n    flatNode['units_key']=node['units_key']\r\n    flatNode['_id'] = node['_id']\r\n    if (node['_id'] == undefined && node['pub_key'] == undefined && node['parent'] == undefined) {\r\n      //console.log( this.database.getParentFromNodes(node)['pub_key'])\r\n      console.log(node)\r\n      flatNode['pub_key'] = this.database.getParentFromNodes(node)['pub_key']\r\n      //this.database.updateItem(node,flatNode)\r\n      //console.log(flatNode)\r\n    }\r\n    if (node.children)\r\n      flatNode['child'] = node['children'].length\r\n    flatNode['type'] = node['type']\r\n    flatNode.expandable = !!node.children;\r\n    this.flatNodeMap.set(flatNode, node);\r\n    this.nestedNodeMap.set(node, flatNode);\r\n    return flatNode;\r\n  }\r\n\r\n  /** Whether all the descendants of the node are selected */\r\n  descendantsAllSelected(node: TodoItemFlatNode): boolean {\r\n    const descendants = this.treeControl.getDescendants(node);\r\n    return descendants.every(child => this.checklistSelection.isSelected(child));\r\n  }\r\n\r\n  /** Whether part of the descendants are selected */\r\n  descendantsPartiallySelected(node: TodoItemFlatNode): boolean {\r\n    const descendants = this.treeControl.getDescendants(node);\r\n    const result = descendants.some(child => this.checklistSelection.isSelected(child));\r\n    return result && !this.descendantsAllSelected(node);\r\n  }\r\n\r\n  /** Toggle the to-do item selection. Select/deselect all the descendants node */\r\n  todoItemSelectionToggle(node: TodoItemFlatNode): void {\r\n    this.checklistSelection.toggle(node);\r\n    const descendants = this.treeControl.getDescendants(node);\r\n    this.checklistSelection.isSelected(node) ? this.checklistSelection.select(...descendants)\r\n      : this.checklistSelection.deselect(...descendants);\r\n  }\r\n\r\n  /** Select the category so we can insert the new item. */\r\n  addNewItem(node: TodoItemFlatNode) {\r\n    const parentNode = this.flatNodeMap.get(node);\r\n    this.database.insertItem(parentNode!, {});\r\n    this.treeControl.expand(node);\r\n  }\r\n\r\n  /** Save the node to database */\r\n  saveNode(node: TodoItemFlatNode, itemValue: string) {\r\n    const nestedNode = this.flatNodeMap.get(node);\r\n    this.database.updateItem(nestedNode!, itemValue);\r\n  }\r\n  Show_EditData(node, editable) {\r\n    if(!editable)\r\n    {\r\n    if(this.checkedpermission('getallusers'))\r\n    {\r\n      node['edit'] = editable\r\n      const data = { node }\r\n      this.dialog.open(ClubTreeDataComponent, { data });\r\n    }\r\n    else{\r\n      this.open()\r\n      //alert('You dont have permission to get this data')\r\n    }\r\n    }\r\n    else if(editable){\r\n      if(node._id)\r\n      {\r\n       \r\n        if(this.checkedpermission('updateuserdata'))\r\n        {\r\n          node['edit'] = editable\r\n          const data = { node }\r\n          this.dialog.open(ClubTreeDataComponent, { data });\r\n        }\r\n        else{\r\n          this.open()\r\n         // alert('You dont have permission to get this data')\r\n        }\r\n      }\r\n      else if(!node._id)\r\n      {\r\n        if(this.checkedpermission('createuser'))\r\n        {\r\n          node['edit'] = editable\r\n          const data = { node }\r\n          this.dialog.open(ClubTreeDataComponent, { data });\r\n        }\r\n        else{\r\n          this.open()\r\n      //    alert('You dont have permission to get this data')\r\n        }\r\n      }\r\n    }\r\n\r\n\r\n  }\r\n  open() {\r\n   let message = 'Oh Snap ! You dont have permission to get this data';\r\n    let actionButtonLabel = '';\r\n   let action = true;\r\n   let setAutoHide= true;\r\n   let autoHide = 4000;\r\n   let horizontalPosition: MatSnackBarHorizontalPosition = 'center';\r\n   let verticalPosition: MatSnackBarVerticalPosition = 'top';\r\n    \r\n   let addExtraClass = false;\r\n    let config = new MatSnackBarConfig();\r\n    config.verticalPosition = verticalPosition;\r\n    config.horizontalPosition = horizontalPosition;\r\n    config.duration = setAutoHide ? autoHide : 0;\r\n  //  config['extraClasses'] = addExtraClass ? ['warn-snackbar'] : undefined;\r\n    config.panelClass=['warn-snackbar'];\r\n    this.snackBar.open(message, action ? actionButtonLabel : undefined, config);\r\n  }\r\n  //checked the permission of user to do any action \r\n  checkedpermission(key: String) {\r\n\t\tlet checked = false\r\n\t\tif (localStorage.getItem('user')) {\r\n\r\n\t\t\tif (JSON.parse(localStorage.getItem('user'))) {\r\n\t\t\t\tlet user = JSON.parse(localStorage.getItem('user'))\r\n\r\n\t\t\t\tif (user['allPrivilidge']) {\r\n\t\t\t\t\tconst privilidge = user['allPrivilidge']\r\n\r\n\t\t\t\t\tObject.keys(privilidge).forEach(role => {\r\n\t\t\t\t\t\tObject.keys(privilidge[role]).forEach(pri => {\r\n\r\n\t\t\t\t\t\t\tlet per = (privilidge[role][pri].toString()).trim()\r\n\t\t\t\t\t\t\tif (key.trim() == per) {\r\n\t\t\t\t\t\t\t\tchecked = true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn checked\r\n\t}\r\n  deleteItem(node) {\r\n\r\n    if(this.checkedpermission('deleteuserdata')){\r\n    const _title: string = node['type'];\r\n    const _description: string = `Are you sure to permanently delete this ${node['type']}?`;\r\n    const _waitDesciption: string = `${node['type']} is deleting...`;\r\n    const _deleteMessage = `${node['type']} has been deleted`;\r\n    if (node['type'] == 'branch') {\r\n\r\n      const dialogRef = this.layoutUtilsService.deleteElement(_title, _description, _waitDesciption);\r\n      dialogRef.afterClosed().subscribe(res => {\r\n        if (!res) {\r\n          return;\r\n\r\n        }\r\n        this.treeClubService.DeleteBranch(node['pub_key']).subscribe(res => {\r\n          console.log(res)\r\n          if (res['result']) {\r\n            this.database.deleteItem(this.flatNodeMap.get(node))\r\n            this.layoutUtilsService.showActionNotification(_deleteMessage, MessageType.Delete);\r\n          }\r\n        });\r\n      })\r\n\r\n    }\r\n    if (node['type'] == 'units') {\r\n\r\n      const dialogRef = this.layoutUtilsService.deleteElement(_title, _description, _waitDesciption);\r\n      dialogRef.afterClosed().subscribe(res => {\r\n        if (!res) {\r\n          return;\r\n\r\n        }\r\n        this.treeClubService.DeleteUnit(node['pub_key']).subscribe(res => {\r\n          if (res['result']) {\r\n            this.database.deleteItem(this.flatNodeMap.get(node))\r\n            this.layoutUtilsService.showActionNotification(_deleteMessage, MessageType.Delete);\r\n\r\n            console.log(res)\r\n          }\r\n        });\r\n      })\r\n\r\n    }\r\n    if (node['type'] == 'resources') {\r\n\r\n      const dialogRef = this.layoutUtilsService.deleteElement(_title, _description, _waitDesciption);\r\n      dialogRef.afterClosed().subscribe(res => {\r\n        if (!res) {\r\n          return;\r\n        }\r\n        this.treeClubService.DeleteResource(node['_id']).subscribe(res => {\r\n          if (res['result']) {\r\n            this.database.deleteItem(this.flatNodeMap.get(node))\r\n            this.layoutUtilsService.showActionNotification(_deleteMessage, MessageType.Delete);\r\n          }\r\n\r\n        })\r\n      });\r\n    }\r\n}\r\nelse {\r\n  this.open()\r\n  //alert('You dont have permission to delete ')\r\n}\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n  handleDragStart(event, node) {\r\n    \r\n    // Required by Firefox (https://stackoverflow.com/questions/19055264/why-doesnt-html5-drag-and-drop-work-in-firefox)\r\n    event.dataTransfer.setData('foo', 'bar');\r\n    event.dataTransfer.setDragImage(this.emptyItem.nativeElement, 0, 0);\r\n    this.dragNode = node;\r\n    console.log('dragNode',this.dragNode)\r\n    this.treeControl.collapse(node);\r\n  }\r\n\r\n  handleDragOver(event, node) {\r\n    event.preventDefault();\r\n   \r\n\r\n    // Handle node expand\r\n    if (node === this.dragNodeExpandOverNode) {\r\n      if (this.dragNode !== node && !this.treeControl.isExpanded(node)) {\r\n        if ((new Date().getTime() - this.dragNodeExpandOverTime) > this.dragNodeExpandOverWaitTimeMs) {\r\n          this.treeControl.expand(node);\r\n        }\r\n      }\r\n    } else {\r\n      this.dragNodeExpandOverNode = node;\r\n      this.dragNodeExpandOverTime = new Date().getTime();\r\n    }\r\n\r\n    // Handle drag area\r\n    const percentageX = event.offsetX / event.target.clientWidth;\r\n    const percentageY = event.offsetY / event.target.clientHeight;\r\n    if (percentageY < 0.25) {\r\n      this.dragNodeExpandOverArea = 'above';\r\n    } else if (percentageY > 0.75) {\r\n      this.dragNodeExpandOverArea = 'below';\r\n    } else {\r\n      this.dragNodeExpandOverArea = 'center';\r\n    }\r\n  }\r\n\r\n  handleDrop(event, node) {\r\n    event.preventDefault();\r\n    let DragNode = this.flatNodeMap.get(this.dragNode);\r\n    let DropArea = this.flatNodeMap.get(node);\r\n    const _title: string = node['type'];\r\n    const _description: string = `Are you sure to permanently drag ${DragNode['type']} to ${DropArea['type']}?`;\r\n    const _waitDesciption: string = `${DragNode['type']} is draging...`;\r\n    const _unadraggableMessage = `may be there is problem to drag this element ,try again and choose correctly area to drop `;\r\n    \r\n    console.log(this.dragNode)\r\n    console.log(this.dragNode, node, this.flatNodeMap.get(this.dragNode), this.flatNodeMap.get(node))\r\n  \r\n    if (node !== this.dragNode && this.dragNode['type'] != 'branch'&&this.dragNode['type']==node['type']) {\r\n      const dialogRef = this.layoutUtilsService.dragElement(_title, _description, _waitDesciption);\r\n      dialogRef.afterClosed().subscribe(res => {\r\n        console.log(res)\r\n        if (!res) {\r\n          \r\n          return;}\r\n      console.log(this.dragNode)\r\n      if (!DragNode['_id'] ) {\r\n        if (DragNode.children && DragNode.children.length > 0) {\r\n          DragNode.children.forEach(dragElem => {\r\n            this.handelDragElem(this.flatNodeMap.get(node),dragElem)\r\n            dragElem['parent'] = DropArea['pub_key']\r\n            if (DragNode.item == 'resources') {\r\n              this.updateResource(dragElem['parent'], dragElem['_id'], node['type'])\r\n            }\r\n            if (DragNode.item == 'units') {\r\n              console.log('units')\r\n              this.updateUnit(dragElem['pub_key'], DropArea['pub_key'], node['type'])\r\n            }\r\n          })\r\n          this.database.deleteItem(this.flatNodeMap.get(this.dragNode));\r\n        }\r\n      }\r\n      else if (node['_id'] ) {\r\n       \r\n      if(DropArea['children'])\r\n      {\r\n        DropArea['children'].forEach(elem=>{\r\n      \r\n          console.log('type of drop area',elem['type'],'drag area',DragNode['type'])\r\n          if(elem['type']==DragNode['type'])\r\n          {\r\n            console.log(elem)\r\n            this.handelDragElem(elem,DragNode)\r\n          }\r\n        })\r\n      }\r\n      }\r\n      else {\r\n        console.log(node,DragNode)\r\n          this.handelDragElem(DropArea,DragNode)\r\n          DragNode['parent'] == DropArea['pub_key']\r\n          if (DragNode['type'] == 'resources') {\r\n            this.updateResource(DropArea['pub_key'], DragNode['_id'], node['type'])\r\n          }\r\n          if (DragNode['type'] == 'units') {\r\n            this.updateUnit(DragNode['pub_key'], DropArea['pub_key'], node['type'])\r\n          }\r\n      }\r\n    }) }\r\n    else{\r\n      this.layoutUtilsService.showActionNotification(_unadraggableMessage, MessageType.Read);\r\n    }\r\n    this.dragNode = null;\r\n    this.dragNodeExpandOverNode = null;\r\n    this.dragNodeExpandOverTime = 0;\r\n    console.log(this.dataSource.data)\r\n  \r\n  }\r\n\r\n  handleDragEnd(event) {\r\n    this.dragNode = null;\r\n    this.dragNodeExpandOverNode = null;\r\n    this.dragNodeExpandOverTime = 0;\r\n  }\r\n\r\n\r\n  updateUnit(pub_key, parent, updateArea) {\r\n    if (updateArea == 'branch')\r\n      this.treeclubservice.updateUnitData({ 'pub_key': pub_key, 'branch_key': parent }).subscribe(res => {\r\n      })\r\n    if (updateArea == 'units')\r\n      this.treeclubservice.updateUnitData({ 'pub_key': pub_key, 'units_key': parent }).subscribe(res => {\r\n      })\r\n  }\r\n  updateResource(parent, _id, updatearea) {\r\n    if (updatearea == 'units')\r\n      this.treeclubservice.updateResourceData({ 'units_key': parent, '_id': _id }).subscribe(\r\n        res => { console.log(res) })\r\n    if (updatearea == 'branch')\r\n      this.treeclubservice.updateResourceData({ 'branch_key': parent, '_id': _id }).subscribe(\r\n        res => { console.log(res) })\r\n\r\n\r\n  }\r\n  handelDragElem(node, dragElem) {\r\n    let newItem: TodoItemNode;\r\n    if (this.dragNodeExpandOverArea === 'above') {\r\n      newItem = this.database.copyPasteItemAbove(dragElem,node);\r\n    } else if (this.dragNodeExpandOverArea === 'below') {\r\n      newItem = this.database.copyPasteItemBelow(dragElem, node);\r\n    } else {\r\n      newItem = this.database.copyPasteItem(dragElem,node);\r\n    }\r\n    this.database.deleteItem(dragElem);\r\n    //  console.log(newItem)\r\n    this.treeControl.expandDescendants(this.nestedNodeMap.get(newItem));\r\n  }\r\n}\r\n\r\n","module.exports = \"<div class=\\\"kt-portlet\\\" [ngClass]=\\\"{ 'kt-portlet--body-progress' : viewLoading, 'kt-portlet--body-progress-overlay' : loadingAfterSubmit }\\\">\\r\\n    <div class=\\\"kt-portlet__head kt-portlet__head__custom\\\">\\r\\n        <div class=\\\"kt-portlet__head-label\\\">\\r\\n            <h3 class=\\\"kt-portlet__head-title\\\">{{ getTitle() }}</h3>\\r\\n        </div>\\r\\n    </div>\\r\\n    <div>\\r\\n        <div class=\\\"kt-form\\\">\\r\\n            <div class=\\\"kt-portlet__body\\\">\\r\\n\\r\\n                <div class=\\\"kt-portlet__body-progress\\\">\\r\\n                    <mat-spinner [diameter]=\\\"20\\\"></mat-spinner>\\r\\n                </div>\\r\\n\\r\\n                <kt-alert *ngIf=\\\"hasFormErrors\\\" type=\\\"warn\\\" [duration]=\\\"30000\\\" [showCloseButton]=\\\"true\\\" (close)=\\\"onAlertClose($event)\\\">\\r\\n                    {{errormessage}}\\r\\n                </kt-alert>\\r\\n                <kt-alert *ngIf=\\\"checked\\\" type=\\\"warn\\\" [duration]=\\\"30000\\\" [showCloseButton]=\\\"true\\\" (close)=\\\"onAlertClose($event)\\\">\\r\\n                    Sorry , May be You don not all invitation permissions \\r\\n                </kt-alert>\\r\\n                <div class=\\\"form-group kt-form__group row d-block\\\">\\r\\n                    <div class=\\\"col-lg-4 kt-margin-bottom-20-mobile\\\">\\r\\n                        <mat-form-field class=\\\"mat-form-field-fluid\\\">\\r\\n                            <input matInput type=\\\"text\\\"\\r\\n                                placeholder=\\\"Enter Email\\\"\\r\\n                                [(ngModel)]=\\\"invitation.email\\\" #email=\\\"ngModel\\\" name=\\\"email\\\" required email/>\\r\\n                            <mat-error *ngIf=\\\"email.touched&&!email.valid&&email.errors?.required\\\">Email is\\r\\n                                 <strong>required</strong>\\r\\n                            </mat-error>\\r\\n                            <mat-error *ngIf=\\\"email.touched&&!email.valid&&email.errors?.email\\\">Please enter\\r\\n                                <strong>valid email</strong>\\r\\n                            </mat-error>\\r\\n                            <mat-hint align=\\\"start\\\">Please enter\\r\\n                                <strong>Email</strong>\\r\\n                            </mat-hint>\\r\\n                        </mat-form-field>\\r\\n                    </div>\\r\\n                </div>\\r\\n\\r\\n                <div class=\\\"form-group kt-form__group row d-block\\\">\\r\\n                    <div class=\\\"col-lg-4 kt-margin-bottom-20-mobile\\\">\\r\\n\\r\\n                        <mat-form-field>\\r\\n                            <mat-label> User Type:</mat-label>\\r\\n                            <mat-select required [(ngModel)]=\\\"invitation.user_type\\\"\\r\\n                                class=\\\"btn-group bootstrap-select bs-select\\\">\\r\\n                                <mat-option selected ng-reflect-value=\\\"staff\\\" value=\\\"staff\\\">Staff</mat-option>\\r\\n                                <mat-option ng-reflect-value=\\\"member\\\" value=\\\"member\\\">Member</mat-option>\\r\\n                            </mat-select>\\r\\n                        </mat-form-field>\\r\\n                    </div>\\r\\n                </div>\\r\\n\\r\\n                <div class=\\\"form-group kt-form__group row d-block\\\">\\r\\n                    <div class=\\\"col-lg-4 kt-margin-bottom-20-mobile\\\">\\r\\n                        <mat-form-field>\\r\\n                            <mat-label> All Branchs and Units :</mat-label>\\r\\n                            <mat-select [(ngModel)]=\\\"invitation.brancandunits\\\"\\r\\n                                class=\\\"btn-group bootstrap-select bs-select\\\">\\r\\n                                \\r\\n                                <!-- <mat-option *ngFor=\\\"let value of basicChoose\\\">\\r\\n                                    <mat-checkbox (change)=\\\"value.checked=!value.checked;onChange(value);\\\">\\r\\n                                        {{value.name}}\\r\\n                                    </mat-checkbox>\\r\\n                                </mat-option> -->\\r\\n                                <ng-container *ngFor=\\\"let value of allbrancandunits\\\">\\r\\n                                <mat-option  >\\r\\n                                            <mat-checkbox [checked]='value.checked'\\r\\n                                                (change)=\\\"value.checked=!value.checked;onChange(value)\\\">{{value.name}}  \\r\\n                                            </mat-checkbox>\\r\\n                                         </mat-option>\\r\\n                                            <mat-list style=\\\"margin-left:30px;\\\">                                               \\r\\n                                                <div *ngFor=\\\"let unit of value.unit\\\">\\r\\n                                                     <mat-list-item style=\\\"font-size: small;\\\">\\r\\n                                                    <mat-checkbox [checked]='unit.checked'\\r\\n                                                        (change)=\\\"unit.checked=!unit.checked;onChange(unit)\\\">{{unit.name}}\\r\\n                                                    </mat-checkbox>\\r\\n                                                     </mat-list-item>\\r\\n                                                </div>\\r\\n                                            </mat-list>\\r\\n                               \\r\\n                                </ng-container>\\r\\n                            </mat-select>\\r\\n                        </mat-form-field>\\r\\n            \\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n                        \\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"kt-separator kt-separator--dashed\\\"></div>\\r\\n            </div>\\r\\n            <div class=\\\"kt-portlet__foot kt-portlet__foot--fit kt-portlet__no-border\\\">\\r\\n                <div class=\\\"kt-form__actions kt-form__actions--solid\\\">\\r\\n                    <div class=\\\"row text-right\\\">\\r\\n                        <div class=\\\"col-lg-12\\\">\\r\\n                            <button type=\\\"button\\\" mat-raised-button [mat-dialog-close]=\\\"data.animal\\\" cdkFocusInitial\\r\\n                                matTooltip=\\\"Cancel changes\\\">\\r\\n                                Cancel\\r\\n                            </button>&nbsp;\\r\\n                            <button type=\\\"button\\\" [disabled]='checked' mat-raised-button color=\\\"primary\\\"\\r\\n                                (click)=\\\"onSubmit()\\\" [disabled]=\\\"viewLoading\\\" matTooltip=\\\"Save changes\\\">\\r\\n                                Save\\r\\n                            </button>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n\"","// Angular\r\nimport { Component, OnInit, Inject, ChangeDetectionStrategy, OnDestroy,ChangeDetectorRef } from '@angular/core';\r\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material';\r\n// Lodash\r\nimport { Router } from '@angular/router';\r\nimport * as _lodash from 'lodash';\r\n// RxJS\r\nimport { Observable, of, Subscription } from 'rxjs';\r\n// Lodash\r\nimport { each, find, some } from 'lodash';\r\n// NGRX\r\nimport { Update } from '@ngrx/entity';\r\nimport { Store, select } from '@ngrx/store';\r\n// State\r\nimport { AppState } from '../../../../../core/reducers';\r\nimport { LayoutUtilsService, MessageType, QueryParamsModel } from '../../../../../core/_base/crud';\r\n\r\nimport { delay } from 'rxjs/operators';\r\nimport { Invitation } from './invitations.model';\r\nimport { InvitationComponent } from '../invitations.component';\r\nimport { UserService } from '../../../../../core/auth/_services';\r\n@Component({\r\n\tselector: 'kt-invitations-edit-dialog',\r\n\ttemplateUrl: './invitations-edit.dialog.component.html',\r\n\tstyleUrls: ['../../usser.management.scss'],\r\n\tchangeDetection: ChangeDetectionStrategy.Default,\r\n})\r\nexport class InvitationsEditDialogComponent implements OnInit, OnDestroy {\r\n\t// Public properties\r\n\tinvitation: Invitation;\r\n\tinvitation$: Observable<Invitation>;\r\n\thasFormErrors: boolean = false;\r\n\terrormessage: string = '';\r\n\tviewLoading: boolean = false;\r\n\tloadingAfterSubmit: boolean = false;\r\n\tallbrancandunits=[];\r\n\tchecked = false\r\n\tcurrent_club_login= (JSON.parse(localStorage.getItem('user')))['current_club_login'];\r\n\t//basicChoose=[{,checked:false}]\r\n\t// Private properties\r\n\tprivate componentSubscriptions: Subscription;\r\n\r\n\t/**\r\n\t * Component constructor\r\n\t *\r\n\t * @param dialogRef: MatDialogRef<InvitationsEditDialogComponent>\r\n\t * @param data: any\r\n\t * @param store: Store<AppState>\r\n\t */\r\n\tconstructor(public dialogRef: MatDialogRef<InvitationsEditDialogComponent>,\r\n\t\t@Inject(MAT_DIALOG_DATA) public data: any,\r\n\t\tprivate ChangeDetectorRef:ChangeDetectorRef,\r\n\t\tprivate store: Store<AppState>, private ser: UserService, private router: Router,\r\n\t\tprivate layoutUtilsService: LayoutUtilsService) { \r\n\t\t\tthis.allbrancandunits.push({name:'mainclub','pub_key':this.current_club_login,'checked':false,'unit':[]})\r\n\t\t}\r\n\r\n\t/**\r\n\t * @ Lifecycle sequences => https://angular.io/guide/lifecycle-hooks\r\n\t */\r\n\t//getallusers\r\n\t/**\r\n\t * On init\r\n\t */\r\n\tngOnInit() {\r\n\t\tconst newInviation = new Invitation();\r\n\t\tthis.invitation$ = of(newInviation);\r\n\t\tthis.invitation$.subscribe(res => {\r\n\t\t\tif (!res) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.invitation = res;\r\n\t\t});\r\n\t\tif (this.checkedpermission('getallusers')) {\r\n\t\t\tthis.ser.getAllBrachsAndUnits(1, 10000).subscribe(\r\n\t\t\t\tres => {\r\n\t\t\t\t\tif (res['result']) {\r\n\t\t\t\t\t\tlet branchs=[]\r\n\t\t\t\t\t\tres['data'].forEach(element => {\r\n\t\t\t\t\t\t\tif(element.type=='branch')\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tbranchs.push(element)\r\n\t\t\t\t\t\t\tlet units=[]\r\n\t\t\t\t\t\t\t\tres['data'].forEach((elem,index) => {\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tif(elem.branch_key==element.pub_key){\r\n\t\t\t\t\t\t\t\t\tunits.push(elem)\r\n\t\t\t\t\t\t\t\t\tdelete\tres['data'][index]\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\telement['unit']=units\r\n\t\t\t\t\t\t\t\tthis.allbrancandunits.push(element)\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telement['checked'] = false\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t//this.allbrancandunits = res['data'];\r\n\t\t\t\t\t\tconsole.log(this.allbrancandunits)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.checked = true\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * On destroy\r\n\t */\r\n\tngOnDestroy() {\r\n\t\tif (this.componentSubscriptions) {\r\n\t\t\tthis.componentSubscriptions.unsubscribe();\r\n\t\t}\r\n\t}\r\n\r\n\t\r\n\r\n\t/**\r\n\t * Save data\r\n\t */\r\n\tonSubmit() {\r\n\t\tthis.loadingAfterSubmit = true;\r\n\t\tthis.viewLoading = true;\r\n\t\tlet invitationKey=[]\r\n\tthis.allbrancandunits.forEach(element=>{\r\n\t\tif(element.checked==true){\r\n\t\t\tinvitationKey.push(element.pub_key)\r\n\r\n\t\t}\r\n\t\telement.unit.forEach(elem => {\r\n\t\t\tif(elem.checked==true)\r\n\t\t\tinvitationKey.push(elem.pub_key)\r\n\t\t});\r\n\t})\r\nconsole.log(invitationKey)\r\n\t\tif (this.checkedpermission('sendinvitations')) {\r\n\t\t\tthis.ser.sendInvitations({ email: this.invitation.email, user_type: this.invitation.user_type, invitation_key:invitationKey,club_key:this.current_club_login}).subscribe(\r\n\t\t\t\tres => {\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\tif (res['result']) {\r\n\t\t\t\t\t\tthis.dialogRef.close({});\r\n\t\t\t\t\t\tif (this.router.url == '/default/user-management/invitations')\r\n\t\t\t\t\t\t\tthis.router.navigateByUrl(\"/default/user-management/invitation\");\r\n\t\t\t\t\t\telse this.router.navigateByUrl(\"/default/user-management/invitations\");\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.layoutUtilsService.showActionNotification(res['data'], MessageType.Update);\r\n\t\t\t\t\t\t}, 1000)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.loadingAfterSubmit = false;\r\n\t\t\t\t\t\tthis.viewLoading = false;\r\n\t\t\t\t\t\tthis.hasFormErrors = true;\r\n\t\t\t\t\t\tthis.errormessage = res['data'];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.checked = true\r\n\t\t}\r\n\r\n\t}\r\n\t//to check assign club,branch,unit to invitation \r\n\tonChange(place) {\r\n\tconsole.log(place)\r\n\tif(place.name=='mainclub'&&place.checked==true){\r\n\t//\tconsole.log(place)\r\n\t\tfor (let index = 0; index < this.allbrancandunits.length; index++) {\r\n\t\t\tthis.allbrancandunits[index]['checked']=true\r\n\t\t\tfor (let i = 0; i < this.allbrancandunits[index].unit.length; i++) {\r\n\t\t\t\tthis.allbrancandunits[index].unit[i]['checked']=true\r\n\t\t\t}\r\n\t\t\tthis.ChangeDetectorRef.detectChanges()\t\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\tif(place.name=='mainclub'&&place.checked==false){\r\n\t\tconsole.log(place)\r\n\t\tfor (let index = 0; index < this.allbrancandunits.length; index++) {\r\n\t\t\tthis.allbrancandunits[index]['checked']=false\t\r\n\t\t\tfor (let i = 0; i < this.allbrancandunits[index].unit.length; i++) {\r\n\t\t\t\tthis.allbrancandunits[index].unit[i]['checked']=false\r\n\t\t\t}\r\n\t\t\tthis.ChangeDetectorRef.detectChanges()\t\r\n\t\t}\r\n\t}\r\n\tif(place.type=='branch'&&place.checked==true){\r\n\t\tconsole.log(place)\r\n\t\tfor (let index = 0; index < place.unit.length; index++) {\r\n\t\t\tplace.unit[index]['checked']=true\r\n\t\t\tthis.ChangeDetectorRef.detectChanges()\t\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\tif(place.type=='branch'&&place.checked==false){\r\n\t\tconsole.log(place)\r\n\t\tfor (let index = 0; index < place.unit.length; index++) {\r\n\t\t\tplace.unit[index]['checked']=false\t\r\n\t\t\tthis.ChangeDetectorRef.detectChanges()\t\r\n\t\t}\r\n\t}\r\n\t\r\n\t}\r\n\r\n\tcheckedpermission(key: String) {\r\n\t\tlet checked = false\r\n\t\tif (localStorage.getItem('user')) {\r\n\r\n\t\t\tif (JSON.parse(localStorage.getItem('user'))) {\r\n\t\t\t\tlet user = JSON.parse(localStorage.getItem('user'))\r\n\r\n\t\t\t\tif (user['allPrivilidge']) {\r\n\t\t\t\t\tconst privilidge = user['allPrivilidge']\r\n\r\n\t\t\t\t\tObject.keys(privilidge).forEach(role => {\r\n\t\t\t\t\t\tObject.keys(privilidge[role]).forEach(pri => {\r\n\r\n\t\t\t\t\t\t\tlet per = (privilidge[role][pri].toString()).trim()\r\n\t\t\t\t\t\t\tif (key.trim() == per) {\r\n\t\t\t\t\t\t\t\tchecked = true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn checked\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t/**\r\n\t * Close alert\r\n\t *\r\n\t * @param $event: Event\r\n\t */\r\n\tonAlertClose($event) {\r\n\t\tthis.hasFormErrors = false;\r\n\t}\r\n\r\n\r\n\t/** UI */\r\n\t/**\r\n\t * Returns component title\r\n\t */\r\n\tgetTitle(): string {\r\n\t\treturn 'New Invitation';\r\n\t}\r\n\r\n\tisTitleValid(): boolean {\r\n\t\treturn true;\r\n\t}\r\n\r\n\r\n}\r\n","import { BaseModel } from '../../../../../core/_base/crud';\r\n\r\nexport class Invitation extends BaseModel {\r\n    id: number;\r\n    email: string;\r\n    user_type: string;\r\n    brancandunits : [];\r\n\r\n    clear(): void {\r\n        this.id = undefined;\r\n        this.email = '';\r\n        this.user_type='';\r\n        this.brancandunits = [];\r\n\t}\r\n}\r\n","module.exports = \"<kt-portlet>\\r\\n\\t<!-- PORTLET LOADING | Binded to TABLE Datasource -->\\r\\n\\t<!-- See prop => '~/core/_crud/models/data-sources/_base.datasource.ts' (loading$) -->\\r\\n\\t<kt-portlet-header [title]=\\\"'Invitations'\\\" [class]=\\\"'kt-portlet__head--lg'\\\" >\\r\\n\\t\\t<ng-container ktPortletTools>\\r\\n\\t\\t\\t<button (click)=\\\"addInvitations()\\\" mat-raised-button color=\\\"primary\\\" matTooltip=\\\"Invite new Staff\\\">Send Invitation </button>\\r\\n\\t\\t\\t<!-- Buttons (Material Angular) | See off.documenations 'https://material.angular.io/components/button/overview' -->\\r\\n\\t\\t\\t<!-- mat-raised-button | Rectangular contained button w/ elevation  -->\\r\\n\\t\\t</ng-container>\\r\\n\\t</kt-portlet-header>\\r\\n\\t<!-- end::Header -->\\r\\n\\r\\n\\t<!-- start::Body (attribute: ktPortletBody) -->\\r\\n\\t<kt-portlet-body>\\r\\n\\r\\n\\t\\t<!-- start::FILTERS & GROUP ACTIONS -->\\r\\n\\t\\t<div class=\\\"kt-form\\\">\\r\\n\\t\\t\\t<!-- start::FILTERS -->\\r\\n\\t\\t\\t<div class=\\\"kt-form__filtration\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"row align-items-center\\\">\\r\\n\\r\\n\\t\\t\\t\\t\\t<div class=\\\"col-md-2 kt-margin-bottom-10-mobile\\\">\\r\\n\\t\\t\\t\\t\\t\\t<!-- 'm  margin-bottom-10-mobile' for adaptive make-up  -->\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"kt-form__control\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<mat-form-field class=\\\"mat-form-field-fluid\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<mat-select [(value)]=\\\"filterStatus\\\" (selectionChange)=\\\"applyFilter()\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<mat-option value=\\\"\\\">All</mat-option>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<mat-option value=\\\"pending\\\">Pending</mat-option>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<mat-option value=\\\"approved\\\">Approved</mat-option>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<mat-option value=\\\"revoked\\\">Revoked</mat-option>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</mat-select>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<mat-hint align=\\\"start\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<strong>Filter</strong> by Status\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</mat-hint>\\r\\n\\t\\t\\t\\t\\t\\t\\t</mat-form-field>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t\\t\\t<div class=\\\"col-md-2 kt-margin-bottom-10-mobile\\\">\\t\\t\\t\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"kt-form__control\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<mat-form-field class=\\\"mat-form-field-fluid\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<mat-select [(value)]=\\\"filterPlace\\\" (selectionChange)=\\\"applyFilter()\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<mat-option value=\\\"\\\">All</mat-option>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<mat-option *ngFor=\\\"let value of Places\\\"  [value]=\\\"value.pub_key\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{{value.name}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</mat-option>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</mat-select>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<mat-hint align=\\\"start\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<strong>Filter</strong> by Branchs and Units\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</mat-hint>\\r\\n\\t\\t\\t\\t\\t\\t\\t</mat-form-field>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t\\t\\t<div class=\\\"col-md-2 kt-margin-bottom-10-mobile\\\">\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"kt-form__control\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<mat-form-field class=\\\"mat-form-field-fluid\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<mat-select [(value)]=\\\"filterInvitedBy\\\" (selectionChange)=\\\"applyFilter()\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<mat-option value=\\\"\\\">All</mat-option>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<mat-option *ngFor=\\\"let value of getallinviteby\\\"  [value]=\\\"value.pub_key\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{{value.name}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</mat-option>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</mat-select>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<mat-hint align=\\\"start\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<strong>Filter</strong> by Admin\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</mat-hint>\\r\\n\\t\\t\\t\\t\\t\\t\\t</mat-form-field>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t\\t\\t<div class=\\\"col-md-2 kt-margin-bottom-10-mobile\\\">\\r\\n\\t\\t\\t\\t\\t\\t<mat-form-field class=\\\"mat-form-field-fluid\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<input matInput placeholder=\\\"Search user\\\" [(ngModel)]=\\\"SearchKey\\\" placeholder=\\\"Search\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t(keyup)=\\\"applyFilter()\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<button mat-button matSuffix mat-icon-button aria-label=\\\"Clear\\\" *ngIf=\\\"SearchKey\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t(click)=\\\"onSearchClear()\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<mat-icon>close</mat-icon>\\r\\n\\t\\t\\t\\t\\t\\t\\t</button>\\r\\n\\t\\t\\t\\t\\t\\t\\t<mat-hint align=\\\"start\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<strong>Search</strong> in all fields\\r\\n\\t\\t\\t\\t\\t\\t\\t</mat-hint>\\r\\n\\t\\t\\t\\t\\t\\t</mat-form-field>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<!-- end::FILTERS -->\\r\\n\\r\\n\\t\\t\\t<!-- start::GROUP ACTIONS -->\\r\\n\\t\\t\\t<!-- Group actions list: 'Delete selected' | 'Fetch selected' | 'Update status for selected' -->\\r\\n\\t\\t\\t<!-- Group actions are shared for all LISTS -->\\r\\n\\t\\t\\t<div class=\\\"row align-items-center collapse kt-form__group-actions kt-margin-top-20 kt-margin-bottom-20\\\"\\r\\n\\t\\t\\t\\t[ngClass]=\\\"{'show' : selection.selected.length > 0}\\\"><!-- We show 'Group Actions' div if smth are selected -->\\r\\n\\t\\t\\t\\t<div class=\\\"col-xl-12\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"kt-form__group kt-form__group--inline\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"kt-form__label kt-form__label-no-wrap\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<label class=\\\"kt--font-bold kt-font-danger-\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span translate=\\\"ECOMMERCE.COMMON.SELECTED_RECORDS_COUNT\\\"></span> {{ selection.selected.length }}\\r\\n\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t<!-- selectedCountsTitle => function from codeBehind (users-list.component.ts file) -->\\r\\n\\t\\t\\t\\t\\t\\t\\t<!-- selectedCountsTitle => just returns title of selected items count -->\\r\\n\\t\\t\\t\\t\\t\\t\\t<!-- for example: Selected records count: 4 -->\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"kt-form__control kt-form__group--inline\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<button (click)=\\\"fetchUsers()\\\" mat-raised-button matTooltip=\\\"Fetch selected users\\\"  class=\\\"mat-button-mt-4\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<mat-icon>clear_all</mat-icon>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tFetch Selected\\r\\n\\t\\t\\t\\t\\t\\t\\t</button>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<!-- end::GROUP ACTIONS -->\\r\\n\\t\\t</div>\\r\\n\\t\\t<!-- end::FILTERS & GROUP ACTIONS -->\\r\\n\\r\\n\\t\\t<!-- MATERIAL TABLE | Binded to datasources -->\\r\\n\\t\\t<!-- See off.documentations 'https://material.angular.io/components/table/overview' -->\\r\\n\\r\\n\\t\\t<div class=\\\"mat-table__wrapper\\\">\\r\\n\\t\\t\\t<mat-table class=\\\"lmat-elevation-z8\\\"\\r\\n\\t\\t\\t\\t#table\\r\\n\\t\\t\\t\\t[dataSource]=\\\"dataSource\\\"\\r\\n\\t\\t\\t\\tmatSort\\r\\n\\t\\t\\t\\t#sort1=\\\"matSort\\\"\\r\\n\\t\\t\\t\\tmatSortActive=\\\"id\\\"\\r\\n\\t\\t\\t\\tmatSortDirection=\\\"asc\\\"\\r\\n\\t\\t\\t\\tmatSortDisableClear>\\r\\n\\t\\t\\t\\t<!-- Checkbox Column -->\\r\\n\\r\\n\\t\\t\\t\\t<!-- Table with selection -->\\r\\n\\t\\t\\t\\t<!-- https://run.stackblitz.com/api/angular/v1?file=app%2Ftable-selection-example.ts -->\\r\\n\\t\\t\\t\\t<!-- <ng-container matColumnDef=\\\"select\\\">\\r\\n\\t\\t\\t\\t\\t<mat-header-cell *matHeaderCellDef class=\\\"mat-column-checkbox\\\">\\r\\n\\t\\t\\t\\t\\t\\t<mat-checkbox (change)=\\\"$event ? masterToggle() : null\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t[checked]=\\\"selection.hasValue() && isAllSelected()\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t[indeterminate]=\\\"selection.hasValue() && !isAllSelected()\\\">\\r\\n\\t\\t\\t\\t\\t\\t</mat-checkbox>\\r\\n\\t\\t\\t\\t\\t</mat-header-cell>\\r\\n\\t\\t\\t\\t\\t<mat-cell *matCellDef=\\\"let row\\\" class=\\\"mat-column-checkbox\\\">\\r\\n\\t\\t\\t\\t\\t\\t<mat-checkbox (click)=\\\"$event.stopPropagation()\\\" (change)=\\\"$event ? selection.toggle(row) : null\\\" [checked]=\\\"selection.isSelected(row)\\\">\\r\\n\\t\\t\\t\\t\\t\\t</mat-checkbox>\\r\\n\\t\\t\\t\\t\\t</mat-cell>\\r\\n\\t\\t\\t\\t</ng-container> -->\\r\\n\\r\\n\\t\\t\\t<ng-container matColumnDef=\\\"id\\\">\\r\\n\\t\\t\\t\\t<!-- ATTRIBUTE mat-sort-header  for sorting | https://material.angular.io/components/sort/overview -->\\r\\n\\t\\t\\t\\t<mat-header-cell (click)=\\\"applyFilter('id')\\\" *matHeaderCellDef mat-sort-header>#</mat-header-cell>\\r\\n\\t\\t\\t\\t<mat-cell *matCellDef=\\\"let invitation; let i = index\\\">{{i+1}}</mat-cell>\\r\\n\\t\\t\\t</ng-container>\\r\\n\\r\\n\\t\\t\\t\\t<ng-container matColumnDef=\\\"admin\\\">\\r\\n\\t\\t\\t\\t\\t<!-- ATTRIBUTE mat-sort-header  for sorting | https://material.angular.io/components/sort/overview -->\\r\\n\\t\\t\\t\\t\\t<mat-header-cell *matHeaderCellDef >Admin</mat-header-cell>\\r\\n\\t\\t\\t\\t\\t<mat-cell *matCellDef=\\\"let invitation\\\" >{{invitation.author.username}}</mat-cell>\\r\\n\\t\\t\\t\\t</ng-container>\\r\\n\\r\\n\\r\\n\\r\\n\\t\\t\\t\\t<ng-container matColumnDef=\\\"username\\\">\\r\\n\\t\\t\\t\\t\\t<mat-header-cell *matHeaderCellDef (click)=\\\"applyFilter('email')\\\" mat-sort-header >User Email</mat-header-cell>\\r\\n\\t\\t\\t\\t\\t<mat-cell *matCellDef=\\\"let invitation\\\" >{{invitation.to}}</mat-cell>\\r\\n\\t\\t\\t\\t</ng-container>\\r\\n\\r\\n\\t\\t\\t\\t<ng-container matColumnDef=\\\"status\\\">\\r\\n\\t\\t\\t\\t\\t<mat-header-cell (click)=\\\"applyFilter('status')\\\" *matHeaderCellDef mat-sort-header >Status</mat-header-cell>\\r\\n\\t\\t\\t\\t\\t<mat-cell  *matCellDef=\\\"let invitation\\\" >\\r\\n\\t\\t\\t\\t\\t\\t<span *ngIf=\\\"invitation.status=='approved'\\\" class=\\\"kt-badge kt-badge--inline kt-badge--pill kt-badge--success kt-badge--wide\\\">Approved</span>\\r\\n\\t\\t\\t\\t\\t\\t<span *ngIf=\\\"invitation.status=='pending'\\\" class=\\\"kt-badge kt-badge--inline kt-badge--pill kt-badge--metal kt-badge--wide\\\">Pending</span>\\r\\n\\t\\t\\t\\t\\t\\t<span *ngIf=\\\"invitation.status=='revoked'\\\" class=\\\"kt-badge kt-badge--inline kt-badge--pill kt-badge--danger kt-badge--wide\\\">Revoked</span>\\r\\n\\t\\t\\t\\t\\t</mat-cell>\\r\\n\\t\\t\\t\\t</ng-container>\\r\\n\\r\\n\\t\\t\\t\\t<ng-container matColumnDef=\\\"actions\\\" >\\r\\n\\t\\t\\t\\t\\t<mat-header-cell *matHeaderCellDef style=\\\"max-width:150px\\\">Actions</mat-header-cell>\\r\\n\\t\\t\\t\\t\\t<mat-cell *matCellDef=\\\"let invitation\\\" style=\\\"max-width:150px\\\">\\r\\n\\t\\t\\t\\t\\t\\t<button (click)=\\\"resendinvitation(invitation._id)\\\" mat-icon-button color=\\\"primary\\\" *ngIf=\\\"checkedpermission('sendinvitations')\\\" matTooltip=\\\"Resend invitation\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<mat-icon>cached</mat-icon>\\r\\n\\t\\t\\t\\t\\t\\t</button>&nbsp;\\r\\n\\t\\t\\t\\t\\t\\t<button mat-icon-button color=\\\"warn\\\" matTooltip=\\\"Revoke Invitation\\\" type=\\\"button\\\" *ngIf=\\\"checkedpermission('sendinvitations')\\\" (click)=\\\"revokeinvitation(invitation._id)\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<mat-icon>delete</mat-icon>\\r\\n\\t\\t\\t\\t\\t\\t</button>\\r\\n\\t\\t\\t\\t\\t</mat-cell>\\r\\n\\t\\t\\t\\t</ng-container>\\r\\n                <ng-container matColumnDef=\\\"loading\\\">\\r\\n                 <mat-footer-cell *matFooterCellDef colspan=\\\"6\\\">\\r\\n                   Loading...\\r\\n\\t\\t\\t\\t </mat-footer-cell>\\r\\n\\t\\t\\t\\t</ng-container>\\r\\n\\r\\n\\t\\t\\t\\t<mat-header-row *matHeaderRowDef=\\\"displayedColumns\\\"></mat-header-row>\\r\\n\\r\\n\\t\\t\\t\\t<mat-row *matRowDef=\\\"let row; columns: displayedColumns\\\"></mat-row>\\r\\n\\t\\t\\t\\t<mat-footer-row *matFooterRowDef=\\\"['loading']\\\" [ngClass]=\\\"{'hide':checkedinvitations()}\\\"></mat-footer-row>\\r\\n\\r\\n\\t\\t\\t</mat-table>\\r\\n\\t\\t\\t<mat-paginator (page)=\\\"nextPage($event)\\\" [pageSizeOptions]=\\\"[2,10,25,100]\\\" [pageSize]=\\\"5\\\"></mat-paginator>\\r\\n        </div>\\r\\n\\t\\t<!-- end: BOTTOM -->\\r\\n\\t</kt-portlet-body>\\r\\n\\t<!-- end::Body -->\\r\\n</kt-portlet>\\r\\n\"","import { AfterViewInit, AfterViewChecked } from '@angular/core';\r\n// Angular\r\nimport { Component, OnInit, ElementRef, ViewChild, ChangeDetectionStrategy, OnDestroy, ChangeDetectorRef } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\n// Material\r\nimport { SelectionModel } from '@angular/cdk/collections';\r\nimport { MatPaginator, MatSort, MatSnackBar, MatDialog, MatTableDataSource } from '@angular/material';\r\n// RXJS\r\nimport { debounceTime, distinctUntilChanged, tap, skip, take, delay, map } from 'rxjs/operators';\r\nimport { fromEvent, merge, Observable, of, Subscription } from 'rxjs';\r\n// LODASH\r\nimport { each, find } from 'lodash';\r\n\r\n// NGRX\r\nimport { Store, select } from '@ngrx/store';\r\nimport { AppState } from '../../../../core/reducers';\r\n\r\n// Services\r\nimport { LayoutUtilsService, MessageType, QueryParamsModel } from '../../../../core/_base/crud';\r\nimport { UserService } from '../../../../core/auth/_services'\r\nimport { InvitationsEditDialogComponent } from './invitations-edit/invitations-edit.dialog.component';\r\n\r\nimport { SubheaderService } from '../../../../core/_base/layout';\r\n\r\n\r\n// Table with EDIT item in MODAL\r\n// ARTICLE for table with sort/filter/paginator\r\n// https://blog.angular-university.io/angular-material-data-table/\r\n// https://v5.material.angular.io/components/table/overview\r\n// https://v5.material.angular.io/components/sort/overview\r\n// https://v5.material.angular.io/components/table/overview#sorting\r\n// https://www.youtube.com/watch?v=NSt9CI3BXv4\r\n@Component({\r\n\tselector: 'kt-invitations',\r\n\ttemplateUrl: './invitations.component.html',\r\n\tstyleUrls: ['../usser.management.scss'],\r\n\tchangeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class InvitationComponent implements OnInit, OnDestroy {\r\n\t// Table fields\r\n\tdataSource;\r\n\tlistData: MatTableDataSource<any>;\r\n\tselection = new SelectionModel<any>(true, []);\r\n\tdisplayedColumns = ['id', 'admin', 'username', 'status', 'actions'];\r\n\t@ViewChild(MatPaginator) paginator: MatPaginator;\r\n\t//@ViewChild(MatSort) sort: MatSort;\r\n\t// Filter fields\r\n\t@ViewChild('searchInput') searchInput: ElementRef;\r\n\tlastQuery: QueryParamsModel;\r\n\tSearchKey: string;\r\n\tselectedUser;\r\n\thasMessages: boolean = false;\r\n\tcheckdata: boolean = false;\r\n\tfilterStatus: string = '';\r\n\tPlaces=[]\r\n\tfilterInvitedBy: string = '';\r\n\tgetallinviteby: any;\r\n\torder: number = -1;\r\n\tgetinvitationFirstTime = true\r\n\t// Subscriptions\r\n\tprivate subscriptions: Subscription[] = [];\r\n\tfilterPlace;\r\n\r\n\t/**\r\n\t *\r\n\t * @param activatedRoute: ActivatedRoute\r\n\t * @param store: Store<AppState>\r\n\t * @param router: Router\r\n\t * @param layoutUtilsService: LayoutUtilsService\r\n\t * @param subheaderService: SubheaderService\r\n\t */\r\n\tconstructor(\r\n\t\tprivate activatedRoute: ActivatedRoute,\r\n\t\tprivate store: Store<AppState>,\r\n\t\tprivate router: Router,\r\n\t\tprivate layoutUtilsService: LayoutUtilsService,\r\n\t\tpublic dialog: MatDialog,\r\n\t\tprivate ser: UserService,\r\n\t\tprivate changeDetectorRefs: ChangeDetectorRef\r\n\r\n\t) { }\r\n\t/**\r\n\t * @ Lifecycle sequences => https://angular.io/guide/lifecycle-hooks\r\n\t */\r\n\r\n\t/**\r\n\t * On init\r\n\t */\r\n\tngOnInit() {\r\n\t\tthis.getallinviteby = [];\r\n\t\tthis.getInvitaions();\r\n\t\t//\tthis.getUsresWhichSendEmails();\r\n\t}\r\n\r\n\tngAfterViewInit() {\r\n\t\tthis.getInvitaions()\r\n\r\n\t}\r\n\t/**\r\n\t * On Destroy\r\n\t */\r\n\tngOnDestroy() {\r\n\t\tthis.subscriptions.forEach(el => el.unsubscribe());\r\n\t}\r\n\taddInvitations() {\r\n\t\tif (this.checkedpermission('sendinvitations')) {\r\n\t\t\tconst dialogRef = this.dialog.open(InvitationsEditDialogComponent, { data: {} });\r\n\t\t}\r\n\t\telse {\r\n\t\t\talert('Sorry, you do not have permission to send invitation')\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Close alert\r\n\t *\r\n\t * @param $event: Event\r\n\t */\r\n\tonAlertClose($event) {\r\n\t\tthis.hasMessages = false;\r\n\t}\r\n\r\n\r\n\tgetInvitaions(pages = 1, prepage = 30, search = '', status = '', author_key = '',placeInvitation='', orderby = '', order = -1) {\r\n\r\n\t\tthis.ser.getAllInvitations(pages, prepage, search, status, author_key,placeInvitation, orderby, order).subscribe(\r\n\r\n\t\t\tres => {\r\n\t\t\t\tconsole.log(res['result'])\r\n\t\t\t\t//to do save unique author of invitations in array \r\n\t\t\t\tif (res['result']) {\r\n\t\t\t\t\tif (this.getinvitationFirstTime) {\r\n\t\t\t\t\t\tif (res['result']['invitations']) {\r\n\t\t\t\t\t\t\tres['result']['invitations'].forEach(element => {\r\n\t\t\t\t\t\t\t\tif (element.author)\r\n\t\t\t\t\t\t\t\t\tthis.getallinviteby.push({ name: element.author.username, 'pub_key': element.author.pub_key })\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tconst result = [];\r\n\t\t\t\t\t\t\tconst map = new Map();\r\n\t\t\t\t\t\t\tfor (const item of this.getallinviteby) {\r\n\t\t\t\t\t\t\t\tif (!map.has(item.pub_key)) {\r\n\t\t\t\t\t\t\t\t\tmap.set(item.pub_key, true);    // set any value to Map\r\n\t\t\t\t\t\t\t\t\tresult.push({\r\n\t\t\t\t\t\t\t\t\t\tpub_key: item.pub_key,\r\n\t\t\t\t\t\t\t\t\t\tname: item.name\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.getallinviteby = result\r\n\t\t\t\t\t\t\tconsole.log(this.getallinviteby)\r\n\t\t\t\t\t\t\tthis.getinvitationFirstTime = false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (res['result']['invitations'])\r\n\t\t\t\t\tthis.dataSource = new MatTableDataSource(res['result']['invitations']);\r\n\t\t\t\t\tthis.Places=res['result']['Places']\r\n\t\t\t\t\tthis.changeDetectorRefs.detectChanges();\r\n\t\t\t\t\t//this.listData.sort=this.sort\r\n\t\t\t\t\t//this.listData.paginator=this.paginator\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t)\r\n\t}\r\n\r\n\t// getUsresWhichSendEmails(){\r\n\t// \tthis.ser.getUsresWhichSendEmails().subscribe(\r\n\t// \t\tres=>{\r\n\t// \t\t\tthis.getallinviteby = res['result'];\r\n\t// \t\t}\r\n\t// \t)\r\n\t// }\r\n\r\n\trevokeinvitation(id) {\r\n\t\tthis.ser.reVokeInvitations(id).subscribe(\r\n\r\n\t\t\tres => {\r\n\t\t\t\tif (this.router.url == '/default/user-management/invitations')\r\n\t\t\t\t\tthis.router.navigateByUrl(\"/default/user-management/invitation\");\r\n\t\t\t\telse this.router.navigateByUrl(\"/default/user-management/invitations\");\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.layoutUtilsService.showActionNotification(res['message'], MessageType.Update);\r\n\t\t\t\t}, 1000)\r\n\t\t\t}\r\n\t\t)\r\n\t}\r\n\r\n\tresendinvitation(id) {\r\n\t\tthis.ser.reSendInvitations(id).subscribe(\r\n\t\t\tres => {\r\n\r\n\t\t\t\t// if (this.router.url == '/default/user-management/invitations')\r\n\t\t\t\t// \tthis.router.navigateByUrl(\"/default/user-management/invitation\");\r\n\t\t\t\t// else this.router.navigateByUrl(\"/default/user-management/invitations\");\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.layoutUtilsService.showActionNotification(res['data'], MessageType.Update);\r\n\t\t\t\t}, 1000)\r\n\t\t\t}\r\n\t\t)\r\n\t}\r\n\tapplyFilter(orderby = '') {\r\n\r\n\t\tif (this.SearchKey && this.SearchKey.length > 0)\r\n\t\t\tvar search = this.SearchKey.trim().toLowerCase();\r\n\t\telse var search = '';\r\n\t\tif (this.filterStatus && this.filterStatus.length > 0)\r\n\t\t\tvar status = this.filterStatus;\r\n\t\telse status = '';\r\n\r\n\t\tif (this.filterInvitedBy && this.filterInvitedBy.length > 0)\r\n\t\t\tvar author_key = this.filterInvitedBy;\r\n\t\telse author_key = '';\r\n\r\n\t\tif (orderby != '') {\r\n\t\t\tif (this.order == -1) this.order = 1;\r\n\t\t\telse if (this.order == 1) this.order = -1;\r\n\t\t}\r\n\t\tif (this.filterPlace && this.filterPlace.length > 0)\r\n\t\t var placeInvitation = this.filterPlace;\r\n\t      else placeInvitation = '';\r\n\t\tthis.getInvitaions(null, null, search, status, author_key,placeInvitation, orderby, this.order)\r\n\t}\r\n\tonSearchClear() {\r\n\t\tthis.searchInput.nativeElement.value = ''\r\n\t\tthis.applyFilter()\r\n\t}\r\n\tnextPage(event) {\r\n\r\n\t\tthis.getInvitaions(event.pageIndex + 1, event.pageSize, null)\r\n\t}\r\n\t//checked if there is inivitations or not\r\n\tcheckedinvitations() {\r\n\t\tif (this.dataSource) {\r\n\t\t\tif (this.dataSource.data) {\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\t\t\telse return false\r\n\t\t}\r\n\t\telse false\r\n\t}\r\n\tcheckedpermission(key: String) {\r\n\t\tlet checked = false\r\n\t\tif (localStorage.getItem('user')) {\r\n\r\n\t\t\tif (JSON.parse(localStorage.getItem('user'))) {\r\n\t\t\t\tlet user = JSON.parse(localStorage.getItem('user'))\r\n\r\n\t\t\t\tif (user['allPrivilidge']) {\r\n\t\t\t\t\tconst privilidge = user['allPrivilidge']\r\n\r\n\t\t\t\t\tObject.keys(privilidge).forEach(role => {\r\n\t\t\t\t\t\tObject.keys(privilidge[role]).forEach(pri => {\r\n\r\n\t\t\t\t\t\t\tlet per = (privilidge[role][pri].toString()).trim()\r\n\t\t\t\t\t\t\tif (key.trim() == per) {\r\n\t\t\t\t\t\t\t\tchecked = true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn checked\r\n\t}\r\n\r\n\r\n\tfetchUsers() {\r\n\r\n\t}\r\n\r\n}\r\n","module.exports = \"<div class=\\\"kt-portlet\\\" [ngClass]=\\\"{ 'kt-portlet--body-progress' : viewLoading, 'kt-portlet--body-progress-overlay' : loadingAfterSubmit }\\\">\\r\\n    <div class=\\\"kt-portlet__head kt-portlet__head__custom\\\" *ngIf=\\\"role\\\">\\r\\n        <div class=\\\"kt-portlet__head-label\\\">\\r\\n            <h3 class=\\\"kt-portlet__head-title\\\">{{getTitle()}}</h3>\\r\\n        </div>\\r\\n    </div>\\r\\n    <div *ngIf=\\\"role\\\">\\r\\n        <div class=\\\"kt-form\\\">\\r\\n            <div class=\\\"kt-portlet__body\\\">\\r\\n\\r\\n                <div class=\\\"kt-portlet__body-progress\\\">\\r\\n                    <mat-spinner [diameter]=\\\"20\\\"></mat-spinner>\\r\\n                </div>\\r\\n\\r\\n                <kt-alert *ngIf=\\\"hasFormErrors\\\" type=\\\"warn\\\" [duration]=\\\"30000\\\" [showCloseButton]=\\\"true\\\" (close)=\\\"onAlertClose($event)\\\">\\r\\n                    Oh snap! Change a few things up and try submitting again.\\r\\n                </kt-alert>\\r\\n\\r\\n                <div class=\\\"form-group kt-form__group row d-block\\\">\\r\\n                    <div class=\\\"col-lg-4 kt-margin-bottom-20-mobile\\\">\\r\\n                        <mat-form-field class=\\\"mat-form-field-fluid\\\">\\r\\n                            <input matInput\\r\\n\\r\\n                                placeholder=\\\"Enter Title\\\"\\r\\n                                [(ngModel)]=\\\"role.type\\\" />\\r\\n                            <mat-error>Title is\\r\\n                                <strong>required</strong>\\r\\n                            </mat-error>\\r\\n                            <mat-hint align=\\\"start\\\">Please enter\\r\\n                                <strong>Title</strong>\\r\\n                            </mat-hint>\\r\\n                        </mat-form-field>\\r\\n                    </div>\\r\\n                </div>\\r\\n\\r\\n                <div class=\\\"form-group kt-form__group row d-block\\\">\\r\\n                    <div class=\\\"col-lg-4 kt-margin-bottom-20-mobile\\\">\\r\\n\\r\\n                        <mat-checkbox [(ngModel)] = \\\"role.default\\\">\\r\\n                         <label> Defalut </label>\\r\\n                       </mat-checkbox>\\r\\n                     </div>\\r\\n                 </div>\\r\\n\\r\\n                <div class=\\\"kt-separator kt-separator--dashed\\\"></div>\\r\\n                <h6 class=\\\"kt-section__heading\\\">\\r\\n                    Permissions:\\r\\n                </h6>\\r\\n                <div class=\\\"form-group kt-form__group row\\\">\\r\\n                    <div class=\\\"col-lg-12 kt-margin-bottom-20-mobile\\\">\\r\\n                        <div class=\\\"kt-timeline-3 mb-5\\\">\\r\\n                            <div class=\\\"kt-timeline-3__items kt-timeline-3__items--rolePermissions\\\">\\r\\n                                <div *ngFor=\\\"let _rootRole of permissionsOfloggedUser\\\" class=\\\"kt-timeline-3__inner\\\">\\r\\n\\r\\n                                    <!-- {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}} -->\\r\\n                                    <!-- <button mat-icon-button>\\r\\n                                        <mat-icon class=\\\"mat-icon-rtl-mirror\\\">expand_more</mat-icon>\\r\\n                                    </button> -->\\r\\n                                    <div class=\\\"kt-timeline-3__item kt-border-bottom-grey kt-py-15 kt-bg-grey\\\">\\r\\n                                        <span class=\\\"kt-timeline-3__item-time\\\">\\r\\n                                            <mat-checkbox [(ngModel)]=\\\"_rootRole.isSelected\\\"\\r\\n                                                (change)=\\\"isSelectedChanged($event, _rootRole)\\\"\\r\\n                                            >{{_rootRole.title }}</mat-checkbox>\\r\\n                                        </span>\\r\\n                                    </div>\\r\\n                                    <div class=\\\"d-flex align-items-center kt-border-bottom-grey kt-py-15 kt-bg-grey\\\"style=\\\"flex-wrap:wrap;\\\">\\r\\n                                        <div class=\\\"kt-timeline-3__item kt-timeline-3__item-child\\\"\\r\\n                                            *ngFor=\\\"let _childRole of _rootRole._children\\\">\\r\\n                                            <span class=\\\"kt-timeline-3__item-time\\\">\\r\\n                                                <mat-checkbox [(ngModel)]=\\\"_childRole.isSelected\\\"\\r\\n                                                    (change)=\\\"isSelectedChanged($event, _childRole)\\\"\\r\\n                                                    [disabled]=\\\"role.isCoreRole\\\">{{ _childRole.key }}</mat-checkbox>\\r\\n                                            </span>\\r\\n                                        </div>\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"kt-portlet__foot kt-portlet__foot--fit kt-portlet__no-border\\\">\\r\\n                <div class=\\\"kt-form__actions kt-form__actions--solid\\\">\\r\\n                    <div class=\\\"row text-right\\\">\\r\\n                        <div class=\\\"col-lg-12\\\">\\r\\n                            <button type=\\\"button\\\" mat-raised-button [mat-dialog-close]=\\\"data.animal\\\" cdkFocusInitial matTooltip=\\\"Cancel changes\\\">\\r\\n                                Cancel\\r\\n                            </button>&nbsp;\\r\\n                            <button type=\\\"button\\\"  mat-raised-button color=\\\"primary\\\" (click)=\\\"onSubmit()\\\" [disabled]=\\\"viewLoading\\\" matTooltip=\\\"Save changes\\\">\\r\\n                                Save\\r\\n                            </button>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n\"","// Angular\r\nimport { Component, OnInit, Inject, ChangeDetectionStrategy, OnDestroy } from '@angular/core';\r\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material';\r\n// Lodash\r\nimport * as _lodash from 'lodash';\r\n// RxJS\r\nimport { Observable, of, Subscription } from 'rxjs';\r\n// Lodash\r\nimport { each, find, some } from 'lodash';\r\n// NGRX\r\nimport { Update } from '@ngrx/entity';\r\nimport { Store, select } from '@ngrx/store';\r\n// State\r\nimport { AppState } from '../../../../../core/reducers';\r\n// Services and Models\r\nimport {\r\n\tRole,\r\n\tPermission,\r\n\tselectRoleById,\r\n\tRoleUpdated,\r\n\tselectAllPermissions,\r\n\tselectAllRoles,\r\n\tselectLastCreatedRoleId,\r\n\tRoleOnServerCreated\r\n} from '../../../../../core/auth';\r\nimport { delay } from 'rxjs/operators';\r\n//services\r\nimport { PermissionsService } from '../../../../../core/auth/_services'\r\nimport { forEach } from '@angular/router/src/utils/collection';\r\n@Component({\r\n\tselector: 'kt-role-edit-dialog',\r\n\ttemplateUrl: './role-edit.dialog.component.html',\r\n\tchangeDetection: ChangeDetectionStrategy.Default,\r\n})\r\nexport class RoleEditDialogComponent implements OnInit, OnDestroy {\r\n\t// Public properties\r\n\trole: Role;\r\n\trole$;\r\n\thasFormErrors: boolean = false;\r\n\tviewLoading: boolean = false;\r\n\tloadingAfterSubmit: boolean = false;\r\n\tallPermissions$: Observable<Permission[]>;\r\n\trolePermissions: Permission[] = [];\r\n\tpermissionsOfloggedUser;\r\n\t// Private properties\r\n\tprivate componentSubscriptions: Subscription;\r\n\r\n\t/**\r\n\t * Component constructor\r\n\t *\r\n\t * @param dialogRef: MatDialogRef<RoleEditDialogComponent>\r\n\t * @param data: any\r\n\t * @param store: Store<AppState>\r\n\t */\r\n\tconstructor(public dialogRef: MatDialogRef<RoleEditDialogComponent>,\r\n\t\t@Inject(MAT_DIALOG_DATA) public data: any,\r\n\t\tprivate store: Store<AppState>,\r\n\t\tprivate permission: PermissionsService) { }\r\n\r\n\t/**\r\n\t * @ Lifecycle sequences => https://angular.io/guide/lifecycle-hooks\r\n\t */\r\n\r\n\t/**\r\n\t * On init\r\n\t */\r\n\tngOnInit() {\r\n\t\tthis.role = this.data.role\r\n\t\tconsole.log(this.data)\r\n\t\tif (!this.data.role._id) {\r\n\r\n\t\t}\r\n\t\t//all Permissions of logged user\r\n\t\tthis.permissionsOfloggedUser = this.permission.preparePrivilidges()\r\n\t\tthis.selectedPermissions()\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * On destroy\r\n\t */\r\n\tngOnDestroy() {\r\n\t\tif (this.componentSubscriptions) {\r\n\t\t\tthis.componentSubscriptions.unsubscribe();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Load permissions\r\n\t */\r\n\tloadPermissions() {\r\n\t\tthis.allPermissions$.subscribe(_allPermissions => {\r\n\t\t\tif (!_allPermissions) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst mainPermissions = _allPermissions.filter(el => !el.parentId);\r\n\t\t\tmainPermissions.forEach((element: Permission) => {\r\n\t\t\t\tconst hasUserPermission = this.role.permissions.some(t => t === element.id);\r\n\t\t\t\tconst rootPermission = new Permission();\r\n\t\t\t\trootPermission.clear();\r\n\t\t\t\trootPermission.isSelected = hasUserPermission;\r\n\t\t\t\trootPermission._children = [];\r\n\t\t\t\trootPermission.id = element.id;\r\n\t\t\t\trootPermission.level = element.level;\r\n\t\t\t\trootPermission.parentId = element.parentId;\r\n\t\t\t\trootPermission.title = element.title;\r\n\t\t\t\tconst children = _allPermissions.filter(el => el.parentId && el.parentId === element.id);\r\n\t\t\t\tchildren.forEach(child => {\r\n\t\t\t\t\tconst hasUserChildPermission = this.role.permissions.some(t => t === child.id);\r\n\t\t\t\t\tconst childPermission = new Permission();\r\n\t\t\t\t\tchildPermission.clear();\r\n\t\t\t\t\tchildPermission.isSelected = hasUserChildPermission;\r\n\t\t\t\t\tchildPermission._children = [];\r\n\t\t\t\t\tchildPermission.id = child.id;\r\n\t\t\t\t\tchildPermission.level = child.level;\r\n\t\t\t\t\tchildPermission.parentId = child.parentId;\r\n\t\t\t\t\tchildPermission.title = child.title;\r\n\t\t\t\t\trootPermission._children.push(childPermission);\r\n\t\t\t\t});\r\n\t\t\t\tthis.rolePermissions.push(rootPermission);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\t/** ACTIONS */\r\n\t/**\r\n\t * Returns permissions ids\r\n\t */\r\n\tpreparePermissionIds(): number[] {\r\n\t\tconst result = [];\r\n\t\teach(this.rolePermissions, (_root: Permission) => {\r\n\t\t\tif (_root.isSelected) {\r\n\t\t\t\tresult.push(_root.id);\r\n\t\t\t\teach(_root._children, (_child: Permission) => {\r\n\t\t\t\t\tif (_child.isSelected) {\r\n\t\t\t\t\t\tresult.push(_child.id);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn result;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns role for save\r\n\t */\r\n\r\n\r\n\t/**\r\n\t * Save data\r\n\t */\r\n\tonSubmit() {\r\n\t\tthis.hasFormErrors = false;\r\n\t\tthis.loadingAfterSubmit = false;\r\n\t\t/** check form */\r\n\t\tif (this.data.role.id) {\r\n\t\t\tthis.permission.editPrivilagesType(this.data.role.id, this.combinepermisson(), this.data.role.type, this.data.role.default).subscribe(\r\n\t\t\t\tres => {\r\n\t\t\t\t\tif (res['result']) {\r\n\t\t\t\t\t\tthis.dialogRef.close({\r\n\t\t\t\t\t\t\tisEdit: true\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (this.role['type']) {\r\n\t\t\t\tthis.permission.addPriviliages(this.combinepermisson(), this.data.role.type, this.data.role.default).subscribe(res => {\r\n\t\t\t\t\tif (res['result']) {\r\n\t\t\t\t\t\tthis.dialogRef.close({\r\n\t\t\t\t\t\t\tisEdit: false\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// const editedRole = this.prepareRole();\r\n\t\t// if (editedRole.id > 0) {\r\n\t\t// \tthis.updateRole(editedRole);\r\n\t\t// } else {\r\n\t\t// \tthis.createRole(editedRole);\r\n\t\t// }\r\n\t}\r\n\r\n\t/**\r\n\t * Update role\r\n\t *\r\n\t * @param _role: Role\r\n\t */\r\n\tupdateRole(_role: Role) {\r\n\t\tthis.loadingAfterSubmit = true;\r\n\t\tthis.viewLoading = true;\r\n\t\t/* Server loading imitation. Remove this on real code */\r\n\t\tconst updateRole: Update<Role> = {\r\n\t\t\tid: this.role.id,\r\n\t\t\tchanges: _role\r\n\t\t};\r\n\t\tthis.store.dispatch(new RoleUpdated({\r\n\t\t\tpartialrole: updateRole,\r\n\t\t\trole: _role\r\n\t\t}));\r\n\t\tof(undefined).pipe(delay(1000)).subscribe(() => { // Remove this line\r\n\t\t\tthis.viewLoading = false;\r\n\t\t\tthis.dialogRef.close({\r\n\t\t\t\t_role,\r\n\t\t\t\tisEdit: true\r\n\t\t\t});\r\n\t\t}); // Remove this line\r\n\t}\r\n\r\n\t/**\r\n\t * Create role\r\n\t *\r\n\t * @param _role: Role\r\n\t */\r\n\tcreateRole(_role: Role) {\r\n\t\tthis.loadingAfterSubmit = true;\r\n\t\tthis.viewLoading = true;\r\n\t\tthis.store.dispatch(new RoleOnServerCreated({ role: _role }));\r\n\t\tthis.componentSubscriptions = this.store.pipe(\r\n\t\t\tdelay(1000), // Remove this line\r\n\t\t\tselect(selectLastCreatedRoleId)\r\n\t\t).subscribe(res => {\r\n\t\t\tif (!res) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.viewLoading = false;\r\n\t\t\tthis.dialogRef.close({\r\n\t\t\t\t_role,\r\n\t\t\t\tisEdit: false\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Close alert\r\n\t *\r\n\t * @param $event: Event\r\n\t */\r\n\tonAlertClose($event) {\r\n\t\tthis.hasFormErrors = false;\r\n\t}\r\n\r\n\t/**\r\n\t * Check is selected changes\r\n\t *\r\n\t * @param $event: Event\r\n\t * @param permission: Permission\r\n\t */\r\n\tisSelectedChanged($event, permission: Permission) {\r\n\t\tif (permission._children.length === 0 && permission.isSelected) {\r\n\t\t\tconst _root = find(this.rolePermissions, (item: Permission) => item.id === permission.parentId);\r\n\t\t\tif (_root && !_root.isSelected) {\r\n\t\t\t\t_root.isSelected = true;\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (permission._children.length === 0 && !permission.isSelected) {\r\n\t\t\tconst _root = find(this.rolePermissions, (item: Permission) => item.id === permission.parentId);\r\n\t\t\tif (_root && _root.isSelected) {\r\n\t\t\t\tif (!some(_root._children, (item: Permission) => item.isSelected === true)) {\r\n\t\t\t\t\t_root.isSelected = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (permission._children.length > 0 && permission.isSelected) {\r\n\t\t\teach(permission._children, (item: Permission) => item.isSelected = true);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (permission._children.length > 0 && !permission.isSelected) {\r\n\t\t\teach(permission._children, (item: Permission) => {\r\n\t\t\t\titem.isSelected = false;\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\t/** UI */\r\n\t/**\r\n\t * Returns component title\r\n\t */\r\n\tgetTitle(): string {\r\n\t\tif (this.role && this.role.id) {\r\n\t\t\t// tslint:disable-next-line:no-string-throw\r\n\t\t\treturn `Edit role '${this.data.role.type}'`;\r\n\t\t}\r\n\r\n\t\t// tslint:disable-next-line:no-string-throw\r\n\t\treturn 'New role';\r\n\t}\r\n\r\n\t/**\r\n\t * Returns is title valid\r\n\t */\r\n\tisTitleValid(): boolean {\r\n\t\treturn (this.role && this.role.title && this.role.title.length > 0);\r\n\t}\r\n\t//selected pemission of type privilages from all permissions of logged user\r\n\tselectedPermissions() {\r\n\r\n\t\tconsole.log(this.permissionsOfloggedUser);\r\n\r\n\t\tthis.permissionsOfloggedUser.forEach(item => {\r\n\r\n\t\t\titem['_children'].forEach(child => {\r\n\t\t\t\tthis.data.role['_childern'].forEach(element => {\r\n\r\n\t\t\t\t\tif (child.value == element.title) {\r\n\t\t\t\t\t\tchild['isSelected'] = true\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t\tconsole.log(this.permissionsOfloggedUser)\r\n\t}\r\n\t//combine data of permission to send to server\r\n\tcombinepermisson() {\r\n\t\tlet permissionString = '';\r\n\t\tthis.permissionsOfloggedUser.forEach(item => {\r\n\r\n\t\t\titem['_children'].forEach(child => {\r\n\t\t\t\tif (child['isSelected']) {\r\n\t\t\t\t\tpermissionString += child['value'] + ','\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t\treturn permissionString;\r\n\t}\r\n}\r\n","module.exports = \"<kt-portlet>\\r\\n\\t<!-- PORTLET LOADING | Binded to TABLE Datasource -->\\r\\n\\t<!-- See prop => '~/core/_crud/models/data-sources/_base.datasource.ts' (loading$) -->\\r\\n\\t<kt-portlet-header [title]=\\\"'Roles list'\\\" [class]=\\\"'kt-portlet__head--lg'\\\">\\r\\n\\r\\n\\r\\n\\t</kt-portlet-header>\\r\\n\\t<!-- end::Header -->\\r\\n\\r\\n\\t<kt-portlet-body>\\r\\n\\t\\t<!-- start::FILTERS & GROUP ACTIONS -->\\r\\n\\t\\t<div class=\\\"kt-form\\\">\\r\\n\\t\\t\\t<!-- start::FILTERS -->\\r\\n\\t\\t\\t<div class=\\\"kt-form__filtration\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"row align-items-center\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"col-md-3 kt-margin-bottom-20-mobile\\\">\\r\\n\\t\\t\\t\\t\\t\\t<mat-form-field class=\\\"mat-form-field-fluid\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<input matInput placeholder=\\\"Search role\\\" #searchInput [(ngModel)]=\\\"SearchKey\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tplaceholder=\\\"Search\\\" (keyup)=\\\"applyFilter()\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<button mat-button matSuffix mat-icon-button aria-label=\\\"Clear\\\" *ngIf=\\\"SearchKey\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t(click)=\\\"onSearchClear()\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<mat-icon>close</mat-icon>\\r\\n\\t\\t\\t\\t\\t\\t\\t</button>\\r\\n\\t\\t\\t\\t\\t\\t\\t<mat-hint align=\\\"start\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<strong>Search</strong> in all fields\\r\\n\\t\\t\\t\\t\\t\\t\\t</mat-hint>\\r\\n\\t\\t\\t\\t\\t\\t</mat-form-field>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"col-md-7 kt-margin-bottom-20-mobile\\\">\\r\\n\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t\\t\\t<div class='col-md-2 kt-margin-bottom-20-mobile row text-right'>\\r\\n\\r\\n\\t\\t\\t\\t\\t<button *ngIf=\\\"checkedpermission('add')\\\" mat-raised-button color=\\\"primary\\\"\\r\\n\\t\\t\\t\\t\\t\\tmatTooltip=\\\"Create new role\\\" type=\\\"button\\\" (click)=\\\"addRole()\\\">\\r\\n\\t\\t\\t\\t\\t\\t<span>New Role</span>\\r\\n\\t\\t\\t\\t\\t</button>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t<!-- end::FILTERS -->\\r\\n\\r\\n\\t\\t<!-- start::GROUP ACTIONS -->\\r\\n\\t\\t<!-- Group actions list: 'Delete selected' | 'Fetch selected' | 'Update status for selected' -->\\r\\n\\t\\t<!-- Group actions are shared for all LISTS -->\\r\\n\\t\\t<div class=\\\"row align-items-center collapse kt-form__group-actions kt-margin-top-20 kt-margin-bottom-20\\\"\\r\\n\\t\\t\\t[ngClass]=\\\"{'show' : selection.selected.length > 0}\\\">\\r\\n\\t\\t\\t<!-- We show 'Group Actions' div if smth are selected -->\\r\\n\\t\\t\\t<div class=\\\"col-xl-12\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"kt-form__group kt-form__group--inline\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"kt-form__label kt-form__label-no-wrap\\\">\\r\\n\\t\\t\\t\\t\\t\\t<label class=\\\"kt--font-bold kt-font-danger-\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<span translate=\\\"ECOMMERCE.COMMON.SELECTED_RECORDS_COUNT\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t{{ selection.selected.length }}\\r\\n\\t\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t\\t\\t<!-- selectedCountsTitle => function from codeBehind (users-list.component.ts file) -->\\r\\n\\t\\t\\t\\t\\t\\t<!-- selectedCountsTitle => just returns title of selected items count -->\\r\\n\\t\\t\\t\\t\\t\\t<!-- for example: Selected records count: 4 -->\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"kt-form__control kt-form__group--inline\\\">\\r\\n\\t\\t\\t\\t\\t\\t<button (click)=\\\"fetchUsers()\\\" mat-raised-button matTooltip=\\\"Fetch selected users\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\tclass=\\\"mat-button-mt-4\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<mat-icon>clear_all</mat-icon>\\r\\n\\t\\t\\t\\t\\t\\t\\tFetch Selected\\r\\n\\t\\t\\t\\t\\t\\t</button>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<!-- end::GROUP ACTIONS -->\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<!-- Buttons (Material Angular) | See off.documenations 'https://material.angular.io/components/button/overview' -->\\r\\n\\t\\t<!-- mat-raised-button | Rectangular contained button w/ elevation  -->\\r\\n\\r\\n\\t\\t<!-- end::FILTERS & GROUP ACTIONS -->\\r\\n\\r\\n\\t\\t<!-- MATERIAL TABLE | Binded to datasources -->\\r\\n\\t\\t<!-- See off.documentations 'https://material.angular.io/components/table/overview' -->\\r\\n\\t\\t<div class=\\\"mat-table__wrapper\\\">\\r\\n\\t\\t\\t<mat-table class=\\\"lmat-elevation-z8\\\" #table [dataSource]=\\\"dataSource\\\" matSort #sort1=\\\"matSort\\\"\\r\\n\\t\\t\\t\\tmatSortActive=\\\"id\\\" matSortDirection=\\\"asc\\\" matSortDisableClear>\\r\\n\\t\\t\\t\\t<!-- Checkbox Column -->\\r\\n\\r\\n\\t\\t\\t\\t<!-- Table with selection -->\\r\\n\\t\\t\\t\\t<!-- https://run.stackblitz.com/api/angular/v1?file=app%2Ftable-selection-example.ts -->\\r\\n\\t\\t\\t\\t<ng-container matColumnDef=\\\"select\\\">\\r\\n\\t\\t\\t\\t\\t<mat-header-cell *matHeaderCellDef class=\\\"mat-column-checkbox\\\">\\r\\n\\t\\t\\t\\t\\t\\t<mat-checkbox (change)=\\\"$event ? masterToggle() : null\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t[checked]=\\\"selection.hasValue() && isAllSelected()\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t[indeterminate]=\\\"selection.hasValue() && !isAllSelected()\\\">\\r\\n\\t\\t\\t\\t\\t\\t</mat-checkbox>\\r\\n\\t\\t\\t\\t\\t</mat-header-cell>\\r\\n\\t\\t\\t\\t\\t<mat-cell *matCellDef=\\\"let row\\\" class=\\\"mat-column-checkbox\\\">\\r\\n\\t\\t\\t\\t\\t\\t<mat-checkbox (click)=\\\"$event.stopPropagation()\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t(change)=\\\"$event ? selection.toggle(row) : null\\\" [checked]=\\\"selection.isSelected(row)\\\">\\r\\n\\t\\t\\t\\t\\t\\t</mat-checkbox>\\r\\n\\t\\t\\t\\t\\t</mat-cell>\\r\\n\\t\\t\\t\\t</ng-container>\\r\\n\\r\\n\\t\\t\\t\\t<ng-container matColumnDef=\\\"type\\\">\\r\\n\\t\\t\\t\\t\\t<mat-header-cell *matHeaderCellDef mat-sort-header>Role Name</mat-header-cell>\\r\\n\\t\\t\\t\\t\\t<mat-cell *matCellDef=\\\"let role\\\" >{{role.type}}</mat-cell>\\r\\n\\t\\t\\t\\t</ng-container>\\r\\n\\r\\n\\t\\t\\t\\t<ng-container matColumnDef=\\\"default\\\">\\r\\n\\t\\t\\t\\t\\t<mat-header-cell *matHeaderCellDef mat-sort-header>Defalut</mat-header-cell>\\r\\n\\t\\t\\t\\t\\t<mat-cell *matCellDef=\\\"let role\\\">\\r\\n\\t\\t\\t\\t\\t\\t<span *ngIf=\\\"role.default\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\tclass=\\\"kt-badge kt-badge--inline kt-badge--pill kt-badge--metal kt-badge--wide\\\">Defalut</span>\\r\\n\\t\\t\\t\\t\\t</mat-cell>\\r\\n\\t\\t\\t\\t</ng-container>\\r\\n\\r\\n\\t\\t\\t\\t<ng-container matColumnDef=\\\"actions\\\">\\r\\n\\t\\t\\t\\t\\t<mat-header-cell *matHeaderCellDef>Actions</mat-header-cell>\\r\\n\\t\\t\\t\\t\\t<mat-cell *matCellDef=\\\"let role\\\">\\r\\n\\t\\t\\t\\t\\t\\t<button *ngIf=\\\"checkedpermission(update)\\\" mat-icon-button color=\\\"primary\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\tmatTooltip=\\\"{{ role.isCoreRole ? 'View' : 'Edit'}} role\\\" (click)=\\\"editRole(role)\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<mat-icon>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t{{ role.isCoreRole ? 'visibility' : 'create' }}\\r\\n\\t\\t\\t\\t\\t\\t\\t</mat-icon>\\r\\n\\t\\t\\t\\t\\t\\t</button>&nbsp;\\r\\n\\t\\t\\t\\t\\t\\t<button *ngIf=\\\"checkedpermission(del)\\\" mat-icon-button color=\\\"warn\\\" matTooltip=\\\"Delete role\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\ttype=\\\"button\\\" [disabled]=\\\"role.isCoreRole\\\" (click)=\\\"deleteRole(role)\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<mat-icon>delete</mat-icon>\\r\\n\\t\\t\\t\\t\\t\\t</button>\\r\\n\\t\\t\\t\\t\\t</mat-cell>\\r\\n\\t\\t\\t\\t</ng-container>\\r\\n\\t\\t\\t\\t<ng-container matColumnDef=\\\"loading\\\">\\r\\n\\t\\t\\t\\t\\t<mat-footer-cell *matFooterCellDef colspan=\\\"6\\\">\\r\\n\\t\\t\\t\\t\\t\\tLoading...\\r\\n\\t\\t\\t\\t\\t</mat-footer-cell>\\r\\n\\t\\t\\t\\t</ng-container>\\r\\n\\r\\n\\t\\t\\t\\t<mat-header-row *matHeaderRowDef=\\\"displayedColumns\\\"></mat-header-row>\\r\\n\\r\\n\\t\\t\\t\\t<mat-row *matRowDef=\\\"let row; columns: displayedColumns\\\"></mat-row>\\r\\n\\t\\t\\t\\t<mat-footer-row *matFooterRowDef=\\\"['loading']\\\" [ngClass]=\\\"{'hide':checkedDataSource()}\\\">\\r\\n\\t\\t\\t\\t</mat-footer-row>\\r\\n\\t\\t\\t</mat-table>\\r\\n\\t\\t\\t<mat-paginator (page)=\\\"nextPage($event)\\\" [pageSizeOptions]=\\\"[2,10,25,100]\\\" [pageSize]=\\\"5\\\"></mat-paginator>\\r\\n\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<!-- start: BOTTOM -->\\r\\n\\r\\n\\t\\t<!-- end: BOTTOM -->\\r\\n\\t</kt-portlet-body>\\r\\n\\t<!-- end::Body -->\\r\\n</kt-portlet>\\r\\n\"","// Angular\r\nimport { Component, OnInit, ElementRef, ViewChild, ChangeDetectionStrategy, OnDestroy ,ChangeDetectorRef} from '@angular/core';\r\n// Material\r\nimport { SelectionModel } from '@angular/cdk/collections';\r\nimport { MatPaginator, MatSort, MatSnackBar, MatDialog, MatTableDataSource } from '@angular/material';\r\n// RXJS\r\nimport { debounceTime, distinctUntilChanged, tap, skip, take, delay } from 'rxjs/operators';\r\nimport { fromEvent, merge, Observable, of, Subscription } from 'rxjs';\r\nimport { TranslateService } from '@ngx-translate/core';\r\n// NGRX\r\nimport { Store } from '@ngrx/store';\r\n// LODASH\r\nimport _ from 'lodash';\r\n// Services\r\nimport { LayoutUtilsService, MessageType } from '../../../../../core/_base/crud';\r\nimport { UserService, PermissionsService } from '../../../../../core/auth/_services'\r\n\r\n// Models\r\nimport { Role, RoleDeleted, RolesPageRequested } from '../../../../../core/auth';\r\nimport { AppState } from '../../../../../core/reducers';\r\nimport { QueryParamsModel } from '../../../../../core/_base/crud';\r\n\r\n// Components\r\nimport { RoleEditDialogComponent } from '../role-edit/role-edit.dialog.component';\r\nimport { NumberSymbol } from '@angular/common';\r\n\r\n// Table with EDIT item in MODAL\r\n// ARTICLE for table with sort/filter/paginator\r\n// https://blog.angular-university.io/angular-material-data-table/\r\n// https://v5.material.angular.io/components/table/overview\r\n// https://v5.material.angular.io/components/sort/overview\r\n// https://v5.material.angular.io/components/table/overview#sorting\r\n// https://www.youtube.com/watch?v=NSt9CI3BXv4\r\n@Component({\r\n\tselector: 'kt-roles-list',\r\n\ttemplateUrl: './roles-list.component.html',\r\n\tstyleUrls: ['../../usser.management.scss'],\r\n\tchangeDetection: ChangeDetectionStrategy.OnPush\r\n\r\n})\r\nexport class RolesListComponent implements OnInit, OnDestroy {\r\n\t// Table fields\r\n\tdataSource: MatTableDataSource<any>;\r\n\tSearchKey;\r\n\r\n\tdisplayedColumns = ['select', 'type','default', 'actions'];\r\n\t@ViewChild(MatPaginator) paginator: MatPaginator;\r\n\t//\t@ViewChild('sort1') sort: MatSort;\r\n\t// Filter fields\r\n\t@ViewChild('searchInput') searchInput: ElementRef;\r\n\t// Selection\r\n\tselection = new SelectionModel<Role>(true, []);\r\n\trolesResult: Role[] = [];\r\n\r\n\t// Subscriptions\r\n\tprivate subscriptions: Subscription[] = [];\r\n\r\n\t/**\r\n\t * Component constructor\r\n\t *\r\n\t * @param store: Store<AppState>\r\n\t * @param dialog: MatDialog\r\n\t * @param snackBar: MatSnackBar\r\n\t * @param layoutUtilsService: LayoutUtilsService\r\n\t */\r\n\tconstructor(\r\n\t\tprivate store: Store<AppState>,\r\n\t\tpublic dialog: MatDialog,\r\n\t\tpublic snackBar: MatSnackBar,\r\n\t\tprivate layoutUtilsService: LayoutUtilsService,\r\n\t\tprivate permission: PermissionsService,\r\n\t\tprivate changeDetectorRefs: ChangeDetectorRef\r\n\t) { }\r\n\r\n\t/**\r\n\t * @ Lifecycle sequences => https://angular.io/guide/lifecycle-hooks\r\n\t */\r\n\r\n\t/**\r\n\t * On init\r\n\t */\r\n\tngOnInit() {\r\n\t\t// If the user changes the sort order, reset back to the first page.\r\n\t\t//const sortSubscription = this.sort.sortChange.subscribe(() => (this.paginator.pageIndex = 0));\r\n\t\t//this.subscriptions.push(sortSubscription);\r\n\r\n\t\t/* Data load will be triggered in two cases:\r\n\t\t- when a pagination event occurs => this.paginator.page\r\n\t\t- when a sort event occurs => this.sort.sortChange\r\n\t\t**/\r\n\t\tthis.LoadPriviliages();\r\n\r\n\t\t// const paginatorSubscriptions = merge(this.sort.sortChange, this.paginator.page).pipe(\r\n\t\t// \ttap(() => {\r\n\t\t// \t\tthis.loadRolesList();\r\n\t\t// \t})\r\n\t\t// )\r\n\t\t// \t.subscribe();\r\n\t\t// this.subscriptions.push(paginatorSubscriptions);\r\n\r\n\t\t// Filtration, bind to searchInput\r\n\t\tconst searchSubscription = fromEvent(this.searchInput.nativeElement, 'keyup').pipe(\r\n\t\t\t// tslint:disable-next-line:max-line-length\r\n\t\t\t// debounceTime(150), // The user can type quite quickly in the input box, and that could trigger a lot of server requests. With this operator, we are limiting the amount of server requests emitted to a maximum of one every 150ms\r\n\t\t\t// distinctUntilChanged(), // This operator will eliminate duplicate values\r\n\t\t\t// tap(() => {\r\n\t\t\t// \tthis.paginator.pageIndex = 0;\r\n\t\t\t// \tthis.loadRolesList();\r\n\t\t\t// })\r\n\t\t)\r\n\t\t\t.subscribe();\r\n\t\tthis.subscriptions.push(searchSubscription);\r\n\r\n\t\t// Init DataSource\r\n\t\t//\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t// const entitiesSubscription = this.dataSource.entitySubject.pipe(\r\n\t\t// \tskip(1),\r\n\t\t// \tdistinctUntilChanged()\r\n\t\t// ).subscribe(res => {\r\n\t\t// \trolesResult = res;\r\n\t\t// });\r\n\t\t// this.subscriptions.push(entitiesSubscription);\r\n\r\n\t\t// First load\r\n\t\t// of(undefined).pipe(take(1), delay(1000)).subscribe(() => { // Remove this line, just loading imitation\r\n\t\t// \tthis.loadRolesList();\r\n\t\t// });\r\n\t}\r\n\r\n\t/**\r\n\t * On Destroy\r\n\t */\r\n\tngOnDestroy() {\r\n\t\tthis.subscriptions.forEach(el => el.unsubscribe());\r\n\t}\r\n\r\n\t/**\r\n\t * Load Roles List\r\n\t */\r\n\t// loadRolesList() {\r\n\t// \tthis.selection.clear();\r\n\t// \tconst queryParams = new QueryParamsModel(\r\n\t// \t\tthis.filterConfiguration(),\r\n\t// \t\tthis.sort.direction,\r\n\t// \t\tthis.sort.active,\r\n\t// \t\tthis.paginator.pageIndex,\r\n\t// \t\tthis.paginator.pageSize\r\n\t// \t);\r\n\t// \t// Call request from server\r\n\t// \tthis.store.dispatch(new RolesPageRequested({ page: queryParams }));\r\n\t// \tthis.selection.clear();\r\n\t// }\r\n\r\n\t/**\r\n\t * Returns object for filter\r\n\t */\r\n\tfilterConfiguration(): any {\r\n\t\tconst filter: any = {};\r\n\t\tconst searchText: string = this.searchInput.nativeElement.value;\r\n\t\tfilter.title = searchText;\r\n\t\treturn filter;\r\n\t}\r\n\r\n\t/** ACTIONS */\r\n\t/**\r\n\t * Delete role\r\n\t *\r\n\t * @param _item: Role\r\n\t */\r\n\tdeleteRole(_item) {\r\n\t\tconst _title: string = 'User Role';\r\n\t\tconst _description: string = 'Are you sure to permanently delete this role?';\r\n\t\tconst _waitDesciption: string = 'Role is deleting...';\r\n\t\tlet _deleteMessage = `Role has been deleted`;\r\n\t\r\n\t\t\r\n\t\t\tconst dialogRef = this.layoutUtilsService.deleteElement(_title, _description, _waitDesciption);\r\n\t\t\tdialogRef.afterClosed().subscribe(res => {\r\n\t\t\t\tif (!res) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\tthis.permission.deletePriviliages(_item.id).subscribe(res => {\r\n\t\t\t\t\t\r\n\t\t\t\tif(res['result']){\r\n\t\t\t\tthis.layoutUtilsService.showActionNotification(_deleteMessage, MessageType.Delete);\r\n\t\t\t\tthis.LoadPriviliages()\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\t_deleteMessage='Sorry, the role has not beeb deleted ,try again'\r\n\t\t\t\t\tthis.layoutUtilsService.showActionNotification(_deleteMessage, MessageType.Delete);\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t})\r\n\t\t\tthis.store.dispatch(new RoleDeleted({ id: _item.id }));\r\n\r\n\t\t\r\n\t}\r\n\r\n\t/** Fetch */\r\n\t/**\r\n\t * Fetch selected rows\r\n\t */\r\n\tfetchRoles() {\r\n\t\tconst messages = [];\r\n\t\tthis.selection.selected.forEach(elem => {\r\n\t\t\tmessages.push({\r\n\t\t\t\ttext: `${elem.title}`,\r\n\t\t\t\tid: elem.id.toString(),\r\n\t\t\t\t// status: elem.username\r\n\t\t\t});\r\n\t\t});\r\n\t\tthis.layoutUtilsService.fetchElements(messages);\r\n\t}\r\n\r\n\t/**\r\n\t * Add role\r\n\t */\r\n\taddRole() {\r\n\t\tconst role = { id: null, title: null, _childern: [], isSelected: false }\r\n\t\tthis.editRole(role);\r\n\t}\r\n\r\n\t/**\r\n\t * Edit role\r\n\t *\r\n\t * @param role: Role\r\n\t */\r\n\teditRole(role) {\r\n\t\tconst _saveMessage = `Role successfully has been saved.`;\r\n\t\tconst _messageType = role.id ? MessageType.Update : MessageType.Create;\r\n\t\tconst dialogRef = this.dialog.open(RoleEditDialogComponent, { data: { role } });\r\n\t\tdialogRef.afterClosed().subscribe(res => {\r\n\t\t\tif (!res) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.layoutUtilsService.showActionNotification(_saveMessage, _messageType, 10000, true, true);\r\n\t\t\t//this.loadRolesList();\r\n\t\t\tthis.LoadPriviliages()\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Check all rows are selected\r\n\t */\r\n\tisAllSelected(): boolean {\r\n\t\tconst numSelected = this.selection.selected.length;\r\n\t\tconst numRows = this.rolesResult.length;\r\n\t\treturn numSelected === numRows;\r\n\t}\r\n\r\n\t/**\r\n\t * Toggle selection\r\n\t */\r\n\tmasterToggle() {\r\n\t\tif (this.selection.selected.length === this.rolesResult.length) {\r\n\t\t\tthis.selection.clear();\r\n\t\t} else {\r\n\t\t\tthis.rolesResult.forEach(row => this.selection.select(row));\r\n\t\t}\r\n\t}\r\n\r\n\t//\tthis.dataSource=new MatTableDataSource(roles)\r\n\r\n\tsplitPriviliage(priviliageString) {\r\n\t\tlet priviliadgeList = []\r\n\t\tif (priviliageString) {\r\n\t\t\tlet priviliadge = priviliageString.split(',')\r\n\t\t\tpriviliadge.forEach((item) => {\r\n\t\t\t\tpriviliadgeList.push({ title: item, isSelected: false })\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn priviliadgeList;\r\n\t}\r\n\tLoadPriviliages(pages = null, prepages = null, searchkey = null) {\r\n\t\tlet roles = []\r\n\t\tthis.permission.getPriviliedgesType(pages, prepages, searchkey).subscribe(res => {\r\n\t\t\tconsole.log(res)\r\n\t\t\tres['result'].forEach(item => {\r\n\t\t\t\t\troles.push({ id: item._id, type: item.type,default:item.default, _childern: this.splitPriviliage(item['privilidge']), isSelected: false })\t\r\n\t\t\t})\r\n\t\t\tthis.dataSource=new MatTableDataSource(roles)\r\n\t\t\tthis.changeDetectorRefs.detectChanges();\r\n\t\t})\r\n\r\n\t}\r\n\tapplyFilter() {\r\n\t\tconsole.log(this.SearchKey)\r\n\t\t//this.listData.filter=this.SearchKey.trim().toLowerCase()\r\n\t\tthis.LoadPriviliages(null, null, this.searchInput.nativeElement.value)\r\n\t}\r\n\tonSearchClear() {\r\n\t\tthis.searchInput.nativeElement.value = ''\r\n\t\tthis.applyFilter()\r\n\t}\r\n\tnextPage(event) {\r\n\t\tconsole.log(event)\r\n\t\tthis.LoadPriviliages(event.pageIndex + 1, event.pageSize, null)\r\n\t}\r\n\t//check if dataSource has datasource\r\n\tcheckedDataSource() {\r\n\t\tif (this.dataSource) {\r\n\t\t\tif (this.dataSource.data) {\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\t\t\telse return false\r\n\t\t}\r\n\t\telse return false\r\n\t}\r\n\tcheckedpermission(key)\r\n\t{\r\n\t\tif( localStorage.getItem('user'))\r\n\t\t{\r\n\r\n\t\t\tif(JSON.parse(localStorage.getItem('user'))['allPrivilidge'])\r\n\t\t\t{\r\n\t\t\t\tif(JSON.parse(localStorage.getItem('user'))['allPrivilidge']['Roles'])\r\n\t\t\t\t{\r\n\t\t\t\tconsole.log('user')\r\n\t\t\t\tif(key=='del')\r\n\t\t\t\t{\r\n\t\t\t\t\tconsole.log('del')\r\n\t\t\t  if(JSON.parse(localStorage.getItem('user'))['allPrivilidge']['Roles']['Edit Roles'])\r\n\t\t\t  return true\r\n\t\t\t\t}\r\n\t\t\t\telse if(key=='update')\r\n\t\t\t\t{\r\n\t\t\t\t\tconsole.log('up')\r\n\t\t\t\t\tif( JSON.parse(localStorage.getItem('user'))['allPrivilidge']['Roles']['Delete Roles'])\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t\telse if(key='add')\r\n\t\t\t\t{\r\n\t\t\t\t\tconsole.log('add')\r\n            // if( JSON.parse(localStorage.getItem('user'))['allPrivilidge']['Roles']['Add Roles'])\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false\r\n\t}\r\n\tfetchUsers(){\r\n\t\t\r\n\t}\r\n}\r\n","module.exports = \" <!-- <div *ngIf=\\\"hasUserAccess$ | async\\\">\\r\\n    <router-outlet></router-outlet>\\r\\n</div> -->\\r\\n<div>\\r\\n    <router-outlet></router-outlet>\\r\\n</div>\\r\\n\"","// Angular\r\nimport { Component, ChangeDetectionStrategy, OnInit, OnDestroy } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\n// RxJS\r\nimport { Observable } from 'rxjs';\r\n// NGRX\r\nimport { Store, select } from '@ngrx/store';\r\n// AppState\r\nimport { AppState } from '../../../core/reducers';\r\n// Auth\r\nimport { Permission } from '../../../core/auth';\r\n\r\nconst userManagementPermissionId: number = 2;\r\n@Component({\r\n\tselector: 'kt-user-management',\r\n\ttemplateUrl: './user-management.component.html',\r\n\tchangeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class UserManagementComponent implements OnInit {\r\n\t// Public properties\r\n\t// hasUserAccess$: Observable<boolean>;\r\n\tcurrentUserPermission$: Observable<Permission[]>;\r\n\r\n\t/**\r\n\t * Component constructor\r\n\t *\r\n\t * @param store: Store<AppState>\r\n\t * @param router: Router\r\n\t */\r\n\tconstructor(private store: Store<AppState>, private router: Router) {\r\n\t}\r\n\r\n\t/**\r\n\t * @ Lifecycle sequences => https://angular.io/guide/lifecycle-hooks\r\n\t */\r\n\r\n\t/**\r\n\t * On init\r\n\t */\r\n\tngOnInit() {\r\n\t\t// this.currentUserPermission$ = this.store.pipe(select(currentUserPermissions));\r\n\t\t// this.currentUserPermission$.subscribe(permissions => {\r\n\t\t// \tif (permissions && permissions.length > 0) {\r\n\t\t// \t\tthis.hasUserAccess$ =\r\n\t\t// \t\t\tthis.store.pipe(select(checkHasUserPermission(userManagementPermissionId)));\r\n\t\t// \t\tthis.hasUserAccess$.subscribe(res => {\r\n\t\t// \t\t\tif (!res) {\r\n\t\t// \t\t\t\tthis.router.navigateByUrl('/error/403');\r\n\t\t// \t\t\t}\r\n\t\t// \t\t});\r\n\t\t// \t}\r\n\t\t// });\r\n\t}\r\n}\r\n","// Angular\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { CustomFormsModule } from 'ng2-validation';\r\nimport { HttpClientModule, HTTP_INTERCEPTORS } from '@angular/common/http';\r\n// NGRX\r\nimport { StoreModule } from '@ngrx/store';\r\nimport { EffectsModule } from '@ngrx/effects';\r\n// Translate\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { PartialsModule } from '../../partials/partials.module';\r\n// Services\r\nimport { HttpUtilsService, TypesUtilsService, InterceptService, LayoutUtilsService } from '../../../core/_base/crud';\r\n// Shared\r\nimport { ActionNotificationComponent } from '../../partials/content/crud';\r\nimport { CodePreviewModule } from '../../partials/content/general/code-preview/code-preview.module';\r\nimport { MaterialPreviewModule } from '../../partials/content/general/material-preview/material-preview.module';\r\n// Components\r\nimport { UserManagementComponent } from './user-management.component';\r\nimport { UsersListComponent } from './users/users-list/users-list.component';\r\nimport { UserEditComponent } from './users/user-edit/user-edit.component';\r\nimport { RolesListComponent } from './roles/roles-list/roles-list.component';\r\nimport { InvitationComponent } from './invitations/invitations.component';\r\nimport { ShiftsComponent } from './users/_subs/shifts/shifts.component';\r\nimport { RoleEditDialogComponent } from './roles/role-edit/role-edit.dialog.component';\r\nimport { InvitationsEditDialogComponent } from './invitations/invitations-edit/invitations-edit.dialog.component';\r\nimport { ShiftEditDialogComponent } from './users/_subs/shifts/shifts-edit/shifts-edit.dialog.component';\r\nimport { ClubTreeComponent } from './club_tree/club_tree.component';\r\nimport { UserRolesListComponent } from './users/_subs/user-roles/user-roles-list.component';\r\nimport { ChangePasswordComponent } from './users/_subs/change-password/change-password.component';\r\nimport { AddressComponent } from './users/_subs/address/address.component';\r\nimport {AccessRightComponent} from './users/_subs/accessRight/accessRight.component'\r\nimport { SocialNetworksComponent } from './users/_subs/social-networks/social-networks.component';\r\nimport { ClubTreeDataComponent } from './club_tree/_sub/_DataShow/club_tree_data'\r\n//guard\r\nimport { PermissionGuard } from '../../../core/auth/_guards/permission.guard'\r\n// Material\r\nimport {\r\n\tMatListModule,\r\n    \r\n\tMatInputModule,\r\n\tMatPaginatorModule,\r\n\tMatProgressSpinnerModule,\r\n\tMatSortModule,\r\n\tMatTableModule,\r\n\tMatSelectModule,\r\n\tMatMenuModule,\r\n\tMatProgressBarModule,\r\n\tMatButtonModule,\r\n\tMatCheckboxModule,\r\n\tMatDialogModule,\r\n\tMatTabsModule,\r\n\tMatNativeDateModule,\r\n\tMatCardModule,\r\n\tMatRadioModule,\r\n\tMatIconModule,\r\n\tMatDatepickerModule,\r\n\tMatExpansionModule,\r\n\tMatTreeModule,\r\n\tMatAutocompleteModule,\r\n\tMAT_DIALOG_DEFAULT_OPTIONS,\r\n\tMatSnackBarModule,\r\n\tMatTooltipModule\r\n} from '@angular/material';\r\nimport {\r\n\tusersReducer,\r\n\tUserEffects\r\n} from '../../../core/auth';\r\nimport { UpdateMessageComponent } from './users/update-message/update-message.component';\r\n\r\n\r\n\r\nconst routes: Routes = [\r\n\t{\r\n\t\tpath: '',\r\n\t\tcomponent: UserManagementComponent,\r\n\t\tchildren: [\r\n\t\t\t{\r\n\t\t\t\tpath: '',\r\n\t\t\t\tredirectTo: 'roles',\r\n\t\t\t\tpathMatch: 'full',\r\n\t\t\t\tdata: { title: 'roles' },\r\n\r\n\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tpath: 'roles',\r\n\t\t\t\tcomponent: RolesListComponent,\r\n\t\t\t\tdata: { title: 'roles' },\r\n\t\t\t\tcanActivate: [PermissionGuard]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tpath: 'invitations',\r\n\t\t\t\tcomponent: InvitationComponent,\r\n\t\t\t\tdata: { title: 'invitations' },\r\n\t\t\t\tcanActivate: [PermissionGuard]\r\n\t\t\t}\r\n\t\t\t,\r\n\t\t\t{\r\n\t\t\t\tpath: 'invitation',\r\n\t\t\t\tcomponent: InvitationComponent,\r\n\t\t\t\tdata: { title: 'invitations' },\r\n\t\t\t\tcanActivate: [PermissionGuard]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tpath: 'shifts',\r\n\t\t\t\tcomponent: ShiftsComponent,\r\n\t\t\t\tdata: { title: 'shifts' },\r\n\t\t\t\tcanActivate: [PermissionGuard]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tpath: 'clubtree',\r\n\t\t\t\tcomponent: ClubTreeComponent,\r\n\t\t\t\tdata: { title: 'clubtree' },\r\n\t\t\t\tcanActivate: [PermissionGuard]\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t{\r\n\t\t\t\tpath: 'clubtrees',\r\n\t\t\t\tcomponent: ClubTreeComponent,\r\n\t\t\t\tdata: { title: 'clubtree' },\r\n\t\t\t\tcanActivate: [PermissionGuard]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tpath: 'users',\r\n\t\t\t\tcomponent: UsersListComponent\r\n\t\t\t\t, data: { title: 'users' },\r\n\t\t\t\tcanActivate: [PermissionGuard]\r\n\t\t\t}, {\r\n\t\t\t\tpath: 'user',\r\n\t\t\t\tcomponent: UsersListComponent\r\n\t\t\t\t, data: { title: 'users' },\r\n\t\t\t\tcanActivate: [PermissionGuard]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tpath: 'users/:id',\r\n\t\t\t\tcomponent: UsersListComponent\r\n\t\t\t\t, data: { title: 'users' },\r\n\t\t\t\tcanActivate: [PermissionGuard]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tpath: 'users/add',\r\n\t\t\t\tcomponent: UserEditComponent,\r\n\t\t\t\tdata: { title: 'clubtree' },\r\n\t\t\t\tcanActivate: [PermissionGuard]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tpath: 'users/add:id',\r\n\t\t\t\tcomponent: UserEditComponent\r\n\t\t\t\t, data: { title: 'addUser' },\r\n\t\t\t\tcanActivate: [PermissionGuard]\r\n\t\t\t},\r\n\t\t\t{\r\n\r\n\t\t\t\tpath: 'users/edit',\r\n\t\t\t\tcomponent: UserEditComponent\r\n\t\t\t\t, data: { title: 'editUser' },\r\n\t\t\t\tcanActivate: [PermissionGuard]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tpath: 'users/edit/:id',\r\n\t\t\t\tcomponent: UserEditComponent\r\n\t\t\t\t, data: { title: 'editUser' },\r\n\t\t\t\t canActivate:[PermissionGuard]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tpath: 'users/:id/edit/:id',\r\n\t\t\t\tcomponent: UserEditComponent\r\n\t\t\t\t, data: { title: 'editUser' },\r\n\t\t\t\t canActivate:[PermissionGuard]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tpath: 'users/:id/edits/:id',\r\n\t\t\t\tcomponent: UserEditComponent\r\n\t\t\t\t, data: { title: 'editUser' },\r\n\t\t\t\tcanActivate:[PermissionGuard]\r\n\t\t\t},\r\n\t\t]\r\n\t}\r\n];\r\n\r\n@NgModule({\r\n\timports: [\r\n\t\tCommonModule,\r\n\t\tCustomFormsModule,\r\n\t\tHttpClientModule,\r\n\t\tPartialsModule,\r\n\t\tRouterModule.forChild(routes),\r\n\t\tStoreModule.forFeature('users', usersReducer),\r\n\t\tEffectsModule.forFeature([UserEffects]),\r\n\t\tFormsModule,\r\n\t\tReactiveFormsModule,\r\n\t\tTranslateModule.forChild(),\r\n\t\tMatButtonModule,\r\n\t\tMatMenuModule,\r\n\t\tMatSelectModule,\r\n\t\tMatInputModule,\r\n\t\tMatTableModule,\r\n\t\tMatAutocompleteModule,\r\n\t\tMatRadioModule,\r\n\t\tMatIconModule,\r\n\t\tMatNativeDateModule,\r\n\t\tMatProgressBarModule,\r\n\t\tMatDatepickerModule,\r\n\t\tMatCardModule,\r\n\t\tMatPaginatorModule,\r\n\t\tMatSortModule,\r\n\t\tMatCheckboxModule,\r\n\t\tMatProgressSpinnerModule,\r\n\t\tMatSnackBarModule,\r\n\t\tMatExpansionModule,\r\n\t\tMatTabsModule,\r\n\t\tMatTooltipModule,\r\n\t\tMatDialogModule,\r\n\t\tMatListModule,\r\n\t\tCodePreviewModule,\r\n\t\tMaterialPreviewModule,\r\n\t\tMatTreeModule,\r\n\t\t\r\n\t],\r\n\tproviders: [\r\n\t\tInterceptService,\r\n\t\t{\r\n\t\t\tprovide: HTTP_INTERCEPTORS,\r\n\t\t\tuseClass: InterceptService,\r\n\t\t\tmulti: true\r\n\t\t},\r\n\t\t{\r\n\t\t\tprovide: MAT_DIALOG_DEFAULT_OPTIONS,\r\n\t\t\tuseValue: {\r\n\t\t\t\thasBackdrop: true,\r\n\t\t\t\tpanelClass: 'kt-mat-dialog-container__wrapper',\r\n\t\t\t\theight: 'auto',\r\n\t\t\t\twidth: '900px'\r\n\t\t\t}\r\n\t\t},\r\n\t\tHttpUtilsService,\r\n\t\tTypesUtilsService,\r\n\t\tLayoutUtilsService,\r\n\t\tPermissionGuard\r\n\t],\r\n\tentryComponents: [\r\n\t\tActionNotificationComponent,\r\n\t\tRoleEditDialogComponent,\r\n\t\tInvitationsEditDialogComponent,\r\n\t\tShiftEditDialogComponent,\r\n\t\tClubTreeComponent,\r\n\t\tClubTreeDataComponent,\r\n\t\tUpdateMessageComponent\r\n\t\t\r\n\t],\r\n\tdeclarations: [\r\n\t\tUserManagementComponent,\r\n\t\tAccessRightComponent,\r\n\t\tUsersListComponent,\r\n\t\tUserEditComponent,\r\n\t\tRolesListComponent,\r\n\t\tInvitationComponent,\r\n\t\tClubTreeComponent,\r\n\t\tRoleEditDialogComponent,\r\n\t\tUserRolesListComponent,\r\n\t\tChangePasswordComponent,\r\n\t\tAddressComponent,\r\n\t\tSocialNetworksComponent,\r\n\t\tInvitationsEditDialogComponent,\r\n\t\tShiftEditDialogComponent,\r\n\t\tShiftsComponent,\r\n\t\tClubTreeComponent,\r\n\t\tClubTreeDataComponent,\r\n\t\tUpdateMessageComponent,\r\n\t\t\r\n\r\n\t]\r\n}\r\n)\r\nexport class UserManagementModule { }\r\n","module.exports = \"\"","// Angular\r\nimport { Component, OnInit, Inject, ChangeDetectionStrategy, OnDestroy,ChangeDetectorRef } from '@angular/core';\r\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material';\r\n// Lodash\r\nimport { Router } from '@angular/router';\r\nimport * as _lodash from 'lodash';\r\n// RxJS\r\nimport { Observable, of, Subscription } from 'rxjs';\r\n// Lodash\r\nimport { each, find, some } from 'lodash';\r\n// NGRX\r\nimport { Update } from '@ngrx/entity';\r\nimport { Store, select } from '@ngrx/store';\r\n// State\r\nimport { AppState } from '../../../../../../core/reducers';\r\nimport { LayoutUtilsService, MessageType, QueryParamsModel } from '../../../../../../core/_base/crud';\r\n\r\nimport { delay } from 'rxjs/operators';\r\nimport { Invitation } from '../../../invitations/invitations-edit/invitations.model';\r\n\r\nimport { UserService } from '../../../../../../core/auth/_services';\r\n@Component({\r\n\tselector: 'kt-accessRight',\r\n\ttemplateUrl: './accessRight.component.html',\r\n\t//styleUrls: ['../../usser.management.scss'],\r\n\tchangeDetection: ChangeDetectionStrategy.Default,\r\n})\r\nexport class AccessRightComponent implements OnInit, OnDestroy {\r\n\t// Public properties\r\n\tinvitation: Invitation;\r\n\tinvitation$: Observable<Invitation>;\r\n\thasFormErrors: boolean = false;\r\n\terrormessage: string = '';\r\n\tviewLoading: boolean = false;\r\n\tloadingAfterSubmit: boolean = false;\r\n\tallbrancandunits=[];\r\n\tchecked = false\r\n\tcurrent_club_login= (JSON.parse(localStorage.getItem('user')))['current_club_login'];\r\n\t//basicChoose=[{,checked:false}]\r\n\t// Private properties\r\n\tprivate componentSubscriptions: Subscription;\r\n\r\n\t/**\r\n\t * Component constructor\r\n\t *\r\n\t * @param dialogRef: MatDialogRef<InvitationsEditDialogComponent>\r\n\t * @param data: any\r\n\t * @param store: Store<AppState>\r\n\t */\r\n\tconstructor(\r\n\t\t@Inject(MAT_DIALOG_DATA) public data: any,\r\n\t\tprivate ChangeDetectorRef:ChangeDetectorRef,\r\n\t\tprivate store: Store<AppState>, private ser: UserService, private router: Router,\r\n\t\tprivate layoutUtilsService: LayoutUtilsService) { \r\n\t\t\tthis.allbrancandunits.push({name:'mainclub','pub_key':this.current_club_login,'checked':false,'unit':[]})\r\n\t\t}\r\n\r\n\t/**\r\n\t * @ Lifecycle sequences => https://angular.io/guide/lifecycle-hooks\r\n\t */\r\n\t//getallusers\r\n\t/**\r\n\t * On init\r\n\t */\r\n\tngOnInit() {\r\n\t\tconst newInviation = new Invitation();\r\n\t\tthis.invitation$ = of(newInviation);\r\n\t\tthis.invitation$.subscribe(res => {\r\n\t\t\tif (!res) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.invitation = res;\r\n\t\t});\r\n\t\tif (this.checkedpermission('getallusers')) {\r\n\t\t\tthis.ser.getAllBrachsAndUnits(1, 10000).subscribe(\r\n\t\t\t\tres => {\r\n\t\t\t\t\tif (res['result']) {\r\n\t\t\t\t\t\tlet branchs=[]\r\n\t\t\t\t\t\tres['data'].forEach(element => {\r\n\t\t\t\t\t\t\tif(element.type=='branch')\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tbranchs.push(element)\r\n\t\t\t\t\t\t\tlet units=[]\r\n\t\t\t\t\t\t\t\tres['data'].forEach((elem,index) => {\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tif(elem.branch_key==element.pub_key){\r\n\t\t\t\t\t\t\t\t\tunits.push(elem)\r\n\t\t\t\t\t\t\t\t\tdelete\tres['data'][index]\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\telement['unit']=units\r\n\t\t\t\t\t\t\t\tthis.allbrancandunits.push(element)\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telement['checked'] = false\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t//this.allbrancandunits = res['data'];\r\n\t\t\t\t\t\tconsole.log(this.allbrancandunits)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.checked = true\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * On destroy\r\n\t */\r\n\tngOnDestroy() {\r\n\t\tif (this.componentSubscriptions) {\r\n\t\t\tthis.componentSubscriptions.unsubscribe();\r\n\t\t}\r\n\t}\r\n\r\n\t\r\n\r\n\t/**\r\n\t * Save data\r\n\t */\r\n\tonSubmit() {\r\n\t\tthis.loadingAfterSubmit = true;\r\n\t\tthis.viewLoading = true;\r\n\t\tlet invitationKey=[]\r\n\tthis.allbrancandunits.forEach(element=>{\r\n\t\tif(element.checked==true){\r\n\t\t\tinvitationKey.push(element.pub_key)\r\n\r\n\t\t}\r\n\t\telement.unit.forEach(elem => {\r\n\t\t\tif(elem.checked==true)\r\n\t\t\tinvitationKey.push(elem.pub_key)\r\n\t\t});\r\n\t})\r\nconsole.log(invitationKey)\r\n\t\tif (this.checkedpermission('sendinvitations')) {\r\n\t\t\tthis.ser.sendInvitations({ email: this.invitation.email, user_type: this.invitation.user_type, invitation_key:invitationKey,club_key:this.current_club_login}).subscribe(\r\n\t\t\t\tres => {\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\tif (res['result']) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (this.router.url == '/default/user-management/invitations')\r\n\t\t\t\t\t\t\tthis.router.navigateByUrl(\"/default/user-management/invitation\");\r\n\t\t\t\t\t\telse this.router.navigateByUrl(\"/default/user-management/invitations\");\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.layoutUtilsService.showActionNotification(res['data'], MessageType.Update);\r\n\t\t\t\t\t\t}, 1000)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.loadingAfterSubmit = false;\r\n\t\t\t\t\t\tthis.viewLoading = false;\r\n\t\t\t\t\t\tthis.hasFormErrors = true;\r\n\t\t\t\t\t\tthis.errormessage = res['data'];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.checked = true\r\n\t\t}\r\n\r\n\t}\r\n\t//to check assign club,branch,unit to invitation \r\n\tonChange(place) {\r\n\tconsole.log(place)\r\n\tif(place.name=='mainclub'&&place.checked==true){\r\n\t//\tconsole.log(place)\r\n\t\tfor (let index = 0; index < this.allbrancandunits.length; index++) {\r\n\t\t\tthis.allbrancandunits[index]['checked']=true\r\n\t\t\tfor (let i = 0; i < this.allbrancandunits[index].unit.length; i++) {\r\n\t\t\t\tthis.allbrancandunits[index].unit[i]['checked']=true\r\n\t\t\t}\r\n\t\t\tthis.ChangeDetectorRef.detectChanges()\t\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\tif(place.name=='mainclub'&&place.checked==false){\r\n\t\tconsole.log(place)\r\n\t\tfor (let index = 0; index < this.allbrancandunits.length; index++) {\r\n\t\t\tthis.allbrancandunits[index]['checked']=false\t\r\n\t\t\tfor (let i = 0; i < this.allbrancandunits[index].unit.length; i++) {\r\n\t\t\t\tthis.allbrancandunits[index].unit[i]['checked']=false\r\n\t\t\t}\r\n\t\t\tthis.ChangeDetectorRef.detectChanges()\t\r\n\t\t}\r\n\t}\r\n\tif(place.type=='branch'&&place.checked==true){\r\n\t\tconsole.log(place)\r\n\t\tfor (let index = 0; index < place.unit.length; index++) {\r\n\t\t\tplace.unit[index]['checked']=true\r\n\t\t\tthis.ChangeDetectorRef.detectChanges()\t\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\tif(place.type=='branch'&&place.checked==false){\r\n\t\tconsole.log(place)\r\n\t\tfor (let index = 0; index < place.unit.length; index++) {\r\n\t\t\tplace.unit[index]['checked']=false\t\r\n\t\t\tthis.ChangeDetectorRef.detectChanges()\t\r\n\t\t}\r\n\t}\r\n\t\r\n\t}\r\n\r\n\tcheckedpermission(key: String) {\r\n\t\tlet checked = false\r\n\t\tif (localStorage.getItem('user')) {\r\n\r\n\t\t\tif (JSON.parse(localStorage.getItem('user'))) {\r\n\t\t\t\tlet user = JSON.parse(localStorage.getItem('user'))\r\n\r\n\t\t\t\tif (user['allPrivilidge']) {\r\n\t\t\t\t\tconst privilidge = user['allPrivilidge']\r\n\r\n\t\t\t\t\tObject.keys(privilidge).forEach(role => {\r\n\t\t\t\t\t\tObject.keys(privilidge[role]).forEach(pri => {\r\n\r\n\t\t\t\t\t\t\tlet per = (privilidge[role][pri].toString()).trim()\r\n\t\t\t\t\t\t\tif (key.trim() == per) {\r\n\t\t\t\t\t\t\t\tchecked = true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn checked\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t/**\r\n\t * Close alert\r\n\t *\r\n\t * @param $event: Event\r\n\t */\r\n\tonAlertClose($event) {\r\n\t\tthis.hasFormErrors = false;\r\n\t}\r\n\r\n\r\n\t/** UI */\r\n\t/**\r\n\t * Returns component title\r\n\t */\r\n\tgetTitle(): string {\r\n\t\treturn 'New Invitation';\r\n\t}\r\n\r\n\tisTitleValid(): boolean {\r\n\t\treturn true;\r\n\t}\r\n\r\n\r\n}\r\n","module.exports = \"<!--begin::Form-->\\r\\n<form [formGroup]=\\\"addressForm\\\" class=\\\"kt-form kt-form--group-seperator-dashed\\\">\\r\\n\\r\\n\\t<kt-alert *ngIf=\\\"hasFormErrors\\\" type=\\\"warn\\\" [showCloseButton]=\\\"true\\\" [duration]=\\\"10000\\\" (close)=\\\"onAlertClose($event)\\\">\\r\\n\\t\\tOh snap! Check the form fields please\\r\\n\\t</kt-alert>\\r\\n\\t<div class=\\\"kt-form__section kt-form__section--first\\\">\\r\\n\\t\\t<div class=\\\"form-group kt-form__group row\\\">\\r\\n\\t\\t\\t<div class=\\\"col-lg-4 kt-margin-bottom-20-mobile\\\">\\r\\n\\t\\t\\t\\t<mat-form-field class=\\\"mat-form-field-fluid\\\">\\r\\n\\t\\t\\t\\t\\t<input matInput placeholder=\\\"Enter Address Line\\\" formControlName=\\\"addressLine\\\" />\\r\\n\\t\\t\\t\\t\\t<mat-error *ngIf=\\\"addressForm.controls['addressLine'].errors?.required\\\">Address Line is\\r\\n\\t\\t\\t\\t\\t\\t<strong>required</strong>\\r\\n\\t\\t\\t\\t\\t</mat-error>\\r\\n\\t\\t\\t\\t\\t<mat-error *ngIf=\\\"addressForm.controls['addressLine'].errors?.pattern\\\">Please enter\\r\\n\\t\\t\\t\\t\\t\\t<strong>valid addressLine</strong>\\r\\n\\t\\t\\t\\t\\t</mat-error>\\r\\n\\t\\t\\t\\t\\t<mat-hint align=\\\"start\\\">Please enter\\r\\n\\t\\t\\t\\t\\t\\t<strong>Address Line</strong>\\r\\n\\t\\t\\t\\t\\t</mat-hint>\\r\\n\\t\\t\\t\\t</mat-form-field>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"col-lg-4 kt-margin-bottom-20-mobile\\\">\\r\\n\\t\\t\\t\\t<mat-form-field class=\\\"mat-form-field-fluid\\\">\\r\\n\\t\\t\\t\\t\\t<input matInput placeholder=\\\"City\\\" formControlName=\\\"city\\\" />\\r\\n\\t\\t\\t\\t\\t<mat-error *ngIf=\\\"addressForm.controls['city'].invalid&&addressForm.controls['city'].errors?.required\\\">City is\\r\\n\\t\\t\\t\\t\\t\\t<strong>required</strong>\\r\\n\\t\\t\\t\\t\\t</mat-error>\\r\\n\\t\\t\\t\\t\\t<mat-error *ngIf=\\\"addressForm.controls['city'].invalid&&addressForm.controls['city'].errors.pattern\\\">Please enter\\r\\n\\t\\t\\t\\t\\t\\t<strong>valid city</strong>\\r\\n\\t\\t\\t\\t\\t</mat-error>\\r\\n\\t\\t\\t\\t\\t<mat-hint align=\\\"start\\\">Please enter\\r\\n\\t\\t\\t\\t\\t\\t<strong>City</strong>\\r\\n\\t\\t\\t\\t\\t</mat-hint>\\r\\n\\t\\t\\t\\t</mat-form-field>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"form-group kt-form__group row\\\">\\r\\n\\t\\t\\t<div class=\\\"col-lg-4 kt-margin-bottom-20-mobile\\\">\\r\\n\\t\\t\\t\\t<mat-form-field class=\\\"mat-form-field-fluid\\\">\\r\\n\\t\\t\\t\\t\\t<input matInput placeholder=\\\"Enter State Line\\\" formControlName=\\\"state\\\" />\\r\\n\\t\\t\\t\\t\\t<mat-error *ngIf=\\\"addressForm.controls['state'].errors?.required\\\">State is\\r\\n\\t\\t\\t\\t\\t\\t<strong>required</strong>\\r\\n\\t\\t\\t\\t\\t</mat-error>\\r\\n\\t\\t\\t\\t\\t<mat-error *ngIf=\\\"addressForm.controls['state'].errors?.pattern\\\">Please enter\\r\\n\\t\\t\\t\\t\\t\\t<strong>valid state</strong>\\r\\n\\t\\t\\t\\t\\t</mat-error>\\r\\n\\t\\t\\t\\t\\t<mat-hint align=\\\"start\\\">Please enter\\r\\n\\t\\t\\t\\t\\t\\t<strong>State</strong>\\r\\n\\t\\t\\t\\t\\t</mat-hint>\\r\\n\\t\\t\\t\\t</mat-form-field>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"col-lg-4 kt-margin-bottom-20-mobile\\\">\\r\\n\\t\\t\\t\\t<mat-form-field class=\\\"mat-form-field-fluid\\\">\\r\\n\\t\\t\\t\\t\\t<input matInput placeholder=\\\"Enter Postode\\\" formControlName=\\\"postCode\\\" />\\r\\n\\t\\t\\t\\t\\t<mat-error *ngIf=\\\"addressForm.controls['postCode'].errors?.required\\\">PostCode is\\r\\n\\t\\t\\t\\t\\t\\t<strong>required</strong>\\r\\n\\t\\t\\t\\t\\t</mat-error>\\r\\n\\t\\t\\t\\t\\t<mat-error *ngIf=\\\"addressForm.controls['postCode'].errors?.pattern||addressForm.controls['postCode'].errors?.minlength||addressForm.controls['postCode'].errors?.maxlenght\\\">Please enter\\r\\n\\t\\t\\t\\t\\t\\t<strong>valid postCode</strong>\\r\\n\\t\\t\\t\\t\\t</mat-error>\\r\\n\\t\\t\\t\\t\\t<mat-hint align=\\\"start\\\">Please enter\\r\\n\\t\\t\\t\\t\\t\\t<strong>Postcode</strong>\\r\\n\\t\\t\\t\\t\\t</mat-hint>\\r\\n\\t\\t\\t\\t</mat-form-field>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</form>\\r\\n<!--end::Form-->\\r\\n\"","// Angular\r\nimport { Component, OnInit, ChangeDetectionStrategy, Input } from '@angular/core';\r\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\r\n// RxJS\r\nimport { BehaviorSubject, fromEvent } from 'rxjs';\r\n// NGRX\r\nimport { Store } from '@ngrx/store';\r\nimport { debounceTime, distinctUntilChanged, tap } from 'rxjs/operators';\r\n// Auth\r\nimport { Address } from '../../../../../../core/auth';\r\nimport { AuthService} from '../../../../../../core/auth/_services/auth.service'\r\n// State\r\nimport { AppState } from '../../../../../../core/reducers';\r\n// Layout\r\nimport { LayoutUtilsService } from '../../../../../../core/_base/crud';\r\n//userService\r\nimport {UserService} from '../../../../../../core/auth/_services/-user.service';\r\nimport { CdkObserveContent } from '@angular/cdk/observers';\r\nimport {Router} from '@angular/router'\r\n@Component({\r\n\tselector: 'kt-address',\r\n\ttemplateUrl: './address.component.html',\r\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class AddressComponent implements OnInit {\r\n\t// Public properties\r\n\t// Incoming data\r\n\t@Input() addressSubject: BehaviorSubject<Address>;\r\n\t@Input()  AdressErrorMessage:BehaviorSubject<string>;\r\n\terrormessage\r\n\thasFormErrors: boolean = false;\r\n\taddressForm: FormGroup;\r\n    address={}\r\n\t/**\r\n\t * Component Costructor \r\n\t *\r\n\t * @param fb: FormBuilder\r\n\t * @param auth: AuthService\r\n\t * @param store: Store<AppState>\r\n\t * @param layoutUtilsService: LayoutUtilsService\r\n\t */\r\n\tconstructor(private fb: FormBuilder,\r\n\t\tprivate auth: AuthService,\r\n\t\tprivate store: Store<AppState>,\r\n\t\tprivate layoutUtilsService: LayoutUtilsService,\r\n\t\tprivate userservice:UserService) {}\r\n\r\n\t/**\r\n\t * @ Lifecycle sequences => https://angular.io/guide/lifecycle-hooks\r\n\t */\r\n\r\n\t/**\r\n\t * On init\r\n\t */\r\n\tngOnInit() {\r\n\t\t\r\n\r\n\t\tthis.userservice.currentUser.subscribe(res=>{\r\n\t\t\tif(res)\r\n\t\t\t{\r\n\t\t\tthis.address['addressline']=res['addressline']\r\n\t\t\tthis.address['city']=res['city']\r\n\t\t\tthis.address['state']=res['state']\r\n\t\t\tthis.address['postCode']=res['postCode']\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\tthis.address['addressline']=''\r\n\t\t\tthis.address['city']=''\r\n\t\t\tthis.address['state']=''\r\n\t\t\tthis.address['postCode']='' \r\n\t\t\t}\r\n\t\t})\r\n\t\t\r\n\r\n\t\r\n\r\n\t\tthis.createForm();\r\n\t\tconsole.log(this.addressForm)\r\n\t\tthis.addressForm.valueChanges\r\n\t\t\t.pipe(\r\n\t\t\t\t// tslint:disable-next-line:max-line-length\r\n\t\t\t\tdebounceTime(150), // The user can type quite quickly in the input box, and that could trigger a lot of server requests. With this operator, we are limiting the amount of server requests emitted to a maximum of one every 150ms\r\n\t\t\t\tdistinctUntilChanged(), // This operator will eliminate duplicate values\r\n\t\t\t\ttap(() => {\r\n\t\t\t\t\tthis.updateAddress();\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t\t.subscribe();\r\n\t}\r\n\r\n\t/**\r\n\t * Init form\r\n\t */\r\n\tcreateForm() { \r\n\t\tthis.userservice.currentUser.subscribe(res=>{\r\n\t\tthis.addressForm = this.fb.group({\r\n\t\t\taddressLine: [res['addressLine'], [Validators.required,Validators.pattern(/^[a-zA-Z0-9-, ]*$/)]],\r\n\t\t\tcity: [res['city'], [Validators.required,Validators.pattern(/^[a-zA-Z ]*$/)]],\r\n\t\t\tstate: [res['state'], [Validators.required,Validators.pattern(/^[a-zA-Z ]*$/)]],\r\n\t\t\tpostCode: [res['postCode'], [Validators.required,Validators.pattern(/^[0-9]*$/),Validators.maxLength(5),Validators.minLength(5)]]\r\n\t\t});\r\n\t})\r\n\t}\r\n\r\n\t/**\r\n\t * Update address\r\n\t */\r\n\tupdateAddress() {\r\n\t\tthis.hasFormErrors = false;\r\n\t\tconst controls = this.addressForm.controls;\r\n\t\tconsole.log(controls)\r\n\t\tconsole.log()\r\n\t\t/** check form */\r\n\t\tif (this.addressForm.invalid) {\r\n\t\t\tObject.keys(controls).forEach(controlName =>\r\n\t\t\t\tcontrols[controlName].markAsTouched()\r\n\t\t\t\t\r\n\t\t\t);\r\n\t\t\t\r\n\t\t\tthis.errormessage='Oh snap! Check your data please.';\r\n\t\t\tthis.AdressErrorMessage.next(this.errormessage);\r\n\t\t\tthis.hasFormErrors = true;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.errormessage='';\r\n\t\tthis.AdressErrorMessage.next(this.errormessage);\r\n\t\tconst newAddress = new Address();\r\n\t\tnewAddress.addressLine='';\r\n\t\tnewAddress.city='';\r\n\t\tnewAddress.postCode='';\r\n\t\tnewAddress.state='';\r\n\t\tnewAddress['addressLine']= controls['addressLine'].value;\r\n\t\tnewAddress['city']= controls['city'].value;\r\n\t\tnewAddress['postCode']= controls['postCode'].value;\r\n\t\tnewAddress['state']= controls['state'].value;\r\n\t//\tthis.userservice.updateAdrressOfcurrentUser(newAddress)\r\n\t     this.addressSubject.next(newAddress);\r\n\t\t\r\n\t}\r\n\r\n\t/**\r\n\t * Close alert\r\n\t *\r\n\t * @param $event: Event\r\n\t */\r\n\tonAlertClose($event) {\r\n\t\tthis.hasFormErrors = false;\r\n\t}\r\n}\r\n","module.exports = \"<!--begin::Form-->\\r\\n\\t<form *ngIf=\\\"user\\\" [formGroup]=\\\"changePasswordForm\\\" class=\\\"kt-form kt-form--group-seperator-dashed\\\">\\r\\n\\r\\n\\t\\t<kt-alert *ngIf=\\\"hasFormErrors\\\" type=\\\"warn\\\" [showCloseButton]=\\\"true\\\" [duration]=\\\"10000\\\" (close)=\\\"onAlertClose($event)\\\">\\r\\n\\t\\t\\tOh snap! Password not match.\\r\\n\\t\\t</kt-alert>\\r\\n\\t\\t<div class=\\\"kt-form__section kt-form__section--first\\\">\\r\\n\\t\\t\\t<div class=\\\"form-group kt-form__group row mb-0\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"col-lg-8 kt-margin-bottom-20-mobile\\\">\\r\\n\\t\\t\\t\\t\\t<mat-form-field class=\\\"mat-form-field-fluid\\\">\\r\\n\\t\\t\\t\\t\\t\\t<input matInput type=\\\"password\\\" id=\\\"password\\\" autocomplete=\\\"off\\\" placeholder=\\\"Enter Password\\\" formControlName=\\\"password\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<mat-error>Password is\\r\\n\\t\\t\\t\\t\\t\\t\\t<strong>required</strong>\\r\\n\\t\\t\\t\\t\\t\\t</mat-error>\\r\\n\\t\\t\\t\\t\\t\\t<mat-hint align=\\\"start\\\">Please enter\\r\\n\\t\\t\\t\\t\\t\\t\\t<strong>Password</strong>\\r\\n\\t\\t\\t\\t\\t\\t</mat-hint>\\r\\n\\t\\t\\t\\t\\t</mat-form-field>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"form-group kt-form__group row\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"col-lg-8 kt-margin-bottom-20-mobile\\\">\\r\\n\\t\\t\\t\\t\\t<mat-form-field class=\\\"mat-form-field-fluid\\\">\\r\\n\\t\\t\\t\\t\\t\\t<input matInput type=\\\"password\\\" id=\\\"confirmPassword\\\" autocomplete=\\\"off\\\" placeholder=\\\"Confirm password\\\" formControlName=\\\"confirmPassword\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<mat-error>Confirm password is\\r\\n\\t\\t\\t\\t\\t\\t\\t<strong>required</strong>\\r\\n\\t\\t\\t\\t\\t\\t</mat-error>\\r\\n\\t\\t\\t\\t\\t\\t<mat-hint align=\\\"start\\\">Please conirm\\r\\n\\t\\t\\t\\t\\t\\t\\t<strong>Password</strong>\\r\\n\\t\\t\\t\\t\\t\\t</mat-hint>\\r\\n\\t\\t\\t\\t\\t</mat-form-field>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"kt-separator kt-separator--dashed\\\"></div>\\r\\n\\t\\t<div class=\\\"kt-form__actions kt-form__actions--solid\\\">\\r\\n\\t\\t\\t<button type=\\\"button\\\" [disabled]=\\\"changePasswordForm.invalid\\\" mat-raised-button color=\\\"primary\\\" (click)=\\\"onSubmit()\\\" [disabled]=\\\"viewLoading\\\" matTooltip=\\\"Save changes\\\">\\r\\n\\t\\t\\t\\tChange password\\r\\n\\t\\t\\t</button>\\r\\n\\t\\t</div>\\r\\n\\t</form>\\r\\n<!--end::Form-->\\r\\n\"","// Angular\r\nimport { Component, OnInit, ChangeDetectionStrategy, Input } from '@angular/core';\r\nimport { AbstractControl, Validators, FormBuilder } from '@angular/forms';\r\nimport { FormGroup } from '@angular/forms';\r\n// RxJS\r\nimport { BehaviorSubject } from 'rxjs';\r\n// NGRX\r\nimport { Store } from '@ngrx/store';\r\nimport { Update } from '@ngrx/entity';\r\n// Auth\r\nimport { AuthService, UserUpdated, User } from '../../../../../../core/auth/';\r\n// State\r\nimport { AppState } from '../../../../../../core/reducers';\r\n// Layout\r\nimport { LayoutUtilsService, MessageType } from '../../../../../../core/_base/crud';\r\n\r\nexport class PasswordValidation {\r\n\t/**\r\n\t * MatchPassword\r\n\t *\r\n\t * @param AC: AbstractControl\r\n\t */\r\n\t\tstatic MatchPassword(AC: AbstractControl) {\r\n\t\t\t\tconst password = AC.get('password').value; // to get value in input tag\r\n\t\t\t\tconst confirmPassword = AC.get('confirmPassword').value; // to get value in input tag\r\n\t\t\t\tif (password !== confirmPassword) {\r\n\t\t\tAC.get('confirmPassword').setErrors( {MatchPassword: true} );\r\n\t\t\t\t} else {\r\n\t\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t}\r\n}\r\n\r\n@Component({\r\n\tselector: 'kt-change-password',\r\n\ttemplateUrl: './change-password.component.html',\r\n\t// changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class ChangePasswordComponent implements OnInit {\r\n\t// Public properties\r\n\t@Input() userId: number;\r\n\t@Input() loadingSubject = new BehaviorSubject<boolean>(false);\r\n\thasFormErrors: boolean = false;\r\n\tuser: User;\r\n\tchangePasswordForm: FormGroup;\r\n\r\n\t/**\r\n\t * Component constructor\r\n\t *\r\n\t * @param fb: FormBuilder\r\n\t * @param auth: AuthService\r\n\t * @param store: Store<AppState>\r\n\t * @param layoutUtilsService: LayoutUtilsService\r\n\t */\r\n\tconstructor(private fb: FormBuilder, private auth: AuthService, private store: Store<AppState>,\r\n\t\t// tslint:disable-next-line:align\r\n\t\tprivate layoutUtilsService: LayoutUtilsService) {\r\n\t}\r\n\r\n\t/**\r\n\t * @ Lifecycle sequences => https://angular.io/guide/lifecycle-hooks\r\n\t */\r\n\r\n\t/**\r\n\t * On init\r\n\t */\r\n\tngOnInit() {\r\n\t\t//this.loadData();\r\n\t}\r\n\r\n\t/**\r\n\t * Load data\r\n\t//  */\r\n\t// loadData() {\r\n\t// \tthis.auth.getUserById(this.userId).subscribe(res => {\r\n\t// \t\tthis.user = res;\r\n\t// \t\tthis.createForm();\r\n\t// \t});\r\n//}\r\n\r\n\t/**\r\n\t * Init form\r\n\t */\r\n\tcreateForm() {\r\n\t\tthis.changePasswordForm = this.fb.group({\r\n\t\t\tpassword: ['', Validators.required],\r\n\t\t\tconfirmPassword: ['', Validators.required]\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Reset\r\n\t */\r\n\treset() {\r\n\t\tthis.hasFormErrors = false;\r\n\t\tthis.loadingSubject.next(false);\r\n\t\tthis.changePasswordForm.markAsPristine();\r\n\t\t\t\tthis.changePasswordForm.markAsUntouched();\r\n\t\t\t\tthis.changePasswordForm.updateValueAndValidity();\r\n\t}\r\n\r\n\t/**\r\n\t * Save data\r\n\t */\r\n\tonSubmit() {\r\n\t\tthis.loadingSubject.next(true);\r\n\t\tthis.hasFormErrors = false;\r\n\t\tconst controls = this.changePasswordForm.controls;\r\n\t\t/** check form */\r\n\t\tif (this.changePasswordForm.invalid) {\r\n\t\t\tObject.keys(controls).forEach(controlName =>\r\n\t\t\t\tcontrols[controlName].markAsTouched()\r\n\t\t\t);\r\n\t\t\tthis.hasFormErrors = true;\r\n\t\t\tthis.loadingSubject.next(false);\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.user.password = controls['password'].value;\r\n\t\tconst updatedUser: Update<User> = {\r\n\t\t\tid: this.user._userId,\r\n\t\t\tchanges: this.user\r\n\t\t};\r\n\r\n\t\tthis.store.dispatch(new UserUpdated({\r\n\t\t\tpartialUser: updatedUser,\r\n\t\t\tuser: this.user\r\n\t\t}));\r\n\r\n\t//\tthis.loadData();\r\n\t\tthis.loadingSubject.next(false);\r\n\t\tconst message = `User password successfully has been changed.`;\r\n\t\tthis.layoutUtilsService.showActionNotification(message, MessageType.Update, 5000, true, false);\r\n\t\tthis.reset();\r\n\t}\r\n\r\n\t/**\r\n\t * Close alert\r\n\t *\r\n\t * @param $event: Event\r\n\t */\r\n\tonAlertClose($event) {\r\n\t\tthis.hasFormErrors = false;\r\n\t}\r\n}\r\n","module.exports = \"<div class=\\\"kt-portlet\\\" [ngClass]=\\\"{ 'kt-portlet--body-progress' : viewLoading, 'kt-portlet--body-progress-overlay' : loadingAfterSubmit }\\\">\\r\\n    <div class=\\\"kt-portlet__head kt-portlet__head__custom\\\">\\r\\n        <div class=\\\"kt-portlet__head-label\\\">\\r\\n            <h3 class=\\\"kt-portlet__head-title\\\">{{ getTitle() }}</h3>\\r\\n        </div>\\r\\n    </div>\\r\\n    <div>\\r\\n        <div class=\\\"kt-form\\\">\\r\\n            <div class=\\\"kt-portlet__body\\\">\\r\\n\\r\\n                <div class=\\\"kt-portlet__body-progress\\\">\\r\\n                    <mat-spinner [diameter]=\\\"20\\\"></mat-spinner>\\r\\n                </div>\\r\\n\\r\\n                <kt-alert *ngIf=\\\"hasFormErrors\\\" type=\\\"warn\\\" [duration]=\\\"30000\\\" [showCloseButton]=\\\"true\\\" (close)=\\\"onAlertClose($event)\\\">\\r\\n                    {{errormessage}}\\r\\n                </kt-alert>\\r\\n                <div *ngIf=\\\"allbranch.length >0\\\" class=\\\"form-group kt-form__group row d-block\\\">\\r\\n                    <div class=\\\"col-lg-6 kt-margin-bottom-20-mobile\\\">\\r\\n\\r\\n      \\t\\t\\t\\t\\t\\t\\t<mat-form-field>\\r\\n      \\t\\t\\t\\t\\t\\t\\t  <mat-label> All Branchs :</mat-label>\\r\\n      \\t\\t\\t\\t\\t\\t\\t  <mat-select [(ngModel)]=\\\"shift.branch_key\\\"   class=\\\"btn-group bootstrap-select bs-select\\\">\\r\\n                        <mat-option *ngFor=\\\"let value of allbranch\\\" (click)=\\\"branchOnchange(value.pub_key)\\\" [value]=\\\"value.pub_key\\\">\\r\\n      \\t\\t\\t\\t\\t\\t\\t      {{value.name}}\\r\\n      \\t\\t\\t\\t\\t\\t\\t    </mat-option>\\r\\n      \\t\\t\\t\\t\\t\\t\\t  </mat-select>\\r\\n      \\t\\t\\t\\t\\t\\t\\t</mat-form-field>\\r\\n                    </div>\\r\\n    \\t\\t\\t\\t\\t\\t</div>\\r\\n\\r\\n                <div *ngIf=\\\"allunits.length >0\\\" class=\\\"form-group kt-form__group row d-block\\\">\\r\\n                    <div class=\\\"col-lg-6 kt-margin-bottom-20-mobile\\\">\\r\\n\\r\\n      \\t\\t\\t\\t\\t\\t\\t<mat-form-field>\\r\\n      \\t\\t\\t\\t\\t\\t\\t  <mat-label> All Unite :</mat-label>\\r\\n      \\t\\t\\t\\t\\t\\t\\t  <mat-select [(ngModel)]=\\\"shift.units_key\\\" class=\\\"btn-group bootstrap-select bs-select\\\">\\r\\n                        <mat-option *ngFor=\\\"let value of allunits\\\" [value]=\\\"value.pub_key\\\">\\r\\n      \\t\\t\\t\\t\\t\\t\\t      {{value.name}}\\r\\n      \\t\\t\\t\\t\\t\\t\\t    </mat-option>\\r\\n      \\t\\t\\t\\t\\t\\t\\t  </mat-select>\\r\\n      \\t\\t\\t\\t\\t\\t\\t</mat-form-field>\\r\\n                    </div>\\r\\n    \\t\\t\\t\\t\\t\\t</div>\\r\\n\\r\\n                <div class=\\\"form-group kt-form__group row d-block\\\">\\r\\n                    <div class=\\\"col-lg-6 kt-margin-bottom-20-mobile\\\">\\r\\n      \\t\\t\\t\\t\\t\\t\\t<mat-form-field>\\r\\n      \\t\\t\\t\\t\\t\\t\\t  <mat-label> Shift Type * </mat-label>\\r\\n      \\t\\t\\t\\t\\t\\t\\t  <mat-select [(ngModel)]=\\\"shift.shift_type\\\" class=\\\"btn-group bootstrap-select bs-select\\\">\\r\\n                        <mat-option  ng-reflect-value=\\\"gen\\\" value=\\\"pub\\\">General</mat-option>\\r\\n              \\t\\t\\t\\t\\t<mat-option  ng-reflect-value=\\\"pri\\\" value=\\\"pri\\\">Private</mat-option>\\r\\n      \\t\\t\\t\\t\\t\\t\\t  </mat-select>\\r\\n      \\t\\t\\t\\t\\t\\t\\t</mat-form-field>\\r\\n                    </div>\\r\\n    \\t\\t\\t\\t\\t\\t</div>\\r\\n\\r\\n            <div class=\\\"form-group kt-form__group row d-block\\\">\\r\\n                <div class=\\\"col-lg-6 kt-margin-bottom-20-mobile\\\">\\r\\n  \\t\\t\\t\\t\\t\\t\\t<mat-form-field>\\r\\n  \\t\\t\\t\\t\\t\\t\\t  <mat-label> Day </mat-label>\\r\\n  \\t\\t\\t\\t\\t\\t\\t  <mat-select [(ngModel)]=\\\"shift.day_per_week\\\" class=\\\"btn-group bootstrap-select bs-select\\\">\\r\\n                    <mat-option  ng-reflect-value=\\\"saturday\\\" value=\\\"saturday\\\">Saturday</mat-option>\\r\\n          \\t\\t\\t\\t\\t<mat-option  ng-reflect-value=\\\"sunday\\\" value=\\\"sunday\\\">sunday</mat-option>\\r\\n                    <mat-option  ng-reflect-value=\\\"monday\\\" value=\\\"monday\\\">monday</mat-option>\\r\\n                    <mat-option  ng-reflect-value=\\\"tuesday\\\" value=\\\"tuesday\\\">tuesday</mat-option>\\r\\n                    <mat-option  ng-reflect-value=\\\"wednesday\\\" value=\\\"wednesday\\\">wednesday</mat-option>\\r\\n                    <mat-option  ng-reflect-value=\\\"thursday\\\" value=\\\"thursday\\\">thursday</mat-option>\\r\\n                    <mat-option  ng-reflect-value=\\\"friday\\\" value=\\\"friday\\\">friday</mat-option>\\r\\n  \\t\\t\\t\\t\\t\\t\\t  </mat-select>\\r\\n  \\t\\t\\t\\t\\t\\t\\t</mat-form-field>\\r\\n                </div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\r\\n\\r\\n          <div class=\\\"form-group kt-form__group row d-block\\\">\\r\\n              <div class=\\\"col-lg-4 kt-margin-bottom-20-mobile\\\">\\r\\n                  <mat-form-field class=\\\"mat-form-field-fluid\\\">\\r\\n                      <input type=\\\"time\\\" matInput\\r\\n                          placeholder=\\\"Enter Start Time\\\"\\r\\n                          [(ngModel)]=\\\"shift.from_time\\\" />\\r\\n                      <mat-error>Start Time\\r\\n                          <strong>required</strong>\\r\\n                      </mat-error>\\r\\n                      <mat-hint align=\\\"start\\\">Please enter\\r\\n                          <strong>Start Time</strong>\\r\\n                      </mat-hint>\\r\\n                  </mat-form-field>\\r\\n              </div>\\r\\n          </div>\\r\\n\\r\\n          <div class=\\\"form-group kt-form__group row d-block\\\">\\r\\n              <div class=\\\"col-lg-4 kt-margin-bottom-20-mobile\\\">\\r\\n                  <mat-form-field class=\\\"mat-form-field-fluid\\\">\\r\\n                      <input type=\\\"time\\\" matInput\\r\\n                          placeholder=\\\"Enter End Time\\\"\\r\\n                          [(ngModel)]=\\\"shift.to_time\\\" />\\r\\n                      <mat-error>End Time\\r\\n                          <strong>required</strong>\\r\\n                      </mat-error>\\r\\n                      <mat-hint align=\\\"start\\\">Please enter\\r\\n                          <strong>End Time</strong>\\r\\n                      </mat-hint>\\r\\n                  </mat-form-field>\\r\\n              </div>\\r\\n          </div>\\r\\n\\r\\n        <div class=\\\"form-group kt-form__group row d-block\\\">\\r\\n           <div class=\\\"col-lg-6 kt-margin-bottom-20-mobile\\\">\\r\\n             <mat-form-field class=\\\"example-full-width\\\">\\r\\n               <input matInput [matDatepicker]=\\\"picker\\\" [(ngModel)]=\\\"shift.from_day\\\" placeholder=\\\"from day\\\">\\r\\n               <mat-datepicker-toggle matSuffix [for]=\\\"picker\\\">\\r\\n                 <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>\\r\\n               </mat-datepicker-toggle>\\r\\n               <mat-datepicker #picker></mat-datepicker>\\r\\n             </mat-form-field>\\r\\n           </div>\\r\\n       </div>\\r\\n\\r\\n\\r\\n     <div class=\\\"form-group kt-form__group row d-block\\\">\\r\\n         <div class=\\\"col-lg-6 kt-margin-bottom-20-mobile\\\">\\r\\n           <mat-form-field class=\\\"example-full-width\\\">\\r\\n             <input matInput [matDatepicker]=\\\"pickerTo\\\" [(ngModel)]=\\\"shift.to_day\\\" placeholder=\\\"to day\\\">\\r\\n             <mat-datepicker-toggle matSuffix [for]=\\\"pickerTo\\\">\\r\\n               <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>\\r\\n             </mat-datepicker-toggle>\\r\\n             <mat-datepicker #pickerTo></mat-datepicker>\\r\\n           </mat-form-field>\\r\\n         </div>\\r\\n     </div>\\r\\n\\r\\n\\r\\n                <div class=\\\"kt-separator kt-separator--dashed\\\"></div>\\r\\n\\r\\n            </div>\\r\\n            <div class=\\\"kt-portlet__foot kt-portlet__foot--fit kt-portlet__no-border\\\">\\r\\n                <div class=\\\"kt-form__actions kt-form__actions--solid\\\">\\r\\n                    <div class=\\\"row text-right\\\">\\r\\n                        <div class=\\\"col-lg-12\\\">\\r\\n                            <button type=\\\"button\\\" mat-raised-button [mat-dialog-close]=\\\"data.animal\\\" cdkFocusInitial matTooltip=\\\"Cancel changes\\\">\\r\\n                                Cancel\\r\\n                            </button>&nbsp;\\r\\n                            <button type=\\\"button\\\"  mat-raised-button color=\\\"primary\\\" (click)=\\\"onSubmit()\\\" [disabled]=\\\"viewLoading\\\" matTooltip=\\\"Save changes\\\">\\r\\n                                Save\\r\\n                            </button>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n\"","// Angular\r\nimport { Component, OnInit, Inject, ChangeDetectionStrategy, OnDestroy } from '@angular/core';\r\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material';\r\n// Lodash\r\nimport { Router , ActivatedRoute} from '@angular/router';\r\nimport * as _lodash from 'lodash';\r\n// RxJS\r\nimport { Observable, of, Subscription} from 'rxjs';\r\n// Lodash\r\nimport { each, find, some } from 'lodash';\r\n// NGRX\r\nimport { Update } from '@ngrx/entity';\r\nimport { Store, select } from '@ngrx/store';\r\n// State\r\nimport { AppState } from '../../../../../../../core/reducers';\r\nimport { LayoutUtilsService, MessageType, QueryParamsModel } from '../../../../../../../core/_base/crud';\r\n\r\nimport { delay } from 'rxjs/operators';\r\nimport { Shift } from './shifts.model';\r\nimport { Shifts,UserService } from '../../../../../../../core/auth/_services';\r\n\r\n@Component({\r\n\tselector: 'kt-shifts-edit-dialog',\r\n\ttemplateUrl: './shifts-edit.dialog.component.html',\r\n\tchangeDetection: ChangeDetectionStrategy.Default,\r\n})\r\nexport class ShiftEditDialogComponent implements OnInit, OnDestroy {\r\n\t// Public properties\r\n\tshift : Shift;\r\n\tshift$: Observable<Shift>;\r\n\thasFormErrors: boolean = false;\r\n\terrormessage : string ='';\r\n\tviewLoading: boolean = false;\r\n\tloadingAfterSubmit: boolean = false;\r\n\tallbrancandunits : [];\r\n\tallbranch : any;\r\n\tallunits : any;\r\n\t// Private properties\r\n\tprivate componentSubscriptions: Subscription;\r\n\r\n\t/**\r\n\t * Component constructor\r\n\t *\r\n\t * @param dialogRef: MatDialogRef<ShiftEditDialogComponent>\r\n\t * @param data: any\r\n\t * @param store: Store<AppState>\r\n\t */\r\n\tconstructor(public dialogRef: MatDialogRef<ShiftEditDialogComponent>,\r\n\t\t@Inject(MAT_DIALOG_DATA) public data: any,\r\n\t\tprivate store: Store<AppState>,private ser :Shifts,private userservice:UserService,private router: Router,private activatedRoute: ActivatedRoute,\r\n\t\tprivate layoutUtilsService: LayoutUtilsService) { }\r\n\r\n\t/**\r\n\t * @ Lifecycle sequences => https://angular.io/guide/lifecycle-hooks\r\n\t */\r\n\r\n\t/**\r\n\t * On init\r\n\t */\r\n\tngOnInit() {\r\n\t\tthis.allbranch=[];this.allunits=[];\r\n\t\tconst newInviation = new Shift();\r\n\t\tthis.shift$ = of(newInviation);\r\n\t\tthis.shift$.subscribe(res => {\r\n\t\t\tif (!res) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.shift = res;\r\n\t\t});\r\n\r\n\t\tthis.getbranceandunits();\r\n\r\n\t\tif(this.data._id != undefined)\r\n\t\t\tthis.getActivitiesById(this.data);\r\n\r\n\t}\r\n\r\n\tbranchOnchange(key){\r\n\t\tvar allunits = [];\r\n\t\tObject.values(this.allbrancandunits).forEach(function(units) {\r\n\t\t\tif(units['type'] == 'units' && units['branch_key'] == key) allunits.push(units);\r\n\t\t});\r\n\t\tconsole.table(key);console.table(allunits);\r\n\t\tthis.allunits = allunits;\r\n\t}\r\n\t/**\r\n\t * On destroy\r\n\t */\r\n\tngOnDestroy() {\r\n\t\tif (this.componentSubscriptions) {\r\n\t\t\tthis.componentSubscriptions.unsubscribe();\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\t/**\r\n\t * Save data\r\n\t */\r\n\tonSubmit() {\r\n\t\tif(this.shift.from_time && this.shift.to_time &&  this.shift.shift_type){\r\n\t\tthis.loadingAfterSubmit = true;\r\n\t\tthis.viewLoading = true;\r\n\t\tconsole.table(this.shift);\r\n\t\tif(this.data._id != undefined){\r\n\t\t\tthis.ser.updateshifts(this.data._id,this.shift).subscribe(\r\n \t\t \tres=>{\r\n \t\t\t\tthis.redirctFunction(res['result']);\r\n \t\t \t}\r\n \t\t )\r\n\t\t}else{\r\n\t\t\tthis.shift.user_key = this.data.user_key;\r\n\t\t\tthis.ser.addshifts(this.shift).subscribe(\r\n \t\t \tres=>{\r\n \t\t\t\tthis.redirctFunction(res['result']);\r\n \t\t \t}\r\n \t\t )\r\n\t\t}\r\n\t }else {\r\n\t\t this.hasFormErrors = true;\r\n\t\t this.errormessage = \"Please Enter all Required Fileds\"\r\n\t }\r\n\r\n\t}\r\n\r\n\r\n\t redirctFunction(done){\r\n\t\tif(done){\r\n\t\t\tthis.dialogRef.close({});\r\n\r\n\t\t\tif(this.router.url.includes('edits')){\r\n\t\t\t\tvar url = this.router.url.replace(\"edits\",'edit');\r\n\t\t\t\tif(!this.router.url.includes('?shift=true'))\r\n\t\t\t\t\turl = url +'?shift=true';\r\n\t\t\t\t\t\r\n\t\t\t\tthis.router.navigateByUrl(url);\r\n\t\t\t}else{\r\n\t\t\t\tvar url = this.router.url.replace(\"edit\",'edits');\r\n\t\t\t\tif(!this.router.url.includes('?shift=true'))\r\n\t\t\t\t\turl = url +'?shift=true';\r\n\t\t\t\tthis.router.navigateByUrl(url);\r\n\t\t\t}\r\n\t\t\tsetTimeout(()=>{\r\n\t\t\t\tthis.layoutUtilsService.showActionNotification(\"Shift Add Successfully\", MessageType.Update);\r\n\t\t\t}, 1000)\r\n\t\t}else{\r\n\t\t\tthis.loadingAfterSubmit = false;\r\n\t\t\tthis.viewLoading = false;\r\n\t\t\tthis.hasFormErrors = true;\r\n\t\t\tthis.errormessage = 'Shift Doesn\\'t Added';\r\n\t\t}\r\n\t}\r\n\r\n\t//get branch and units\r\n\tgetbranceandunits(){\r\n\t\tthis.userservice.getAllBrachsAndUnits(1,10000).subscribe(\r\n\t\t\tres=>{\r\n\t\t\t\tif(res['result'] && res['data'].length > 0){\r\n\t\t\t\t\tthis.allbrancandunits = res['data'];\r\n\t\t\t\t\tvar branches = [];\r\n\t\t\t\t\tObject.keys(res['data']).forEach(function(key) {\r\n\t\t\t\t\t\tif(res['data'][key].type=='branch') branches.push(res['data'][key]);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.allbranch = branches;\r\n\t\t\t\t\t//console.table(branches);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t)\r\n\t}\r\n\r\n\t//get shifts data\r\n\tgetActivitiesById(data){\r\n\t\t\tthis.shift.branch_key =  data.branch_key;\r\n\t\t\tthis.shift.units_key =  data.units_key;\r\n\t\t\tthis.shift.resource_id =  data.resource_id;\r\n\t\t\tthis.shift.user_key =  data.user_key;\r\n\t\t\tthis.shift.shift_type =  data.shift_type;\r\n\t\t\tthis.shift.day_per_week =  data.day_per_week;\r\n\t\t\tthis.shift.from_time =  data.from_time;\r\n\t\t\tthis.shift.to_time =  data.to_time;\r\n\t\t\tthis.shift.from_day =  data.from_day;\r\n\t\t\tthis.shift.to_day =  data.to_day;\r\n\t\t\tthis.branchOnchange(this.shift.branch_key);\r\n\t}\r\n\t/**\r\n\t * Close alert\r\n\t *\r\n\t * @param $event: Event\r\n\t */\r\n\tonAlertClose($event) {\r\n\t\tthis.hasFormErrors = false;\r\n\t}\r\n\r\n\t/** UI */\r\n\t/**\r\n\t * Returns component title\r\n\t */\r\n\tgetTitle(): string {\r\n\t\treturn 'New Shift';\r\n\t}\r\n\r\n\tisTitleValid(): boolean {\r\n\t\treturn true;\r\n\t}\r\n\r\n\r\n}\r\n","import { BaseModel } from '../../../../../../../core/_base/crud';\r\n\r\nexport class Shift extends BaseModel {\r\n        club_key: string;\r\n        branch_key: string;\r\n        units_key: string;\r\n        resource_id: string;\r\n        day_per_week: string;\r\n        user_key: string;\r\n        shift_type: string;\r\n        from_time: string;\r\n        to_time: string;\r\n        from_day: string;\r\n        to_day: string;\r\n        status: string;\r\n\r\n    clear(): void {\r\n      this.club_key = '';\r\n      this.branch_key = '';\r\n      this.units_key = '';\r\n      this.resource_id = '';\r\n      this.day_per_week = '';\r\n      this.user_key = '';\r\n      this.shift_type = '';\r\n      this.from_time = '';\r\n      this.to_time = '';\r\n      this.from_day = '';\r\n      this.to_day = '';\r\n      this.status = '';\r\n    }\r\n}\r\n","module.exports = \"<div>\\r\\n\\t<div class=\\\"form-group kt-form__group row\\\">\\r\\n\\t\\t<div class=\\\"col-lg-4 kt-margin-bottom-20-mobile\\\">\\r\\n\\t\\t\\t<div class=\\\"kt-form\\\">\\r\\n\\t\\t\\t\\t<!-- start::FILTERS -->\\r\\n\\t\\t\\t\\t<div class=\\\"kt-form__filtration\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"row align-items-center\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"col-md-12 kt-margin-bottom-10-mobile\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<mat-form-field class=\\\"mat-form-field-fluid\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<input matInput placeholder=\\\"Search user\\\" [(ngModel)]=\\\"SearchKey\\\" #searchInput placeholder=\\\"Search\\\" (keyup)=\\\"applyFilter()\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t <button mat-button matSuffix mat-icon-button aria-label=\\\"Clear\\\" *ngIf=\\\"SearchKey\\\" (click)=\\\"onSearchClear()\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t <mat-icon>close</mat-icon>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t </button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<mat-hint align=\\\"start\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<strong>Search</strong> in all fields\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</mat-hint>\\r\\n\\t\\t\\t\\t\\t\\t\\t</mat-form-field>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<!-- end::FILTERS -->\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"col-lg-4 kt-margin-bottom-20-mobile\\\">\\r\\n\\t\\t\\t<button type=\\\"button\\\" mat-raised-button matTooltip=\\\"Add Shifts\\\" (click)=\\\"addShifts()\\\" color=\\\"accent\\\">\\r\\n\\t\\t\\t\\tAdd Shifts\\r\\n\\t\\t\\t</button>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"kt-separator kt-separator--dashed\\\"></div>\\r\\n\\t<h6 class=\\\"kt-section__heading\\\" *ngIf=\\\"assignedRoles.length > 0\\\">\\r\\n\\t\\tAssigned Shifts :\\r\\n\\t</h6>\\r\\n\\t<div class=\\\"form-group kt-form__group row\\\" *ngIf=\\\"assignedRoles.length > 0\\\">\\r\\n\\t\\t<div class=\\\"col-lg-8 kt-margin-bottom-20-mobile\\\">\\r\\n\\t\\t\\t<div class=\\\"kt-list-timeline kt-list-timeline--user-role\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"kt-list-timeline__items\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"kt-list-timeline__item m-0 p-0\\\" *ngFor=\\\"let _role of assignedRoles\\\">\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"kt-list-timeline__badge kt-list-timeline__badge--primary\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"kt-list-timeline__text\\\">{{ _role.day_per_week }}</span>\\r\\n\\t\\t\\t\\t\\t\\t<span *ngIf=\\\"_role.shift_type=='pri'\\\" class=\\\"kt-list-timeline__text\\\">Private</span>\\r\\n\\t\\t\\t\\t\\t\\t<span *ngIf=\\\"_role.shift_type=='pub'\\\" class=\\\"kt-list-timeline__text\\\">Public</span>\\r\\n\\t\\t\\t\\t\\t\\t<span *ngIf=\\\"_role.status=='true'\\\" class=\\\"kt-list-timeline__text\\\">Active</span>\\r\\n\\t\\t\\t\\t\\t\\t<span *ngIf=\\\"_role.status=='false'\\\" class=\\\"kt-list-timeline__text\\\">Deactive</span>\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"kt-list-timeline__text\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<button (click)=\\\"editshifts(_role)\\\" mat-icon-button color=\\\"primary\\\" *ngIf=\\\"checkedpermission()\\\" matTooltip=\\\"Edit Shift\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<mat-icon>create</mat-icon>\\r\\n\\t\\t\\t\\t\\t\\t\\t</button>&nbsp;\\r\\n\\t\\t\\t\\t\\t\\t\\t<button *ngIf=\\\"_role.status=='true' && checkedpermission()\\\" mat-icon-button color=\\\"warn\\\" matTooltip=\\\"Deactive Shift\\\" type=\\\"button\\\"  (click)=\\\"deactiveshifts(_role._id,'false',_role.user_key)\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<mat-icon>delete</mat-icon>\\r\\n\\t\\t\\t\\t\\t\\t\\t</button>\\r\\n\\t\\t\\t\\t\\t\\t\\t<button *ngIf=\\\"_role.status=='false' && checkedpermission()\\\" mat-icon-button color=\\\"warn\\\" matTooltip=\\\"Active Shift\\\" type=\\\"button\\\"  (click)=\\\"deactiveshifts(_role._id,'true',_role.user_key)\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<mat-icon>cached</mat-icon>\\r\\n\\t\\t\\t\\t\\t\\t\\t</button>\\r\\n\\t\\t\\t\\t\\t\\t</span>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\"","import { AfterViewInit, AfterViewChecked } from '@angular/core';\r\n// Angular\r\nimport { Component ,OnInit, ElementRef, ViewChild, ChangeDetectionStrategy, OnDestroy, ChangeDetectorRef } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\n// Material\r\nimport { SelectionModel } from '@angular/cdk/collections';\r\nimport { MatPaginator, MatSort, MatSnackBar, MatDialog, MatTableDataSource } from '@angular/material';\r\n// RXJS\r\nimport { debounceTime, distinctUntilChanged, tap, skip, take, delay, map } from 'rxjs/operators';\r\nimport { fromEvent, merge, Observable, of, Subscription } from 'rxjs';\r\n// LODASH\r\nimport { each, find } from 'lodash';\r\n\r\n// NGRX\r\nimport { Store, select } from '@ngrx/store';\r\nimport { AppState } from '../../../../../../core/reducers';\r\n\r\n// Services\r\nimport { LayoutUtilsService, MessageType, QueryParamsModel } from '../../../../../../core/_base/crud';\r\nimport { Shifts ,UserService} from '../../../../../../core/auth/_services'\r\nimport { ShiftEditDialogComponent } from './shifts-edit/shifts-edit.dialog.component';\r\nimport { SubheaderService } from '../../../../../../core/_base/layout';\r\n\r\n\r\n// Table with EDIT item in MODAL\r\n// ARTICLE for table with sort/filter/paginator\r\n// https://blog.angular-university.io/angular-material-data-table/\r\n// https://v5.material.angular.io/components/table/overview\r\n// https://v5.material.angular.io/components/sort/overview\r\n// https://v5.material.angular.io/components/table/overview#sorting\r\n// https://www.youtube.com/watch?v=NSt9CI3BXv4\r\n@Component({\r\n\tselector: 'kt-shifts',\r\n\ttemplateUrl: './shifts.component.html',\r\n\tchangeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class ShiftsComponent implements OnInit, OnDestroy {\r\n\t// Table fields\r\n\tdataSource;\r\n\tlistData:MatTableDataSource<any>;\r\n\tselection = new SelectionModel<any>(true, []);\r\n\tdisplayedColumns = [ 'id', 'title' ,'discriptions' ,'type','status', 'actions'];\r\n\t@ViewChild(MatPaginator) paginator: MatPaginator;\r\n//@ViewChild(MatSort) sort: MatSort;\r\n\t// Filter fields\r\n\t@ViewChild('searchInput') searchInput: ElementRef;\r\n\tlastQuery: QueryParamsModel;\r\n\tSearchKey: string;\r\n\tselectedUser;\r\n\thasMessages: boolean = false;\r\n\tcheckdata: boolean = false;\r\n\tassignedRoles : any;\r\n\t// Subscriptions\r\n\tprivate subscriptions: Subscription[] = [];\r\n\r\n\t/**\r\n\t *\r\n\t * @param activatedRoute: ActivatedRoute\r\n\t * @param store: Store<AppState>\r\n\t * @param router: Router\r\n\t * @param layoutUtilsService: LayoutUtilsService\r\n\t * @param subheaderService: SubheaderService\r\n\t */\r\n\tconstructor(\r\n\t\tprivate activatedRoute: ActivatedRoute,\r\n\t\tprivate store: Store<AppState>,\r\n\t\tprivate router: Router,\r\n\t\tprivate layoutUtilsService: LayoutUtilsService,\r\n\t\tpublic dialog: MatDialog,\r\n\t\tprivate ser: Shifts,private userservice:UserService,\r\n\t    private changeDetectorRefs: ChangeDetectorRef\r\n\r\n\t) { }\r\n\t/**\r\n\t * @ Lifecycle sequences => https://angular.io/guide/lifecycle-hooks\r\n\t */\r\n\r\n\t/**\r\n\t * On init\r\n\t */\r\n\tngOnInit() {\r\n\t\tthis.assignedRoles=[];\r\n\t\tthis.getallshifts()\r\n\t}\r\n\r\n\tngAfterViewInit()\r\n\t{\r\n\t\tthis.getallshifts()\r\n\r\n\t}\r\n\t/**\r\n\t * On Destroy\r\n\t */\r\n\tngOnDestroy() {\r\n\t\tthis.subscriptions.forEach(el => el.unsubscribe());\r\n\t}\r\n\r\n\taddShifts() {\r\n\t\t\tvar user_key = this.activatedRoute.snapshot.paramMap.get(\"id\");\r\n\t\t\tconst dialogRef = this.dialog.open(ShiftEditDialogComponent, { data: {user_key} });\r\n\t}\r\n\r\n\t/**\r\n\t * Close alert\r\n\t *\r\n\t * @param $event: Event\r\n\t */\r\n\tonAlertClose($event) {\r\n\t\tthis.hasMessages = false;\r\n\t}\r\n\r\n\r\n\tgetallshifts(pages = 1, prepage = 30, search = null) {\r\n\t\tvar user_key = this.activatedRoute.snapshot.paramMap.get(\"id\");\r\n\t\tthis.ser.getallshifts(user_key,pages, prepage, search).subscribe(\r\n\t\t\tres => {\r\n\t\t\t\tif (res['result']) {\r\n\t\t\t\t\tconsole.log('dataaa',res['data'])\r\n\t\t\t\t\tthis.assignedRoles = res['data'];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t)\r\n\t}\r\n\r\n\teditshifts(data) {\r\n\t\tconst dialogRef = this.dialog.open(ShiftEditDialogComponent, { data: data });\r\n\t}\r\n\r\n\tdeactiveshifts(id,status,user_key){\r\n\t\tthis.ser.updateshifts(id,{status}).subscribe(\r\n\t\tres=>{\r\n\t\t\tif(this.router.url == '/default/user-management/users/edit/'+user_key+'?shift=true')\r\n\t\t\t\tthis.router.navigateByUrl(\"/default/user-management/users/edits/\"+user_key+'?shift=true');\r\n\t\t\telse this.router.navigateByUrl(\"/default/user-management/users/edit/\"+user_key+'?shift=true');\r\n\t\t}\r\n\t )\r\n\t}\r\n\r\n\tapplyFilter() {\r\n\t\tthis.getallshifts(null, null, this.searchInput.nativeElement.value)\r\n\t}\r\n\tonSearchClear() {\r\n\t\tthis.searchInput.nativeElement.value = ''\r\n\t\tthis.applyFilter()\r\n\t}\r\n\tnextPage(event) {\r\n\r\n\t\tthis.getallshifts(event.pageIndex + 1, event.pageSize, null)\r\n\t}\r\n\t//checked if there is inivitations or not\r\n\tcheckedinvitations() {\r\n\t\tif (this.dataSource) {\r\n\t\t\tif (this.dataSource.data) {\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\t\t\telse return false\r\n\t\t}\r\n\t\telse false\r\n\t}\r\n\r\n\tcheckedpermission()\r\n\t{\r\n\t\tif(localStorage.getItem('user'))\r\n\t\t{\r\n\t\t\tif(JSON.parse(localStorage.getItem('user'))['allPrivilidge'])\r\n\t\t\t{\r\n\r\n\t\t\tif(JSON.parse(localStorage.getItem('user'))['allPrivilidge']['Users Mangement'])\r\n\t\t\t{\r\n\r\n\t\t\t  if(JSON.parse(localStorage.getItem('user'))['allPrivilidge']['Users Mangement']['Invitation'])\r\n\t\t\t  return true\r\n\t\t\t}\r\n\t\t}\r\n\t\t}\r\n\t\treturn false\r\n\t}\r\n\r\n}\r\n","module.exports = \"<!--begin::Form-->\\r\\n<div *ngIf=\\\"socialNetworksForm\\\">\\r\\n\\t<form [formGroup]=\\\"socialNetworksForm\\\" class=\\\"kt-form kt-form--group-seperator-dashed\\\">\\r\\n\\t\\r\\n\\t\\t<kt-alert *ngIf=\\\"hasFormErrors\\\" type=\\\"warn\\\" [showCloseButton]=\\\"true\\\" [duration]=\\\"10000\\\" (close)=\\\"onAlertClose($event)\\\">\\r\\n\\t\\t\\tOh snap! Change a few things up and try submitting again.\\r\\n\\t\\t</kt-alert>\\r\\n\\t\\t<div class=\\\"kt-form__section kt-form__section--first\\\">\\r\\n\\t\\t\\t<div class=\\\"form-group kt-form__group row\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"col-lg-4 kt-margin-bottom-20-mobile\\\">\\r\\n\\t\\t\\t\\t\\t<mat-form-field class=\\\"mat-form-field-fluid\\\">\\r\\n\\t\\t\\t\\t\\t\\t<input matInput placeholder=\\\"Enter LinkedIn address\\\" formControlName=\\\"linkedIn\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<mat-error>Please enter\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<strong>valid URL</strong>\\r\\n\\t\\t\\t\\t\\t\\t\\t</mat-error>\\r\\n\\t\\t\\t\\t\\t\\t<mat-hint align=\\\"start\\\">Please enter\\r\\n\\t\\t\\t\\t\\t\\t\\t<strong>Linked In</strong> address\\r\\n\\t\\t\\t\\t\\t\\t</mat-hint>\\r\\n\\t\\t\\t\\t\\t</mat-form-field>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div class=\\\"col-lg-4 kt-margin-bottom-20-mobile\\\">\\r\\n\\t\\t\\t\\t\\t<mat-form-field class=\\\"mat-form-field-fluid\\\">\\r\\n\\t\\t\\t\\t\\t\\t<input matInput placeholder=\\\"Enter Facebook address\\\" formControlName=\\\"facebook\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<mat-error>Please enter\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<strong>valid URL</strong>\\r\\n\\t\\t\\t\\t\\t\\t\\t</mat-error>\\r\\n\\t\\t\\t\\t\\t\\t<mat-hint align=\\\"start\\\">Please enter\\r\\n\\t\\t\\t\\t\\t\\t\\t<strong>Facebook</strong> address\\r\\n\\t\\t\\t\\t\\t\\t</mat-hint>\\r\\n\\t\\t\\t\\t\\t</mat-form-field>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"form-group kt-form__group row\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"col-lg-4 kt-margin-bottom-20-mobile\\\">\\r\\n\\t\\t\\t\\t\\t<mat-form-field class=\\\"mat-form-field-fluid\\\">\\r\\n\\t\\t\\t\\t\\t\\t<input matInput placeholder=\\\"Enter Twitter address\\\" formControlName=\\\"twitter\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<mat-error>Please enter\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<strong>valid URL</strong>\\r\\n\\t\\t\\t\\t\\t\\t\\t</mat-error>\\r\\n\\t\\t\\t\\t\\t\\t<mat-hint align=\\\"start\\\">Please enter\\r\\n\\t\\t\\t\\t\\t\\t\\t<strong>Twitter</strong> address\\r\\n\\t\\t\\t\\t\\t\\t</mat-hint>\\r\\n\\t\\t\\t\\t\\t</mat-form-field>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div class=\\\"col-lg-4 kt-margin-bottom-20-mobile\\\">\\r\\n\\t\\t\\t\\t\\t<mat-form-field class=\\\"mat-form-field-fluid\\\">\\r\\n\\t\\t\\t\\t\\t\\t<input matInput placeholder=\\\"Enter Instagram address\\\" formControlName=\\\"instagram\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<mat-error>Please enter\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<strong>valid URL</strong>\\r\\n\\t\\t\\t\\t\\t\\t\\t</mat-error>\\r\\n\\t\\t\\t\\t\\t\\t<mat-hint align=\\\"start\\\">Please enter\\r\\n\\t\\t\\t\\t\\t\\t\\t<strong>Instagram</strong> address\\r\\n\\t\\t\\t\\t\\t\\t</mat-hint>\\r\\n\\t\\t\\t\\t\\t</mat-form-field>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</form>\\r\\n\\t</div>\\r\\n\\t<!--end::Form-->\\r\\n\\t\\r\\n\"","// Angular\r\nimport { Component, OnInit, ChangeDetectionStrategy, Input, ChangeDetectorRef } from '@angular/core';\r\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\r\nimport { Store } from '@ngrx/store';\r\n// RxJS\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { debounceTime, distinctUntilChanged, tap } from 'rxjs/operators';\r\n// State\r\nimport { AppState } from '../../../../../../core/reducers';\r\n// Auth\r\nimport { SocialNetworks, } from '../../../../../../core/auth';\r\nimport { AuthService } from '../../../../../../core/auth/_services/auth.service'\r\n// CRUD\r\nimport { LayoutUtilsService } from '../../../../../../core/_base/crud';\r\nimport { Router } from '@angular/router'\r\n//services\r\nimport { UserService } from '../../../../../../core/auth/_services/-user.service';\r\n\r\n@Component({\r\n\tselector: 'kt-social-networks',\r\n\ttemplateUrl: './social-networks.component.html',\r\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class SocialNetworksComponent implements OnInit {\r\n\t// Public properties\r\n\t// Incoming data\r\n\t@Input() loadingSubject = new BehaviorSubject<boolean>(false);\r\n\t@Input() socialNetworksSubject: BehaviorSubject<SocialNetworks>;\r\n\t@Input() SocialErrorMesaage: BehaviorSubject<string>;\r\n\thasFormErrors: boolean = false;\r\n\tsocialNetworksForm: FormGroup;\r\n\terrormessage;\r\n\t/**\r\n\t * Component constructor\r\n\t *\r\n\t * \r\n\t * @ Lifecycle sequences => https://angular.io/guide/lifecycle-ho\r\n\t/**\r\n\t * Component constructor\r\n\t *\r\n\t * @param fb: FormBuilser\r\n\t * @param auth: AuthService\r\n\t * @param store: Store<AppState>\r\n\t * @param layoutUtilsService: LayoutUtilsService\r\n\t */\r\n\tconstructor(private fb: FormBuilder,\r\n\t\tprivate auth: AuthService,\r\n\t\tprivate store: Store<AppState>,\r\n\t\tprivate layoutUtilsService: LayoutUtilsService) { }\r\n\r\n\t/**\r\n\t * @ Lifecycle sequences => https://angular.io/guide/lifecycle-hooks\r\n\t */\r\n\r\n\t/**\r\n\t * On init\r\n\t */\r\n\tngOnInit() {\r\n\t\tif (!this.socialNetworksSubject.value) {\r\n\t\t\tconst newSocialNetworks = new SocialNetworks();\r\n\t\t\tnewSocialNetworks.facebook = '';\r\n\t\t\tnewSocialNetworks.instagram = '';\r\n\t\t\tnewSocialNetworks.linkedIn = '';\r\n\t\t\tnewSocialNetworks.twitter = '';\r\n\t\t\tthis.socialNetworksSubject.next(newSocialNetworks);\r\n\t\t}\r\n\r\n\t\tthis.createForm();\r\n\t\tthis.socialNetworksForm.valueChanges\r\n\t\t\t.pipe(\r\n\t\t\t\t// tslint:disable-next-line:max-line-length\r\n\t\t\t\tdebounceTime(150), // The user can type quite quickly in the input box, and that could trigger a lot of server requests. With this operator, we are limiting the amount of server requests emitted to a maximum of one every 150ms\r\n\t\t\t\tdistinctUntilChanged(), // This operator will eliminate duplicate values\r\n\t\t\t\ttap(() => {\r\n\t\t\t\t\tthis.updateSocialNetworks();\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t\t.subscribe();\r\n\t}\r\n\r\n\t// Create form\r\n\tcreateForm() {\r\n\t\tthis.socialNetworksForm = this.fb.group({\r\n\t\t\tlinkedIn: [this.socialNetworksSubject.value.linkedIn, Validators.pattern(\"(https?://)?([\\\\da-z.-]+)\\\\.([a-z.]{2,6})[/\\\\w .-]*/?\")],\r\n\t\t\tfacebook: [this.socialNetworksSubject.value.facebook, Validators.pattern(\"(https?://)?([\\\\da-z.-]+)\\\\.([a-z.]{2,6})[/\\\\w .-]*/?\")],\r\n\t\t\ttwitter: [this.socialNetworksSubject.value.twitter, Validators.pattern(\"(https?://)?([\\\\da-z.-]+)\\\\.([a-z.]{2,6})[/\\\\w .-]*/?\")],\r\n\t\t\tinstagram: [this.socialNetworksSubject.value.instagram, Validators.pattern(\"(https?://)?([\\\\da-z.-]+)\\\\.([a-z.]{2,6})[/\\\\w .-]*/?\")]\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Update social networks\r\n\t */\r\n\tupdateSocialNetworks() {\r\n\t\tthis.loadingSubject.next(true);\r\n\t\tthis.hasFormErrors = false;\r\n\t\tconst controls = this.socialNetworksForm.controls;\r\n\t\t/** check form */\r\n\t\tif (this.socialNetworksForm.invalid) {\r\n\t\t\tObject.keys(controls).forEach(controlName =>\r\n\t\t\t\tcontrols[controlName].markAsTouched()\r\n\t\t\t);\r\n\t\t\tthis.errormessage = 'Oh snap! Check your data please.';\r\n\t\t\tthis.SocialErrorMesaage.next(this.errormessage);\r\n\t\t\tthis.hasFormErrors = true;\r\n\t\t\tthis.loadingSubject.next(false);\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.errormessage = '';\r\n\t\tthis.SocialErrorMesaage.next(this.errormessage);\r\n\r\n\t\tconst newSocialNetworks = new SocialNetworks();\r\n\t\tnewSocialNetworks.facebook = '';\r\n\t\tnewSocialNetworks.instagram = '';\r\n\t\tnewSocialNetworks.linkedIn = '';\r\n\t\tnewSocialNetworks.twitter = '';\r\n\t\tnewSocialNetworks.linkedIn = controls['linkedIn'].value;\r\n\t\tnewSocialNetworks.facebook = controls['facebook'].value;\r\n\t\tnewSocialNetworks.twitter = controls['twitter'].value;\r\n\t\tnewSocialNetworks.instagram = controls['instagram'].value;\r\n\t\tthis.socialNetworksSubject.next(newSocialNetworks);\r\n\t\tthis.loadingSubject.next(false);\r\n\t}\r\n\r\n\t/**\r\n\t * Close alert\r\n\t *\r\n\t * @param $event: Event\r\n\t */\r\n\tonAlertClose($event) {\r\n\t\tthis.hasFormErrors = false;\r\n\t}\r\n}\r\n","module.exports = \"<div class=\\\"kt-portlet\\\">\\r\\n    <div>\\r\\n        <div class=\\\"kt-form\\\">\\r\\n            <div >\\r\\n \\r\\n                <mat-form-field *ngIf=\\\"allPermissions$\\\">\\r\\n                        <mat-label>Priviliedges</mat-label>\\r\\n                  <mat-select class=\\\"example-select\\\"  [(ngModel)]=\\\"selected\\\" (ngModelChange)=\\\"selectedPriviledgeType($event)\\\" >\\r\\n                    <mat-option  *ngFor=\\\"let role of  allPermissions$\\\" [value]=\\\"role.type\\\" >\\r\\n                        {{role.type}}\\r\\n                    </mat-option>\\r\\n                  </mat-select>\\r\\n                </mat-form-field>\\r\\n              </div>\\r\\n                  \\r\\n<!-- \\r\\n\\r\\n                <mat-form-field>\\r\\n                   \\r\\n                    <mat-select [(ngModel)]=\\\"selected\\\" (ngModelChange)=\\\"selectedPriviledgeType($event)\\\" *ngIf=\\\"allPermissions$\\\" >\\r\\n                        <mat-option  *ngFor=\\\"let role of  allPermissions$.result\\\" [value]=\\\"role.type\\\" >\\r\\n                            {{role.type}}\\r\\n                        </mat-option>\\r\\n                    </mat-select>\\r\\n                </mat-form-field> -->\\r\\n  \\r\\n                <div class=\\\"kt-portlet__body\\\">\\r\\n\\r\\n                    <div class=\\\"kt-separator kt-separator--dashed\\\"></div>\\r\\n                    <div class=\\\"form-group kt-form__group row\\\">\\r\\n                        <div class=\\\"col-lg-12 kt-margin-bottom-20-mobile\\\">\\r\\n                            <div class=\\\"kt-timeline-3 mb-5\\\">\\r\\n                                <div class=\\\"kt-timeline-3__items kt-timeline-3__items--rolePermissions\\\">\\r\\n                                    <div *ngFor=\\\"let _rootRole of rolePermissions\\\" class=\\\"kt-timeline-3__inner\\\">\\r\\n\\r\\n                                        <!-- {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}} -->\\r\\n                                        <!-- <button mat-icon-button>\\r\\n                                        <mat-icon class=\\\"mat-icon-rtl-mirror\\\">expand_more</mat-icon>\\r\\n                                    </button> -->\\r\\n                                        <div class=\\\"kt-timeline-3__item kt-border-bottom-grey kt-py-15 kt-bg-grey\\\">\\r\\n                                            <span class=\\\"kt-timeline-3__item-time\\\">\\r\\n                                                <mat-checkbox [checked]=\\\"_rootRole.isSelected\\\"\\r\\n                                                    (change)=\\\"isSelectedChanged($event, _rootRole)\\\">\\r\\n                                                    {{ _rootRole.title }}</mat-checkbox>\\r\\n                                            </span>\\r\\n                                        </div>\\r\\n                                        <div\\r\\n                                            class=\\\"d-flex align-items-center kt-border-bottom-grey kt-py-15 kt-bg-grey\\\" style=\\\"flex-wrap:wrap;\\\">\\r\\n                                            <div class=\\\"kt-timeline-3__item kt-timeline-3__item-child\\\"\\r\\n                                                *ngFor=\\\"let _childRole of _rootRole._children\\\">\\r\\n                                                <span class=\\\"kt-timeline-3__item-time\\\">\\r\\n                                                    <mat-checkbox [checked]=\\\"_childRole.isSelected\\\"\\r\\n                                                        (change)=\\\"isSelectedChanged($event, _childRole)\\\">\\r\\n                                                        {{ _childRole.key }}</mat-checkbox>\\r\\n                                                </span>\\r\\n                                            </div>\\r\\n                                        </div>\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\"","\r\nimport { Component, OnInit, Inject, ChangeDetectionStrategy, OnDestroy, ChangeDetectorRef } from '@angular/core';\r\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material';\r\n\r\n// Lodash\r\nimport * as _lodash from 'lodash';\r\n// RxJS\r\nimport { Observable, of, Subscription } from 'rxjs';\r\n// Lodash\r\nimport { each, find, some } from 'lodash';\r\n// NGRX\r\nimport { Update } from '@ngrx/entity';\r\nimport { Store, select } from '@ngrx/store';\r\n// State\r\nimport { AppState } from '../../../../../../core/reducers';\r\n// Services and Models\r\nimport {\r\n\tRole,\r\n\tPermission,\r\n\tselectRoleById,\r\n\tRoleUpdated,\r\n\tselectAllPermissions,\r\n\tselectAllRoles,\r\n\tselectLastCreatedRoleId,\r\n\tRoleOnServerCreated,\r\n\r\n} from '../../../../../../core/auth';\r\nimport { PermissionsService, UserService } from '../../../../../../core/auth/_services'\r\nimport { delay } from 'rxjs/operators';\r\nimport { Router } from '@angular/router';\r\n@Component({\r\n\tselector: 'kt-user-roles-list',\r\n\ttemplateUrl: './user-roles-list.component.html',\r\n\tstyleUrls: []\r\n})\r\nexport class UserRolesListComponent implements OnInit {\r\n\t// Public properties\r\n\trole: Role;\r\n\trole$: Observable<Role>;\r\n\thasFormErrors: boolean = false;\r\n\tviewLoading: boolean = false;\r\n\tloadingAfterSubmit: boolean = false;\r\n\tallPermissions$;\r\n\trolePermissions;\r\n\tcurrentUser;\r\n\tselected;\r\n\ttype;\r\n\tuser_id;\r\n\t// Private properties\r\n\tprivate componentSubscriptions: Subscription;\r\n\r\n\t/**\r\n\t * Component constructor\r\n\t *\r\n\t * @param dialogRef: MatDialogRef<RoleEditDialogComponent>\r\n\t * @param data: any\r\n\t * @param store: Store<AppState>\r\n\t */\r\n\tconstructor(\r\n\t\tprivate store: Store<AppState>,\r\n\t\tprivate permission: PermissionsService,\r\n\t\tprivate User: UserService,\r\n\t\tprivate route: Router,\r\n\t\tprivate changeDetectorRefs: ChangeDetectorRef) {\r\n\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @ Lifecycle sequences => https://angular.io/guide/lifecycle-hooks\r\n\t */\r\n\r\n\t/**\r\n\t * On init\r\n\t */\r\n\tngOnInit() {\r\n\r\n\t\tthis.user_id = this.route.url.split('/')[4]\r\n\t\tthis.User.getUserbyId(this.user_id).subscribe(res => {\r\n\t\t\tthis.currentUser = res['users'][0];\r\n\t\t\tthis.User.changeuser(res['users'][0])\r\n\t\t\t\r\n\t\t\tthis.rolePermissions = this.permission.preparePrivilidges()\r\n\r\n\t\t\tthis.checkedPermissions()\r\n\t\t\tthis.currentUser.role\r\n\t\t\tthis.permission.getPriviliedgesType().subscribe(res => {\r\n\t\t\t\tthis.allPermissions$ = res['result']\t\r\n\t\t\t\t\t\t\r\n\t\t\t//\tconsole.log(this.allPermissions$);\r\n\t\t\t\tif (this.currentUser['privilidge']) {\r\n\t\t\t\t\tlet type = this.currentUser['privilidge']['type_id'];\r\n\t\t\t\t\tthis.allPermissions$.forEach(elem => {\r\n\t\t\t\t\t\tif (elem['_id'] == type) {\r\n\t\t\t\t\t\t\tthis.selected = elem['type']\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tthis.changeDetectorRefs.detectChanges();\r\n\t\t});\r\n\t\r\n\r\n\r\n\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * On destroy\r\n\t */\r\n\tngOnDestroy() {\r\n\t\tif (this.componentSubscriptions) {\r\n\t\t\tthis.componentSubscriptions.unsubscribe();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Load permissions\r\n\t */\r\n\tloadPermissions() {\r\n\t\tthis.allPermissions$.subscribe(_allPermissions => {\r\n\t\t\tif (!_allPermissions) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst mainPermissions = _allPermissions.filter(el => !el.parentId);\r\n\t\t\tmainPermissions.forEach((element: Permission) => {\r\n\t\t\t\tconst hasUserPermission = this.role.permissions.some(t => t === element.id);\r\n\t\t\t\tconst rootPermission = new Permission();\r\n\t\t\t\trootPermission.clear();\r\n\t\t\t\trootPermission.isSelected = hasUserPermission;\r\n\t\t\t\trootPermission._children = [];\r\n\t\t\t\trootPermission.id = element.id;\r\n\t\t\t\trootPermission.level = element.level;\r\n\t\t\t\trootPermission.parentId = element.parentId;\r\n\t\t\t\trootPermission.title = element.title;\r\n\t\t\t\tconst children = _allPermissions.filter(el => el.parentId && el.parentId === element.id);\r\n\t\t\t\tchildren.forEach(child => {\r\n\t\t\t\t\tconst hasUserChildPermission = this.role.permissions.some(t => t === child.id);\r\n\t\t\t\t\tconst childPermission = new Permission();\r\n\t\t\t\t\tchildPermission.clear();\r\n\t\t\t\t\tchildPermission.isSelected = hasUserChildPermission;\r\n\t\t\t\t\tchildPermission._children = [];\r\n\t\t\t\t\tchildPermission.id = child.id;\r\n\t\t\t\t\tchildPermission.level = child.level;\r\n\t\t\t\t\tchildPermission.parentId = child.parentId;\r\n\t\t\t\t\tchildPermission.title = child.title;\r\n\t\t\t\t\trootPermission._children.push(childPermission);\r\n\t\t\t\t});\r\n\t\t\t\tthis.rolePermissions.push(rootPermission);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\t/** ACTIONS */\r\n\t/**\r\n\t * Returns permissions ids\r\n\t */\r\n\tpreparePermissionIds(): number[] {\r\n\t\tconst result = [];\r\n\t\teach(this.rolePermissions, (_root: Permission) => {\r\n\t\t\tif (_root.isSelected) {\r\n\t\t\t\tresult.push(_root.id);\r\n\t\t\t\teach(_root._children, (_child: Permission) => {\r\n\t\t\t\t\tif (_child.isSelected) {\r\n\t\t\t\t\t\tresult.push(_child.id);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn result;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns role for save\r\n\t */\r\n\tprepareRole(): Role {\r\n\t\tconst _role = new Role();\r\n\t\t_role.id = this.role.id;\r\n\t\t_role.permissions = this.preparePermissionIds();\r\n\t\t// each(this.assignedRoles, (_role: Role) => _user.roles.push(_role.id));\r\n\t\t_role.title = this.role.title;\r\n\t\t_role.isCoreRole = this.role.isCoreRole;\r\n\t\treturn _role;\r\n\t}\r\n\r\n\t/**\r\n\t * Save data\r\n\t */\r\n\tonSubmit() {\r\n\t\tthis.hasFormErrors = false;\r\n\t\tthis.loadingAfterSubmit = false;\r\n\t\t/** check form */\r\n\t\tif (!this.isTitleValid()) {\r\n\t\t\tthis.hasFormErrors = true;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst editedRole = this.prepareRole();\r\n\t\tif (editedRole.id > 0) {\r\n\t\t\tthis.updateRole(editedRole);\r\n\t\t} else {\r\n\t\t\tthis.createRole(editedRole);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Update role\r\n\t *\r\n\t * @param _role: Role\r\n\t */\r\n\tupdateRole(_role: Role) {\r\n\t\tthis.loadingAfterSubmit = true;\r\n\t\tthis.viewLoading = true;\r\n\t\t/* Server loading imitation. Remove this on real code */\r\n\t\tconst updateRole: Update<Role> = {\r\n\t\t\tid: this.role.id,\r\n\t\t\tchanges: _role\r\n\t\t};\r\n\t\tthis.store.dispatch(new RoleUpdated({\r\n\t\t\tpartialrole: updateRole,\r\n\t\t\trole: _role\r\n\t\t}));\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Create role\r\n\t *\r\n\t * @param _role: Role\r\n\t */\r\n\tcreateRole(_role: Role) {\r\n\t\tthis.loadingAfterSubmit = true;\r\n\t\tthis.viewLoading = true;\r\n\t\tthis.store.dispatch(new RoleOnServerCreated({ role: _role }));\r\n\t\tthis.componentSubscriptions = this.store.pipe(\r\n\t\t\tdelay(1000), // Remove this line\r\n\t\t\tselect(selectLastCreatedRoleId)\r\n\t\t).subscribe(res => {\r\n\t\t\tif (!res) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.viewLoading = false;\r\n\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Close alert\r\n\t *\r\n\t * @param $event: Event\r\n\t */\r\n\tonAlertClose($event) {\r\n\t\tthis.hasFormErrors = false;\r\n\t}\r\n\r\n\t/**\r\n\t * Check is selected changes\r\n\t *\r\n\t * @param $event: Event\r\n\t * @param permission: Permission\r\n\t */\r\n\r\n\tisSelectedChanged($event, permission) {\r\n\t\tconsole.log('permission',permission)\r\n\t\tif (permission._children) {\r\n\t\t\tpermission._children.forEach((elem) => {\r\n\t\t\t\telem['isSelected'] = $event['checked']\r\n\t\t\t});\r\n\t\t}\r\n\t\telse if(permission.key)\r\n\t\t{\r\n\t\t\tpermission['isSelected'] = $event['checked']\r\n\t\t}\r\n\t\t// if (this.checkedSelectedChildern(permission._children)) {\r\n\t\t// \tpermission['isSelected'] = true\r\n\t\t//}\r\n\t\tthis.assignRole()\r\n\t}\r\n\r\n\t/** UI */\r\n\t/**\r\n\t * Returns component title\r\n\t */\r\n\tgetTitle(): string {\r\n\r\n\t\t// tslint:disable-next-line:no-string-throw\r\n\t\treturn `Edit role ''`;\r\n\r\n\r\n\t\t// tslint:disable-next-line:no-string-thro\r\n\t}\r\n\r\n\t/**\r\n\t * Returns is title valid\r\n\t */\r\n\tisTitleValid(): boolean {\r\n\t\treturn (this.role && this.role.title && this.role.title.length > 0);\r\n\t}\r\n\t//this method to checked permissions of user by the all pemissions \r\n\r\n\tcheckedPermissions() {\r\nconsole.log('checked permission',this.currentUser)\r\n           const permissions=[]\r\n\t\t\tif (this.currentUser['privilidge']) {\r\n\t\t\t\tif (this.currentUser['privilidge']['privilidge']) {\r\n\t\t\t\t\tconst privilidge = JSON.parse(this.currentUser['privilidge']['privilidge'])\r\n                    Object.keys(privilidge).forEach(role=>{\r\n\t\t\t\t\t\tObject.keys(privilidge[role]).forEach(pri=>{\r\n\t\t\t\t\t\t\tpermissions.push(privilidge[role][pri])\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t\tpermissions.forEach(item => {\r\n\t\t\t\t\t\tthis.childernPermission(item)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\r\n\t}\r\n\tchildernunPermission(item) {\r\n\t\tconsole.log('vgrgr',this.rolePermissions)\r\n\t\tconst allpermission = []\r\n\r\n\t\tthis.rolePermissions.forEach(elem => {\r\n\t\t\tif (elem['_children']) {\r\n\t\t\t\telem['_children'].forEach(permission => {\r\n\t\t\t\t\tif (item == permission['value']) {\r\n\t\t\t\t\t\tpermission['isSelected'] = false\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn allpermission;\r\n\t}\r\n\r\n\t//this method to combine all permissions\r\n\tchildernPermission(item) {\r\n\t\tconsole.log('vgrgr',this.rolePermissions)\r\n\t\tconst allpermission = []\r\n\r\n\t\tthis.rolePermissions.forEach(elem => {\r\n\t\t\tif (elem['_children']) {\r\n\t\t\t\telem['_children'].forEach(permission => {\r\n\t\t\t\t\tif (item == permission['value']) {\r\n\t\t\t\t\t\tpermission['isSelected'] = true\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn allpermission;\r\n\t}\r\n\tcheckedSelectedChildern(elem) {\r\n\t\tlet checked = 1;\r\n\t\tif (elem['_children']) {\r\n\t\t\telem['_children'].forEach(permission => {\r\n\r\n\t\t\t\tchecked &= permission['isSelected']\r\n\r\n\t\t\t})\r\n\t\t}\r\n\t\tconsole.log(checked)\r\n\t\treturn checked;\r\n\r\n\t}\r\n\r\n\tselectedPermission() {\r\n\t\tlet allpermission = '';\r\n\r\n\t\tthis.rolePermissions.forEach(elem => {\r\n\t\t\telem['_children'].forEach(permission => {\r\n\t\t\t\tif (permission['isSelected']) {\r\n\t\t\t\t\tallpermission += permission['value'] + ','\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\r\n\t\treturn allpermission;\r\n\t}\r\n\tassignRole() {\r\n\t\tlet privilidge = this.selectedPermission()\r\n\t\tconsole.log(privilidge)\r\n\t\tlet type = this.type\r\n\t\tconsole.log('chosse privilidge',type)\r\n\t\tthis.User.updateRolesOfcurrentUser(privilidge, type)\r\n\t}\r\n\r\n\r\n\tselectedPriviledgeType(event) {\r\n\t\tthis.allPermissions$.forEach(item => {\r\n\t\t\tif (this.type == item._id) {\r\n\t\t\t\t//access id of role\r\n\t\t\t\t\r\n\t\t\t\tconsole.log(this.type, item['privilidge'])\r\n\r\n\t\t\t\tif (item['privilidge']) {\r\n\t\t\t\t\tlet permissions = item['privilidge'].split(',')\r\n\t\t\t\t    permissions.forEach(per => {\r\n\t\t\t\t\t\tthis.childernunPermission(per)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tthis.allPermissions$.forEach(item => {\r\n\t\t\tif (this.selected == item.type) {\r\n\t\t\t\t//access id of role\r\n\t\t\t\tthis.type = item['_id']\r\n\t\t\t\tconsole.log(this.type, item['privilidge'])\r\n\r\n\t\t\t\tif (item['privilidge']) {\r\n\t\t\t\t\tlet permissions = item['privilidge'].split(',')\r\n\t\t\t\t permissions.forEach(per => {\r\n\t\t\t\t\t\tthis.childernPermission(per)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t\tthis.assignRole()\r\n\t\tconsole.log('mmm',\tthis.rolePermissions)\r\n\r\n\t}\r\n\r\n}\r\n\r\n\r\n","module.exports = \"<div class=\\\"kt-portlet\\\">\\r\\n  <div class=\\\"kt-portlet__head kt-portlet__head__custom\\\">\\r\\n      <div class=\\\"kt-portlet__head-progress\\\">\\r\\n          <!-- here can place a progress bar-->\\r\\n          <mat-progress-bar mode=\\\"indeterminate\\\" *ngIf=\\\"viewLoading\\\"></mat-progress-bar>\\r\\n      </div>\\r\\n      <div class=\\\"kt-portlet__head-label\\\">\\r\\n          <h3 class=\\\"kt-portlet__head-title\\\">{{title}}</h3>\\r\\n          <span class=\\\"kt-portlet__head-icon kt-hide\\\">\\r\\n              <i class=\\\"la la-gear\\\"></i>\\r\\n          </span>\\r\\n      </div>\\r\\n  </div>\\r\\n  <div class=\\\"kt-form\\\">\\r\\n      <div class=\\\"kt-portlet__body\\\">\\r\\n          <div class=\\\"form-group kt-form__group row\\\">\\r\\n              <div class=\\\"col-lg-12\\\">\\r\\n                  {{message}}\\r\\n              </div>\\r\\n          </div>\\r\\n      </div>\\r\\n      <div class=\\\"kt-portlet__foot kt-portlet__no-border kt-portlet__foot--fit text-right\\\">\\r\\n          <div class=\\\"kt-form__actions kt-form__actions--sm\\\">\\r\\n              <button mat-button (click)=\\\"onNoClick()\\\">Cancel</button>&nbsp;\\r\\n              <button mat-button (click)=\\\"onYesClick()\\\" color=\\\"primary\\\" cdkFocusInitial [disabled]=\\\"viewLoading\\\">Ok</button>\\r\\n          </div>\\r\\n      </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n\\r\\n\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3ZpZXdzL3BhZ2VzL3VzZXItbWFuYWdlbWVudC91c2Vycy91cGRhdGUtbWVzc2FnZS91cGRhdGUtbWVzc2FnZS5jb21wb25lbnQuc2NzcyJ9 */\"","import { Component, Inject, OnInit } from '@angular/core';\r\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material';\r\n\r\n@Component({\r\n  selector: 'kt-update-message',\r\n  templateUrl: './update-message.component.html',\r\n  styleUrls: ['./update-message.component.scss']\r\n})\r\nexport class UpdateMessageComponent implements OnInit {\r\n  viewLoading: boolean = false;\r\n  title;\r\n  message;\r\n\r\n  constructor(\r\n    public dialogRef: MatDialogRef<UpdateMessageComponent>,\r\n\t\t@Inject(MAT_DIALOG_DATA) public data: any\r\n  ) { }\r\n \r\n  ngOnInit() { \r\n    this.dialogRef.disableClose = true;\r\n    this.title=this.data.title;\r\n    this.message=this.data.message;\r\n  }\r\n\r\n  onNoClick(): void {\r\n\t\tthis.dialogRef.close();\r\n\t}\r\n\r\n\t/**\r\n\t * Close dialog with true result\r\n\t */\r\n\tonYesClick(): void {\r\n\t\t/* Server loading imitation. Remove this */\r\n\t\tthis.viewLoading = true;\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.dialogRef.close(true); // Keep only this row\r\n\t\t}, 2500);\r\n\t}\r\n\r\n}\r\n","module.exports = \"\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n<kt-portlet >\\r\\n\\t<div *ngIf=\\\"!user\\\"class=\\\"center\\\">\\r\\n\\t\\t<mat-progress-spinner style=\\\"margin:0 auto;\\\"\\r\\n\\t\\tmode=\\\"indeterminate\\\" diameter=\\\"40\\\">\\r\\n\\t</mat-progress-spinner>\\r\\n\\t</div>\\r\\n\\t<div  *ngIf=\\\"user\\\">\\r\\n\\t<kt-portlet-header [title]=\\\"getComponentTitle()\\\" [class]=\\\"'kt-portlet__head--lg'\\\" [viewLoading$]=\\\"loading$\\\">\\r\\n\\t\\t<ng-container ktPortletTools>\\r\\n\\t\\t\\t<a routerLink='/default/user-management/users' class=\\\"btn btn-secondary kt-margin-r-10\\\" mat-raised-button matTooltip=\\\"Back to the users list\\\">\\r\\n\\t\\t\\t\\t<i class=\\\"la la-arrow-left\\\"></i>\\r\\n\\t\\t\\t\\t<span class=\\\"kt-hidden-mobile\\\">Back</span>\\r\\n\\t\\t\\t</a>\\r\\n\\t\\t\\t<a href=\\\"javascript:;\\\" class=\\\"btn btn-secondary kt-margin-r-10\\\" (click)=\\\"reset()\\\" [disabled]=\\\"selectedTab !== 0\\\" mat-raised-button matTooltip=\\\"Reset changes\\\">\\r\\n\\t\\t\\t\\t<i class=\\\"la la-cog\\\"></i>\\r\\n\\t\\t\\t\\t<span class=\\\"kt-hidden-mobile\\\">Reset</span>\\r\\n\\t\\t\\t</a>\\r\\n\\t\\t\\t<a href=\\\"javascript:;\\\" class=\\\"btn btn-primary kt-margin-r-10\\\" color=\\\"primary\\\"  (click)=\\\"onSumbit(false,true)\\\" mat-raised-button matTooltip=\\\"Save & Continue\\\">\\r\\n\\t\\t\\t\\t<span >Save</span>\\r\\n\\t\\t\\t</a>\\r\\n\\t\\r\\n\\t\\t\\r\\n\\t\\t</ng-container>\\r\\n\\t</kt-portlet-header>\\r\\n\\r\\n\\t<kt-portlet-body>\\r\\n\\t\\t\\r\\n\\r\\n\\t\\t<mat-tab-group [(selectedIndex)]=\\\"selectedTab\\\">\\r\\n\\t\\t\\t<mat-tab [disabled]=\\\"!checkedpermission('getallusers')\\\">\\r\\n\\t\\t\\t\\t<ng-template mat-tab-label>\\r\\n\\t\\t\\t\\t\\t<i class=\\\"mat-tab-label-icon fa fa-user\\\"></i>\\r\\n\\t\\t\\t\\t\\tBasic info\\r\\n\\t\\t\\t\\t</ng-template>\\r\\n\\t\\t\\t\\t<ng-template matTabContent>\\r\\n\\t\\t\\t\\t\\t<!--begin::Form-->\\r\\n\\t\\t\\t\\t\\t<div *ngIf=\\\"user\\\">\\r\\n\\t\\t\\t\\t\\t\\t<form [formGroup]=\\\"userForm\\\" class=\\\"kt-form kt-form--group-seperator-dashed\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<kt-alert *ngIf=\\\"errormessage\\\" type=\\\"warn\\\" [showCloseButton]=\\\"true\\\" [duration]=\\\"10000\\\" (close)=\\\"onAlertClose($event)\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{{errormessage}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</kt-alert>\\r\\n\\t\\t\\t\\t\\t\\t\\t<kt-alert *ngIf=\\\"hasFormErrors\\\" type=\\\"warn\\\" [showCloseButton]=\\\"true\\\" [duration]=\\\"10000\\\" (close)=\\\"onAlertClose($event)\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tOh snap! Change a few things up and try submitting again.\\r\\n\\t\\t\\t\\t\\t\\t\\t</kt-alert>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"kt-form__section kt-form__section--first\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"form-group kt-form__group row\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"col-lg-4 kt-margin-bottom-20-mobile\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<mat-form-field class=\\\"mat-form-field-fluid\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<input matInput  formControlName=\\\"username\\\"/>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<mat-error *ngIf=\\\"userForm.controls['username'].errors?.required\\\"> FullName is\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<strong>required</strong>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</mat-error>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<mat-error *ngIf=\\\"userForm.controls['username'].invalid&&userForm.controls['username'].errors?.pattern\\\"> Please enter\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<strong>characters only</strong>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</mat-error>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<mat-hint align=\\\"start\\\">Please enter\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<strong>Username</strong>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</mat-hint>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</mat-form-field>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"col-lg-4 kt-margin-bottom-20-mobile\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<mat-form-field class=\\\"mat-form-field-fluid\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<input matInput  formControlName=\\\"name\\\"/>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<mat-error *ngIf=\\\"userForm.controls['name'].errors?.required\\\"> Name is\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<strong>required</strong>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</mat-error>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<mat-error *ngIf=\\\"userForm.controls['name'].errors?.pattern\\\"> Please enter\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<strong>characters only</strong>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</mat-error>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<mat-hint align=\\\"start\\\">Please enter\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<strong>Full Name</strong>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</mat-hint>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</mat-form-field>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"col-lg-4 kt-margin-bottom-20-mobile\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<mat-form-field class=\\\"mat-form-field-fluid\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"email\\\" matInput   formControlName=\\\"email\\\"/>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<mat-error *ngIf=\\\"userForm.controls['email'].errors?.required\\\">Email is\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<strong>required</strong>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</mat-error>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<mat-error *ngIf=\\\"userForm.controls['email'].errors?.pattern\\\"> Please enter\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<strong>valid email</strong>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</mat-error>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<mat-hint align=\\\"start\\\">Please enter\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<strong>Email</strong>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</mat-hint>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</mat-form-field>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"form-group kt-form__group row\\\">\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"col-lg-4 kt-margin-bottom-20-mobile\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<mat-form-field class=\\\"mat-form-field-fluid\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<input matInput placeholder=\\\"Enter Phone\\\" formControlName=\\\"phone\\\"/>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<mat-error *ngIf=\\\"userForm.controls['phone'].errors?.pattern||userForm.controls['phone'].errors?.minlength||userForm.controls['phone'].errors?.maxlength\\\"> Please enter\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<strong>valid phone number</strong>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</mat-error> \\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<mat-hint align=\\\"start\\\">Please enter\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<strong>Phone</strong>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</mat-hint>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</mat-form-field>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</form>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<!--end::Form-->\\r\\n\\t\\t\\t\\t</ng-template>\\r\\n\\t\\t\\t</mat-tab>\\r\\n\\t\\t\\t<mat-tab [disabled]=\\\"!checkedpermission('getallusers')\\\" >\\r\\n\\t\\t\\t\\t<ng-template mat-tab-label>\\r\\n\\t\\t\\t\\t\\t<i class=\\\"mat-tab-label-icon fa fa-address-book\\\"></i>\\r\\n\\t\\t\\t\\t\\tUser address\\r\\n\\t\\t\\t\\t</ng-template>\\r\\n\\t\\t\\t\\t<ng-template matTabContent>\\r\\n\\t\\t\\t\\t\\t<kt-alert *ngIf=\\\"errormessage&&!ErrorAdress\\\" type=\\\"warn\\\" [showCloseButton]=\\\"true\\\" [duration]=\\\"10000\\\" (close)=\\\"onAlertClose($event)\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t{{errormessage}}\\r\\n\\t\\t\\t\\t\\t</kt-alert>\\r\\n\\t\\t\\t\\t<kt-alert *ngIf=\\\"ErrorAdress\\\" type=\\\"warn\\\" [showCloseButton]=\\\"true\\\" [duration]=\\\"10000\\\" (close)=\\\"onAlertClose($event)\\\">\\r\\n\\t\\t\\t\\t\\t{{ErrorAdress}}\\r\\n\\t\\t\\t\\t</kt-alert>\\r\\n\\t\\t\\t\\t<kt-address [(addressSubject)]=\\\"addressSubject\\\" [(AdressErrorMessage)]=\\\"AdressErrorMessage\\\"></kt-address>\\r\\n\\t\\t\\t</ng-template>\\r\\n\\t\\t\\t</mat-tab >\\r\\n\\t\\t\\t<mat-tab [disabled]=\\\"!checkedpermission('getallusers')\\\">\\r\\n\\t\\t\\t\\t<ng-template mat-tab-label>\\r\\n\\t\\t\\t\\t\\t<i class=\\\"mat-tab-label-icon fab fa-facebook\\\"></i>\\r\\n\\t\\t\\t\\t\\tSocial Nerworks\\r\\n\\t\\t\\t\\t</ng-template>\\r\\n\\t\\t\\t\\t<ng-template matTabContent>\\r\\n\\t\\t\\t\\t\\t<kt-alert *ngIf=\\\"errormessage&&!SocialError\\\" type=\\\"warn\\\" [showCloseButton]=\\\"true\\\" [duration]=\\\"10000\\\" (close)=\\\"onAlertClose($event)\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t{{errormessage}}\\r\\n\\t\\t\\t\\t\\t</kt-alert>\\r\\n\\t\\t\\t\\t<kt-alert *ngIf=\\\"SocialError\\\" type=\\\"warn\\\" [showCloseButton]=\\\"true\\\" [duration]=\\\"10000\\\" (close)=\\\"onAlertClose($event)\\\">\\r\\n\\t\\t\\t\\t\\t{{SocialError}}\\r\\n\\t\\t\\t\\t</kt-alert>\\r\\n\\t\\t\\t\\t<kt-social-networks [(SocialErrorMesaage)]=\\\"SocialErrorMesaage\\\" [(socialNetworksSubject)]=\\\"socialNetworksSubject\\\"></kt-social-networks>\\r\\n\\t\\t\\t</ng-template>\\r\\n\\t\\t\\t</mat-tab>\\r\\n\\t\\t\\t<mat-tab *ngIf=\\\"chechedRoleAndShiftsTab\\\" [disabled]=\\\"!checkedpermission('getprivilidges')\\\" >\\r\\n\\t\\t\\t\\t<ng-template mat-tab-label>\\r\\n\\t\\t\\t\\t\\t<i class=\\\"mat-tab-label-icon fa fa-unlock\\\"></i>\\r\\n\\t\\t\\t\\t\\tUser roles\\r\\n\\t\\t\\t\\t</ng-template>\\r\\n\\t\\t\\t\\t<ng-template matTabContent>\\r\\n\\t\\t\\t\\t\\t<kt-user-roles-list></kt-user-roles-list>\\r\\n\\t\\t\\t\\t</ng-template>\\r\\n\\t\\t\\t</mat-tab>\\r\\n\\t\\t\\t<mat-tab *ngIf=\\\"chechedRoleAndShiftsTab\\\" [disabled]=\\\"!checkedpermission('getprivilidges')\\\" >\\r\\n\\t\\t\\t\\t<ng-template mat-tab-label>\\r\\n\\t\\t\\t\\t\\t<i class=\\\"mat-tab-label-icon flaticon2-protection\\\"></i>\\r\\n\\t\\t\\t\\t\\tAccess Right\\r\\n\\t\\t\\t\\t</ng-template>\\r\\n\\t\\t\\t\\t<ng-template matTabContent>\\r\\n\\t\\t\\t\\t\\t<kt-accessRight></kt-accessRight>\\r\\n\\t\\t\\t\\t</ng-template>\\r\\n\\t\\t\\t</mat-tab>\\r\\n\\t\\t\\t<mat-tab *ngIf=\\\"chechedRoleAndShiftsTab\\\"  [disabled]=\\\"!checkedpermission('getshifts')\\\">\\r\\n\\t\\t\\t\\t<ng-template mat-tab-label>\\r\\n\\t\\t\\t\\t\\t<i class=\\\"mat-tab-label-icon fa fa-exchange-alt\\\"></i>\\r\\n\\t\\t\\t\\t\\tShifts\\r\\n\\t\\t\\t\\t</ng-template>\\r\\n\\t\\t\\t\\t<ng-template matTabContent>\\r\\n\\t\\t\\t\\t\\t<kt-shifts></kt-shifts>\\r\\n\\t\\t\\t\\t</ng-template>\\r\\n\\t\\t\\t</mat-tab>\\r\\n\\r\\n\\t\\t\\t<!-- <mat-tab *ngIf=\\\"user\\\" [disabled]=\\\"!user || !user.id\\\">\\r\\n\\t\\t\\t\\t<ng-template mat-tab-label>\\r\\n\\t\\t\\t\\t\\t<i class=\\\"mat-tab-label-icon fa fa-exchange-alt\\\"></i>\\r\\n\\t\\t\\t\\t\\tChange password\\r\\n\\t\\t\\t\\t</ng-template>\\r\\n\\t\\t\\t\\t<ng-template matTabContent>\\r\\n\\t\\t\\t\\t\\t<kt-change-password [userId]=\\\"user.id\\\"></kt-change-password>\\r\\n\\t\\t\\t\\t</ng-template>\\r\\n\\t\\t\\t</mat-tab> -->\\r\\n\\t\\t</mat-tab-group>\\r\\n\\t</kt-portlet-body>\\r\\n</div>\\r\\n</kt-portlet>\\r\\n\"","module.exports = \".center {\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  -webkit-transform: translateX(-50%) translateY(-50%);\\n  transform: translateX(-50%) translateY(-50%); }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdmlld3MvcGFnZXMvdXNlci1tYW5hZ2VtZW50L3VzZXJzL3VzZXItZWRpdC9FOlxcR0VNSU5cXGd5bWluLTIuMC1zYWFzLWZyb250ZW5kL3NyY1xcYXBwXFx2aWV3c1xccGFnZXNcXHVzZXItbWFuYWdlbWVudFxcdXNlcnNcXHVzZXItZWRpdFxcdXNlci1lZGl0LmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksa0JBQWtCO0VBQ2xCLFFBQVE7RUFDUixTQUFTO0VBRVQsb0RBQW9EO0VBQ3BELDRDQUE0QyxFQUFBIiwiZmlsZSI6InNyYy9hcHAvdmlld3MvcGFnZXMvdXNlci1tYW5hZ2VtZW50L3VzZXJzL3VzZXItZWRpdC91c2VyLWVkaXQuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY2VudGVyIHtcclxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgIHRvcDogNTAlO1xyXG4gICAgbGVmdDogNTAlO1xyXG4gICAgLW1vei10cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSkgdHJhbnNsYXRlWSgtNTAlKTtcclxuICAgIC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpIHRyYW5zbGF0ZVkoLTUwJSk7XHJcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSkgdHJhbnNsYXRlWSgtNTAlKTtcclxufSJdfQ== */\"","// Angular\r\nimport { Component, OnInit, OnDestroy, Input ,ChangeDetectorRef } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { FormBuilder, FormGroup, Validators, FormControl } from '@angular/forms';\r\nimport { MatDialog, MatTableDataSource, MAT_DIALOG_DATA } from '@angular/material';\r\nimport { UpdateMessageComponent } from '../update-message/update-message.component';\r\n// RxJS\r\nimport { BehaviorSubject, Observable, of, Subscription } from 'rxjs';\r\n// NGRX\r\nimport { Store, select } from '@ngrx/store';\r\nimport { Update } from '@ngrx/entity';\r\nimport { AppState } from '../../../../../core/reducers';\r\n// Layout\r\nimport { SubheaderService, LayoutConfigService } from '../../../../../core/_base/layout';\r\nimport { LayoutUtilsService, MessageType } from '../../../../../core/_base/crud';\r\nimport { UserService } from '../../../../../core/auth/_services'\r\n// Services and Models\r\nimport {\r\n\tUser,\r\n\tUserUpdated,\r\n\tAddress,\r\n\tSocialNetworks,\r\n} from '../../../../../core/auth';\r\nimport { FF_VOLUME_UP } from '@angular/cdk/keycodes';\r\n\r\n\r\n\r\n@Component({\r\n\tselector: 'kt-user-edit',\r\n\ttemplateUrl: './user-edit.component.html',\r\n\tstyleUrls:['./user-edit.component.scss']\r\n})\r\nexport class UserEditComponent implements OnInit, OnDestroy {\r\n\t// Public properties\r\n\tcolor = 'primary';\r\n\tmode = 'determinate';\r\n\tvalue = 50;\r\n\tuserId$: Observable<number>;\r\n\toldUser;\r\n\tuser;\r\n\tuser_id;\r\n\tisDisabled = false\r\n\tchechedRoleAndShiftsTab = true\r\n\tselectedTab: number = 0;\r\n\tloading$: Observable<boolean>;\r\n\taddressSubject = new BehaviorSubject<Address>(new Address());\r\n\tsocialNetworksSubject = new BehaviorSubject(new SocialNetworks());\r\n\tuserForm: FormGroup;\r\n\thasFormErrors: boolean = false;\r\n\t// Private properties\r\n\tprivate subscriptions: Subscription[] = [];\r\n\terrormessage;\r\n\terrormessageUserRoles;\r\n\tAdressErrorMessage = new BehaviorSubject<string>('');\r\n\tErrorAdress;\r\n\tSocialErrorMesaage = new BehaviorSubject<string>('');\r\n\tSocialError;\r\n\r\n\t/**\r\n\t * Component constructor\r\n\t *\r\n\t * @param activatedRoute: ActivatedRoute\r\n\t * @param router: Router\r\n\t * @param userFB: FormBuilder\r\n\t * @param subheaderService: SubheaderService\r\n\t * @param layoutUtilsService: LayoutUtilsService\r\n\t * @param store: Store<AppState>\r\n\t * @param layoutConfigService: LayoutConfigService\r\n\t */\r\n\tconstructor(private activatedRoute: ActivatedRoute,\r\n\t\tpublic dialog: MatDialog,\r\n\t\tprivate router: Router,\r\n\t\tprivate userFB: FormBuilder,\r\n\t\tprivate ChangeDetectorRef: ChangeDetectorRef,\r\n\t\tprivate subheaderService: SubheaderService,\r\n\t\tprivate layoutUtilsService: LayoutUtilsService,\r\n\t\tprivate store: Store<AppState>,\r\n\t\tprivate layoutConfigService: LayoutConfigService,\r\n\t\tprivate userService: UserService,\r\n\t\tprivate changeDetectorRefs: ChangeDetectorRef,\r\n\r\n\t) {\r\n\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @ Lifecycle sequences => https://angular.io/guide/lifecycle-hooks\r\n\t */\r\n\r\n\t/**\r\n\t * On init\r\n\t */\r\n\tngOnInit() {\r\n\t\t\r\n\t\tthis.user_id = this.activatedRoute.snapshot.paramMap.get('id')\r\n\r\n\t\t//this.user_id=this.router.url.split('/')[4]\r\n\t\tconsole.log(this.user_id)\r\n\t\tif (this.activatedRoute.snapshot.queryParamMap.get(\"shift\")) this.selectedTab = 4;\r\n\t\t// this.loading$ = this.store.pipe(select(selectUsersActionLoading));\r\n\t\tconst routeSubscription = this.activatedRoute.params.subscribe(params => {\r\n\t\t\tconst id = params['id'];\r\n\t\t\tthis.selectedTab=0\r\n\t\t\tthis.user_id= params['id'];\r\n\t\t\tconsole.log('id=', id)\r\n\t\t\tif (id && this.user_id) {\r\n\t\t\t\tthis.userService.getUserbyId(id).subscribe(res => {\r\n\t\t\t\t\tif (res) {\r\n\t\t\t\t\t\tif (this.activatedRoute.snapshot.queryParamMap.get('info')) {\r\n\t\t\t\t\t\t\tthis.chechedRoleAndShiftsTab = false\r\n\t\t\t\t\t\t\tif (!this.checkedpermission('editclubinfo'))\r\n\t\t\t\t\t\t\t\tthis.isDisabled = true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tthis.chechedRoleAndShiftsTab = true\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tconsole.log('userrrrr', res)\r\n\t\t\t\t\t\tthis.user = res['users'][0];\r\n\t\t\t\t\t\tthis.userService.changeuser(this.user)\r\n\t\t\t\t\t\tthis.addressSubject.next(this.preparAddressToShow());\r\n\t\t\t\t\t\tthis.socialNetworksSubject.next(this.preparSocialNetworkToShow());\r\n\t\t\t\t\t\tthis.oldUser = Object.assign({}, this.user);\r\n\t\t\t\t\t\tthis.initUser();\r\n\t\t\t\t\t\tthis.preparAddressToShow()\r\n\t\t\t\t\t\tthis.preparSocialNetworkToShow()\r\n\t\t\t\t\t\t//this.soicialNetworksSubject.next(this.preparSocialNetworkToShow())\r\n\t\t\t\t\t\tthis.userService.changeuser(this.user)\r\n\t\t\t\t\t\tthis.ChangeDetectorRef.detectChanges()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t})\r\n\t\tthis.subscriptions.push(routeSubscription);\r\n\t}\r\n\r\n\tngOnDestroy() {\r\n\t\t\tthis.subscriptions.forEach(sb => sb.unsubscribe());\r\n\t}\r\n\r\n\t/**\r\n\t * Init user\r\n\t */\r\n\tinitUser() {\r\n\t\tthis.createForm();\r\n\t\tconsole.log(this.user)\r\n\t\tif (!this.user) {   //id\r\n\t\t\tthis.subheaderService.setTitle('Create user');\r\n\t\t\tthis.subheaderService.setBreadcrumbs([\r\n\t\t\t\t{ title: 'User Management', page: `user-management` },\r\n\t\t\t\t{ title: 'Users', page: `user-management/users` },\r\n\t\t\t\t{ title: 'View and Edit user', page: `user-management/users/add` }\r\n\t\t\t]);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.subheaderService.setTitle('Edit user');\r\n\t\tthis.subheaderService.setBreadcrumbs([\r\n\t\t\t{ title: 'User Management', page: `user-management` },\r\n\t\t\t{ title: 'Users', page: `user-management/users` },\r\n\t\t\t{ title: 'View and Edit user', page: `user-management/users/edit`, }\r\n\t\t]);\r\n\t}\r\n\r\n\t/**\r\n\t * Create form\r\n\t */\r\n\tcreateForm() {\r\n\t\tthis.userForm = this.userFB.group({\r\n\t\t\tusername: new FormControl({ value: this.user.username, disabled: this.isDisabled }, Validators.required),\r\n\t\t\tname: new FormControl({ value: this.user.email, disabled: this.isDisabled }, Validators.required),\r\n\t\t\temail: new FormControl({ value: this.user.username, disabled: this.isDisabled }, Validators.required),\r\n\t\t\tphone: new FormControl({ value: this.user.phone, disabled: this.isDisabled }, Validators.required)\r\n\t\t\t//\tcompanyName: [this.user.companyName],\r\n\t\t\t//\toccupation: [this.user.occupation]\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Redirect to list\r\n\t *\r\n\t */\r\n\tgoBackWithId() {\r\n\t\tconst url = `${this.layoutConfigService.getCurrentMainRoute()}/user-management/users`;\r\n\t\tlet currentUser=JSON.parse(localStorage.getItem('user'));\r\n\t\t\r\n\t\t\r\n\t\tif(!this.activatedRoute.snapshot.queryParamMap.get('info')||!this.user_id==currentUser['_id'])\t\t\r\n\t\tthis.router.navigateByUrl(url, { relativeTo: this.activatedRoute });\t\t\r\n\t}\r\n\r\n\t/**\r\n\t * Refresh user\r\n\t *\r\n\t * @param isNew: boolean\r\n\t * @param id: number\r\n\t */\r\n\trefreshUser(isNew: boolean = false, id = 0) {\r\n\t\tlet url = this.router.url;\r\n\t\tif (!isNew) {\r\n\t\t\tthis.router.navigate([url], { relativeTo: this.activatedRoute });\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\turl = `${this.layoutConfigService.getCurrentMainRoute()}/user-management/users/edit`;\r\n\t\tthis.router.navigateByUrl(url, { relativeTo: this.activatedRoute });\r\n\t}\r\n\r\n\t/**\r\n\t * Reset\r\n\t */\r\n\treset() {\r\n\t\tthis.user = Object.assign({}, this.oldUser);\r\n\t\tthis.createForm();\r\n\t\tthis.hasFormErrors = false;\r\n\t\tthis.userForm.markAsPristine();\r\n\t\tthis.userForm.markAsUntouched();\r\n\t\tthis.userForm.updateValueAndValidity();\r\n\t}\r\n\r\n\t/**\r\n\t * Save data\r\n\t *\r\n\t * @param withBack: boolean\r\n\t */\r\n\tonSumbit(withBack: boolean = false, role = false) {\r\n\r\n\t\tconsole.log('this.selectedTab', this.selectedTab)\r\n\t\tif (this.selectedTab == 0) {\r\n\t\t\tthis.hasFormErrors = false;\r\n\t\t\tconst controls = this.userForm.controls;\r\n\t\t\t/** check form */\r\n\t\t\tconsole.log(controls, 'khjghfgd')\r\n\t\t\tif (this.userForm.invalid) {\r\n\t\t\t\tObject.keys(controls).forEach(controlName => {\r\n\t\t\t\t\tcontrols[controlName].markAsTouched()\r\n\t\t\t\t}\r\n\t\t\t\t);\r\n\r\n\t\t\t\tthis.hasFormErrors = true;\r\n\t\t\t\tthis.selectedTab = 0;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst editedUser = this.prepareUser();\r\n\t\t\tdelete editedUser['_isEditMode']; delete editedUser['_userId'];\r\n\t\t\tlet basicInfo={name:editedUser.name,\r\n\t\t\tusername: editedUser.username,\r\n\t\t\temail:editedUser.email,\r\n\t\t\tphone:editedUser.phone}\r\n\t\t\tObject.keys(basicInfo).forEach((key,index)=>{\r\n\t\t\t\tif(basicInfo[key]==this.oldUser[key]){\r\n\t\t\t\t\tdelete basicInfo[key]\r\n\t\t\t\t//\tconsole.log(basicInfo,'basicInfo')\r\n\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tconsole.log(basicInfo,'basicInfo')\r\n\t\t\t\r\n\t\t\tif (Object.keys(basicInfo).length==0\r\n\t\t\t) {\r\n\t\t\t\t\r\n\t\t\t\tconst dialogRef = this.dialog.open(UpdateMessageComponent, {\r\n\t\t\t\t\twidth: '80%',\r\n\t\t\t\t\tdata: { 'title': 'Basic Information', 'message': 'You do not change any data ,Are you sure you want to exit?' },\r\n\t\t\t\t});\r\n\t\t\t\tdialogRef.afterClosed().subscribe(res => {\r\n\t\t\t\t\tif (!res) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.layoutUtilsService.showActionNotification('no changes')\r\n\t\t\t\t         this.router.navigateByUrl(\"/user-management/users\");\r\n\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\tconst dialogRef = this.dialog.open(UpdateMessageComponent, {\r\n\t\t\t\t\twidth: '80%',\r\n\t\t\t\t\tdata: { 'title': 'Basic Information', 'message': 'Are you sure you want to update user data?' },\r\n\t\t\t\t});\r\n\t\t\t\tdialogRef.afterClosed().subscribe(res => {\r\n\t\t\t\t\tif (!res) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tthis.userService.updateUserData(this.user.pub_key,basicInfo).subscribe(res => {\r\n\t\t\t\t\t\t\tif (res['result'] == true) {\r\n\t\t\t\t\t\t\t\tthis.updateUser(editedUser, withBack, `User successfully has been saved.`);\r\n\t\t\t\t\t\t\t\tthis.router.navigateByUrl(\"/default/user-management/users\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (res['result'] == false) {\r\n\t\t\t\t\t\t\t\tthis.errormessage = res['error'];\r\n\t\t\t\t\t\t\t\tthis.changeDetectorRefs.detectChanges();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t} else if (this.selectedTab == 1) {\r\n\t\t\tif (this.checkedpermission('updateuserdata')) {\r\n\t\t\t\tlet editedUser = this.addressSubject.value;\r\n\t\t\t\tif (this.AdressErrorMessage.value != '') {\r\n\t\t\t\t\tthis.ErrorAdress = this.AdressErrorMessage.value;\r\n\t\t\t\t\tconsole.log(this.AdressErrorMessage.value)\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else if (editedUser.addressLine == this.user.address.addressLine &&\r\n\t\t\t\t\teditedUser.city == this.user.address.city &&\r\n\t\t\t\t\teditedUser.state == this.user.address.state &&\r\n\t\t\t\t\teditedUser.postCode == this.user.address.postCode) \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t \r\n\t\t\t\t\t\tconst dialogRef = this.dialog.open(UpdateMessageComponent, {\r\n\t\t\t\t\t\t\twidth: '80%',\r\n\t\t\t\t\t\t\tdata: { 'title': 'Address', 'message': 'You do not change any data ,Are you sure you want to exit?' },\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tdialogRef.afterClosed().subscribe(res => {\r\n\t\t\t\t\t\t\tif (!res) {\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.layoutUtilsService.showActionNotification('no changes')\r\n\t\t\t\t\t\t\t\tthis.router.navigateByUrl(\"/default/user-management/users\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\r\n\t\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst dialogRef = this.dialog.open(UpdateMessageComponent, {\r\n\t\t\t\t\t\twidth: '80%',\r\n\t\t\t\t\t\tdata: { 'title': 'Address', 'message': 'Are you sure you want to update user data?' },\r\n\t\t\t\t\t});\r\n\t\t\t\t\tdialogRef.afterClosed().subscribe(res => {\r\n\t\t\t\t\t\tif (!res) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.userService.updateUserData(this.user.pub_key,editedUser).subscribe(res => {\r\n\t\t\t\t\t\t\t\tif (res['result'] == true) {\r\n\t\t\t\t\t\t\t\t\tthis.updateUser(editedUser, true, `User successfully has been saved.`);\r\n\t\t\t\t\t\t\t\t\tthis.router.navigateByUrl(\"/user-management/users\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (res['result'] == false) {\r\n\t\t\t\t\t\t\t\t\tthis.errormessage = res['error'];\r\n\t\t\t\t\t\t\t\t\tthis.changeDetectorRefs.detectChanges();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\talert('Sorry,You do not have permission to update user')\r\n\t\t\t}\r\n\r\n\t\t} else if (this.selectedTab == 2) {\r\n\t\t\tif (this.checkedpermission('updateuserdata')) {\r\n\t\t\t\tlet editedUser = this.socialNetworksSubject.value;\r\n\t\t\t\tif (this.SocialErrorMesaage.value != '') {\r\n\t\t\t\t\tthis.ErrorAdress = this.SocialErrorMesaage.value;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else if (editedUser.linkedIn == this.user.socialNetworks.linkedIn &&\r\n\t\t\t\t\teditedUser.facebook == this.user.socialNetworks.facebook &&\r\n\t\t\t\t\teditedUser.twitter == this.user.socialNetworks.twitter &&\r\n\t\t\t\t\teditedUser.instagram == this.user.socialNetworks.instagram) \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t \r\n\t\t\t\t\t\tconst dialogRef = this.dialog.open(UpdateMessageComponent, {\r\n\t\t\t\t\t\t\twidth: '80%',\r\n\t\t\t\t\t\t\tdata: { 'title': 'socialNetworks', 'message': 'You do not change any data ,Are you sure you want to exit?' },\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tdialogRef.afterClosed().subscribe(res => {\r\n\t\t\t\t\t\t\tif (!res) {\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.layoutUtilsService.showActionNotification('no changes')\r\n\t\t\t\t\t\t\t\tthis.router.navigateByUrl(\"/default/user-management/users\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\r\n\t\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst dialogRef = this.dialog.open(UpdateMessageComponent, {\r\n\t\t\t\t\t\twidth: '80%',\r\n\t\t\t\t\t\tdata: { 'title': 'socialNetworks', 'message': 'Are you sure you want to update user data?' },\r\n\t\t\t\t\t});\r\n\t\t\t\t\tdialogRef.afterClosed().subscribe(res => {\r\n\t\t\t\t\t\tif (!res) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.userService.updateUserData(this.user.pub_key,editedUser).subscribe(res => {\r\n\t\t\t\t\t\t\t\tif (res['result'] == true) {\r\n\t\t\t\t\t\t\t\t\tthis.updateUser(editedUser, true, `User successfully has been saved.`);\r\n\t\t\t\t\t\t\t\t\tthis.router.navigateByUrl(\"/default/user-management/users\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (res['result'] == false) {\r\n\t\t\t\t\t\t\t\t\tthis.errormessage = res['error'];\r\n\t\t\t\t\t\t\t\t\tthis.changeDetectorRefs.detectChanges();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\talert('Sorry,You do not have permission to update user')\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\telse if (this.selectedTab === 3) {\r\n\r\n\t\t\tif (role) {\r\n\t\t\t\tconst editedUser = this.prepareUser();\r\n\t\t\t\tthis.userService.currentUser.subscribe(res => {\r\n\t\t\t\t\tif (res) {\r\n\t\t\t\t\t\tif (this.user['privilidge']) {\r\n\t\t\t\t\t\t\tif (this.checkedpermission('editprivilidges')) {\r\n\r\n\t\t\t\t\t\t\t\tif (!res['role'].typeOfRole) {\r\n\t\t\t\t\t\t\t\t\tres['role']['typeOfRole'] = this.user['privilidge']['type_id']\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthis.userService.updateUserPrvilidge(this.user['privilidge']['id'], { privilidge: res['role'].privilidge, type: res['role'].typeOfRole }).subscribe(res => {\r\n\t\t\t\t\t\t\t\t\tif (res['result']) {\r\n\t\t\t\t\t\t\t\t\t\tthis.updateUser(editedUser, true, `User successfully has been saved.`)\r\n\r\n\t\t\t\t\t\t\t\t\t\t//this.showToast('secondary ','User successfully has been saved')\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\t\tthis.updateUser(editedUser, false, `Sorry user hasnt been saved ,try again.`)\r\n\t\t\t\t\t\t\t\t\t\t//this.showToast('secondary ','Sorry user hasnt been saved ,try again')\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tthis.selectedTab = 0;\r\n\t\t\t\t\t\t\t\t\t//\tthis.userService.changeuser(null)\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\talert('Sorry,You dont have permission to update privilidge')\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tif (this.checkedpermission('addprivilidges')) {\r\n\t\t\t\t\t\t\t\tif (!res['role']) {\r\n\t\t\t\t\t\t\t\t\talert('You must choose privilige before saving')\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\tif (!res['role'].privilidge || !res['role'].typeOfRole || !this.user['pub_key']) {\r\n\t\t\t\t\t\t\t\t\t\talert('Sorry,incorrect data try again')\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\t\tthis.userService.AddUserPrivilidge(res['role'].privilidge, res['role'].typeOfRole, this.user['pub_key']).subscribe(res => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (res['result']) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('userrr', this.user)\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis.updateUser(editedUser, true, `User successfully has been saved.`)\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t//this.showToast('secondary ','User successfully has been saved')\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis.updateUser(editedUser, false, `Sorry user hasnt been saved ,try again.`)\r\n\t\t\t\t\t\t\t\t\t\t\t\t//this.showToast('secondary ','Sorry user hasnt been saved ,try again')\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tthis.selectedTab = 0;\r\n\t\t\t\t\t\t\t\t\t\t\t//\tthis.userService.changeuser(null)\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\talert('Sorry,You dont have permission to add privilidge')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}).unsubscribe()\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns prepared data for save\r\n\t */\r\n\tprepareUser(): any {\r\n\t\tconst controls = this.userForm.controls;\r\n\r\n\t\tconsole.log('edit user', this.user)\r\n\t\tif (this.user) {\r\n\t\t\tthis.user.username = controls['username'].value;\r\n\t\t\tthis.user.email = controls['email'].value;\r\n\r\n\t\t\tthis.user.name = controls['name'].value;\r\n\t\t\tthis.user.phone = controls['phone'].value;\r\n\t\t\treturn {\r\n\t\t\t\temail: this.user.email, username: this.user.username, name: this.user.name,phone: this.user.phone, pub_key: this.user['pub_key'],\r\n\t\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t};\r\n\t/**\r\n\t * Add User\r\n\t *\r\n\t * @param _user: User\r\n\t * @param withBack: boolean\r\n\t */\r\n\taddUser(_user: User, withBack: boolean = false) {\r\n\t\t// this.store.dispatch(new UserOnServerCreated({ user: _user }));\r\n\t\t// const addSubscription = this.store.pipe(select(selectLastCreatedUserId)).subscribe(newId => {\r\n\t\tconst message = `New user successfully has been added.`;\r\n\t\tthis.layoutUtilsService.showActionNotification(message, MessageType.Create, 5000, true, true);\r\n\r\n\t\tif (withBack) {\r\n\t\t\tthis.goBackWithId();\r\n\t\t} else {\r\n\t\t\tthis.refreshUser(true);\r\n\t\t}\r\n\r\n\t\t// });\r\n\t\t// this.subscriptions.push(addSubscription);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Update user\r\n\t *\r\n\t * @param _user: User\r\n\t * @param withBack: boolean\r\n\t */\r\n\tupdateUser(_user, withBack: boolean = false, message) {\r\n\t\t// Update User\r\n\t\t// tslint:disable-next-line:prefer-const\r\n\r\n\t\t// const updatedUser: Update<User> = {\r\n\t\t// \tid: _user._userId,\r\n\t\t// \tchanges: _user\r\n\t\t// };\r\n\t\t// this.store.dispatch(new UserUpdated( { partialUser: updatedUser, user: _user }));\r\n\r\n\t\tthis.layoutUtilsService.showActionNotification(message, MessageType.Update, 5000, true, true);\r\n\t\tif (withBack) {\r\n\t\t\tthis.goBackWithId();\r\n\t\t} else {\r\n\t\t\tthis.refreshUser(true);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns component title\r\n\t */\r\n\tgetComponentTitle() {\r\n\t\tlet\tresult = `Edit user - ${this.user.name}`;\r\n\t\tlet currentUser=JSON.parse(localStorage.getItem('user'));\r\n\t\tif(this.user_id==currentUser['_id']){\r\n\t\t\tresult = `My Profile `;\r\n\t\t   \r\n\t\t}\r\n\t\telse if(this.activatedRoute.snapshot.queryParamMap.get('info')){\r\n\t\t\tresult='Club Information'\r\n\t\t}\r\n\t\t\r\n\t\treturn result;\r\n\t}\r\n\r\n\t/**\r\n\t * Close Alert\r\n\t *\r\n\t * @param $event: Event\r\n\t */\r\n\tonAlertClose($event) {\r\n\t\tthis.hasFormErrors = false;\r\n\t\tthis.errormessage = '';\r\n\t\tthis.errormessageUserRoles = '';\r\n\t\tthis.ErrorAdress = '';\r\n\t\tthis.SocialError = '';\r\n\t}\r\n\r\n\tpreparSocialNetworkToShow() {\r\n\t\tif (this.user) {\r\n\t\t\tconst SocialNetworks = {\r\n\t\t\t\tlinkedIn: this.user.linkedIn\r\n\t\t\t\t, facebook: this.user.facebook,\r\n\t\t\t\ttwitter: this.user.twitter,\r\n\t\t\t\tinstagram: this.user.instagram\r\n\t\t\t}\r\n\t\t\tthis.user.socialNetworks = SocialNetworks;\r\n\t\t\treturn SocialNetworks\r\n\t\t}\r\n\t\telse return { linkedIn: '', twitter: '', instagram: '', facebook: '' }\r\n\t}\r\n\tpreparAddressToShow() {\r\n\t\tif (this.user) {\r\n\t\t\tconst Address  = {\r\n\t\t\t\t'addressLine': this.user.addressLine,\r\n\t\t\t\t'city': this.user.city,\r\n\t\t\t\t'state': this.user.state,\r\n\t\t\t\t'postCode': this.user.postCode\r\n\t\t\t}\r\n\t\t\tthis.user.address = Address\r\n\t\t\treturn Address\r\n\t\t}\r\n\t\telse return { 'addressLine': '', 'city': '', 'state': '', 'postCode': '' }\r\n\t}\r\n\tshowToast(type, text) {\r\n\r\n\t\t// this.toaster.open({\r\n\t\t//   text: text,\r\n\t\t//   caption:'Edit user role',\r\n\t\t//   type: type,\r\n\t\t// });\r\n\t}\r\n\tcheckedpermission(key: String) {\r\n\t\tlet checked = false\r\n\t\tif (localStorage.getItem('user')) {\r\n\r\n\t\t\tif (JSON.parse(localStorage.getItem('user'))) {\r\n\t\t\t\tlet user = JSON.parse(localStorage.getItem('user'))\r\n\r\n\t\t\t\tif (user['allPrivilidge']) {\r\n\t\t\t\t\tconst privilidge = user['allPrivilidge']\r\n\r\n\t\t\t\t\tObject.keys(privilidge).forEach(role => {\r\n\t\t\t\t\t\tObject.keys(privilidge[role]).forEach(pri => {\r\n\r\n\t\t\t\t\t\t\tlet per = (privilidge[role][pri].toString()).trim()\r\n\t\t\t\t\t\t\tif (key.trim() == per) {\r\n\t\t\t\t\t\t\t\tchecked = true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn checked\r\n\t}\r\n\r\n\r\n\tupdateBasicInfo(editedUser) {\r\n\t\tthis.hasFormErrors = false;\r\n\t\tconst controls = this.userForm.controls;\r\n\t\t/** check form */\r\n\r\n\t\tif (this.userForm.invalid) {\r\n\t\t\tObject.keys(controls).forEach(controlName => {\r\n\t\t\t\tcontrols[controlName].markAsTouched()\r\n\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\tthis.hasFormErrors = true;\r\n\t\t\tthis.selectedTab = 0;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tconsole.log(editedUser)\r\n\t\tthis.userService.updateUserData(this.user._id,editedUser).subscribe(res => {\r\n\t\t\tif (res['result']) {\r\n\t\t\t\tconsole.log('userrr', this.user)\r\n\t\t\t\tthis.updateUser(editedUser, true, `User successfully has been saved.`)\r\n\t\t\t\t//this.showToast('secondary ','User successfully has been saved')\r\n\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.updateUser(editedUser, false, `Sorry user hasnt been saved ,try again.`)\r\n\t\t\t\t//this.showToast('secondary ','Sorry user hasnt been saved ,try again')\r\n\t\t\t}\r\n\t\t\tthis.selectedTab = 0;\r\n\t\t\t//this.userService.changeuser(null)\r\n\t\t});\r\n\t}\r\n}\r\n","module.exports = \"<kt-portlet>\\r\\n\\t<!-- PORTLET LOADING | Binded to TABLE Datasource -->\\r\\n\\t<!-- See prop => '~/core/_crud/models/data-sources/_base.datasource.ts' (loading$) -->\\r\\n\\t<kt-portlet-header [title]=\\\"'Users list'\\\" [class]=\\\"'kt-portlet__head--lg'\\\">\\r\\n\\t\\t<ng-container ktPortletTools>\\r\\n\\t\\t\\t<button [routerLink]=\\\"['/default/user-management/invitations']\\\" mat-raised-button color=\\\"primary\\\" matTooltip=\\\"send new invitation\\\">Invite\\r\\n\\t\\t\\t\\tuser</button>\\r\\n\\t\\t\\t<!-- Buttons (Material Angular) | See off.documenations 'https://material.angular.io/components/button/overview' -->\\r\\n\\t\\t\\t<!-- mat-raised-button | Rectangular contained button w/ elevation  -->\\r\\n\\t\\t</ng-container>\\r\\n\\t</kt-portlet-header>\\r\\n\\t<!-- end::Header -->\\r\\n\\t<kt-portlet-body>\\r\\n\\t\\t\\t<div class=\\\"kt-form\\\">\\r\\n\\t\\t\\t\\t<!-- start::FILTERS -->\\r\\n\\t\\t\\t\\t<div class=\\\"kt-form__filtration\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"row align-items-center\\\">\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"col-md-2 kt-margin-bottom-10-mobile\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<!-- 'm  margin-bottom-10-mobile' for adaptive make-up  -->\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"kt-form__control\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<mat-form-field class=\\\"mat-form-field-fluid\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<mat-select [(value)]=\\\"filterStatus\\\" (selectionChange)=\\\"applyFilter()\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<mat-option value=\\\"\\\">All</mat-option>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<mat-option value=\\\"Active\\\">Active</mat-option>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<mat-option value=\\\"Deactive\\\">Deactive</mat-option>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</mat-select>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<mat-hint align=\\\"start\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<strong>Filter</strong> by Status\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</mat-hint>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</mat-form-field>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"col-md-2 kt-margin-bottom-10-mobile\\\">\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"kt-form__control\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<mat-form-field class=\\\"mat-form-field-fluid\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<mat-select [(value)]=\\\"filterRole\\\" (selectionChange)=\\\"applyFilter()\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<mat-option value=\\\"\\\">All</mat-option>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<mat-option *ngFor=\\\"let value of getallroles\\\"  [value]=\\\"value.type\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{{value.type}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</mat-option>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</mat-select>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<mat-hint align=\\\"start\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<strong>Filter</strong> by Type\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</mat-hint>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</mat-form-field>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"col-md-2 kt-margin-bottom-10-mobile\\\">\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"kt-form__control\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<mat-form-field class=\\\"mat-form-field-fluid\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<mat-select [(value)]=\\\"filterPrivilidge\\\" (selectionChange)=\\\"applyFilter()\\\" multiple>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<mat-optgroup *ngFor=\\\"let group of allPrivilidge\\\" [label]=\\\"group.key\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<mat-option *ngFor=\\\"let item of group.value\\\"  [value]=\\\"item.value\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{{item.key}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</mat-option>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</mat-optgroup>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</mat-select>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<mat-hint align=\\\"start\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<strong>Filter</strong> by Permission\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</mat-hint>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</mat-form-field>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"col-md-2 kt-margin-bottom-10-mobile\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<mat-form-field class=\\\"mat-form-field-fluid\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<input matInput placeholder=\\\"Search user\\\" [(ngModel)]=\\\"SearchKey\\\" placeholder=\\\"Search\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t(keyup)=\\\"applyFilter()\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<button mat-button matSuffix mat-icon-button aria-label=\\\"Clear\\\" *ngIf=\\\"SearchKey\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t(click)=\\\"onSearchClear()\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<mat-icon>close</mat-icon>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<mat-hint align=\\\"start\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<strong>Search</strong> in all fields\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</mat-hint>\\r\\n\\t\\t\\t\\t\\t\\t\\t</mat-form-field>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<!-- end::FILTERS -->\\r\\n\\r\\n\\r\\n\\t\\t\\t<!-- start::GROUP ACTIONS -->\\r\\n\\t\\t\\t<!-- Group actions list: 'Delete selected' | 'Fetch selected' | 'Update status for selected' -->\\r\\n\\t\\t\\t<!-- Group actions are shared for all LISTS -->\\r\\n\\t\\t\\t<div class=\\\"row align-items-center collapse kt-form__group-actions kt-margin-top-20 kt-margin-bottom-20\\\"\\r\\n\\t\\t\\t\\t[ngClass]=\\\"{'show' : selection.selected.length > 0}\\\">\\r\\n\\t\\t\\t\\t<!-- We show 'Group Actions' div if smth are selected -->\\r\\n\\t\\t\\t\\t<div class=\\\"col-xl-12\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"kt-form__group kt-form__group--inline\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"kt-form__label kt-form__label-no-wrap\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<label class=\\\"kt--font-bold kt-font-danger-\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<span translate=\\\"ECOMMERCE.COMMON.SELECTED_RECORDS_COUNT\\\"></span> {{ selection.selected.length }} -->\\r\\n\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t<!-- selectedCountsTitle => function from codeBehind (users-list.component.ts file) -->\\r\\n\\t\\t\\t\\t\\t\\t\\t<!-- selectedCountsTitle => just returns title of selected items count -->\\r\\n\\t\\t\\t\\t\\t\\t\\t<!-- for example: Selected records count: 4 -->\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"kt-form__control kt-form__group--inline\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<!-- <button (click)=\\\"fetchUsers()\\\" mat-raised-button matTooltip=\\\"Fetch selected users\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"mat-button-mt-4\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<mat-icon>clear_all</mat-icon>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tFetch Selected\\r\\n\\t\\t\\t\\t\\t\\t\\t</button> -->\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t<button (click)=\\\"activeallusers('Deactive')\\\" mat-raised-button matTooltip=\\\"Fetch selected users\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"mat-button-mt-4\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<mat-icon>delete</mat-icon>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tDeactive\\r\\n\\t\\t\\t\\t\\t\\t\\t</button>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t<button (click)=\\\"activeallusers('Active')\\\" mat-raised-button matTooltip=\\\"Fetch selected users\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"mat-button-mt-4\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<mat-icon>cached</mat-icon>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tActive\\r\\n\\t\\t\\t\\t\\t\\t\\t</button>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<!-- end::GROUP ACTIONS -->\\r\\n\\t\\t</div>\\r\\n\\t\\t<!-- end::FILTERS & GROUP ACTIONS -->\\r\\n\\r\\n\\t\\t<!-- MATERIAL TABLE | Binded to datasources -->\\r\\n\\t\\t<!-- See off.documentations 'https://material.angular.io/components/table/overview' -->\\r\\n\\t\\t<div class=\\\"mat-table__wrapper\\\">\\r\\n\\t\\t\\t<mat-table class=\\\"lmat-elevation-z8\\\" #table [dataSource]=\\\"listData\\\"\\r\\n\\t\\t\\t\\tmatSort\\r\\n\\t\\t\\t\\t#sort1=\\\"matSort\\\"\\r\\n\\t\\t\\t\\tmatSortActive=\\\"id\\\"\\r\\n\\t\\t\\t\\tmatSortDirection=\\\"asc\\\"\\r\\n\\t\\t\\t\\tmatSortDisableClear>\\r\\n\\t\\t\\t\\t<!-- Checkbox Column -->\\r\\n\\r\\n\\t\\t\\t\\t<!-- Table with selection -->\\r\\n\\t\\t\\t\\t<!-- https://run.stackblitz.com/api/angular/v1?file=app%2Ftable-selection-example.ts -->\\r\\n\\t\\t\\t\\t<ng-container matColumnDef=\\\"select\\\">\\r\\n\\t\\t\\t\\t\\t<mat-header-cell *matHeaderCellDef class=\\\"mat-column-checkbox\\\">\\r\\n\\t\\t\\t\\t\\t\\t<mat-checkbox (change)=\\\"$event ? masterToggle() : null\\\" [checked]=\\\"selection.hasValue() && isAllSelected()\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t[indeterminate]=\\\"selection.hasValue() && !isAllSelected()\\\">\\r\\n\\t\\t\\t\\t\\t\\t</mat-checkbox>\\r\\n\\t\\t\\t\\t\\t</mat-header-cell>\\r\\n\\t\\t\\t\\t\\t<mat-cell *matCellDef=\\\"let row\\\" class=\\\"mat-column-checkbox\\\">\\r\\n\\t\\t\\t\\t\\t\\t<mat-checkbox (click)=\\\"$event.stopPropagation()\\\" (change)=\\\"$event ? selection.toggle(row) : null\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t[checked]=\\\"selection.isSelected(row)\\\">\\r\\n\\t\\t\\t\\t\\t\\t</mat-checkbox>\\r\\n\\t\\t\\t\\t\\t</mat-cell>\\r\\n\\t\\t\\t\\t</ng-container>\\r\\n\\r\\n\\t\\t\\t\\t<ng-container matColumnDef=\\\"id\\\">\\r\\n\\t\\t\\t\\t\\t<!-- ATTRIBUTE mat-sort-header  for sorting | https://material.angular.io/components/sort/overview -->\\r\\n\\t\\t\\t\\t\\t<mat-header-cell (click)=\\\"applyFilter('id')\\\" *matHeaderCellDef mat-sort-header>#</mat-header-cell>\\r\\n\\t\\t\\t\\t\\t<mat-cell *matCellDef=\\\"let user\\\">{{user.increment}}</mat-cell>\\r\\n\\t\\t\\t\\t</ng-container>\\r\\n\\r\\n\\t\\t\\t\\t<ng-container matColumnDef=\\\"username\\\">\\r\\n\\t\\t\\t\\t\\t<mat-header-cell (click)=\\\"applyFilter('username')\\\" *matHeaderCellDef mat-sort-header>Username</mat-header-cell>\\r\\n\\t\\t\\t\\t\\t<mat-cell *matCellDef=\\\"let user\\\">{{user.username}}</mat-cell>\\r\\n\\t\\t\\t\\t</ng-container>\\r\\n\\r\\n\\t\\t\\t\\t<ng-container matColumnDef=\\\"email\\\">\\r\\n\\t\\t\\t\\t\\t<mat-header-cell (click)=\\\"applyFilter('email')\\\" *matHeaderCellDef mat-sort-header class=\\\"email-cell\\\">Email</mat-header-cell>\\r\\n\\t\\t\\t\\t\\t<mat-cell *matCellDef=\\\"let user\\\" class=\\\"email-cell\\\">\\r\\n\\t\\t\\t\\t\\t\\t<a  class=\\\"kt-link\\\">{{user.email}}</a>\\r\\n\\t\\t\\t\\t\\t</mat-cell>\\r\\n\\t\\t\\t\\t</ng-container>\\r\\n\\r\\n\\t\\t\\t\\t<ng-container matColumnDef=\\\"fullname\\\">\\r\\n\\t\\t\\t\\t\\t<mat-header-cell (click)=\\\"applyFilter('name')\\\" *matHeaderCellDef mat-sort-header >Full name</mat-header-cell>\\r\\n\\t\\t\\t\\t\\t<mat-cell *matCellDef=\\\"let user\\\">{{user.name}}</mat-cell>\\r\\n\\t\\t\\t\\t</ng-container>\\r\\n\\r\\n\\t\\t\\t\\t<ng-container matColumnDef=\\\"_roles\\\">\\r\\n\\t\\t\\t\\t\\t<mat-header-cell (click)=\\\"applyFilter('role')\\\" *matHeaderCellDef mat-sort-header >Roles</mat-header-cell>\\r\\n\\t\\t\\t\\t\\t<mat-cell *matCellDef=\\\"let user\\\">\\r\\n\\t\\t\\t\\t\\t\\t<span>{{user.role}}</span>\\r\\n\\t\\t\\t\\t\\t</mat-cell>\\r\\n\\t\\t\\t\\t</ng-container>\\r\\n\\r\\n\\t\\t\\t\\t<ng-container matColumnDef=\\\"actions\\\">\\r\\n\\t\\t\\t\\t\\t<mat-header-cell *matHeaderCellDef>Actions</mat-header-cell>\\r\\n\\t\\t\\t\\t\\t<mat-cell *matCellDef=\\\"let user\\\">\\r\\n\\t\\t\\t\\t\\t\\t<button *ngIf=\\\"checkedpermission('update')\\\" (click)=\\\"editUser(user)\\\" mat-icon-button color=\\\"primary\\\" matTooltip=\\\"Edit user\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<mat-icon>create</mat-icon>\\r\\n\\t\\t\\t\\t\\t\\t</button>\\r\\n\\t\\t\\t\\t\\t\\t<button *ngIf=\\\"checkedpermission('del') && user.status=='Deactive'\\\" (click)=\\\"activateuser(user.pub_key,'Active')\\\" mat-icon-button color=\\\"primary\\\"  matTooltip=\\\"Activate User\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<mat-icon>cached</mat-icon>\\r\\n\\t\\t\\t\\t\\t\\t</button>\\r\\n\\t\\t\\t\\t\\t\\t<button *ngIf=\\\"checkedpermission('del') && user.status=='Active'\\\" mat-icon-button color=\\\"warn\\\" matTooltip=\\\"Deactive user\\\" type=\\\"button\\\" (click)=\\\"activateuser(user.pub_key,'Deactive')\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<mat-icon>delete</mat-icon>\\r\\n\\t\\t\\t\\t\\t\\t</button>\\r\\n\\r\\n\\t\\t\\t\\t\\t</mat-cell>\\r\\n\\t\\t\\t\\t</ng-container>\\r\\n\\t\\t\\t\\t<ng-container matColumnDef=\\\"loading\\\">\\r\\n\\t\\t\\t\\t\\t<mat-footer-cell *matFooterCellDef colspan=\\\"6\\\">\\r\\n\\t\\t\\t\\t\\t\\tLoading...\\r\\n\\t\\t\\t\\t\\t</mat-footer-cell>\\r\\n\\t\\t\\t\\t</ng-container>\\r\\n\\t\\t\\t\\t<ng-container matColumnDef=\\\"NoData\\\">\\r\\n\\t\\t\\t\\t\\t<mat-footer-cell *matFooterCellDef colspan=\\\"6\\\">\\r\\n\\t\\t\\t\\t\\t\\tNo Data\\r\\n\\t\\t\\t\\t\\t</mat-footer-cell>\\r\\n\\t\\t\\t\\t</ng-container>\\r\\n\\t\\t\\t\\t<mat-header-row *matHeaderRowDef=\\\"displayedColumns\\\"></mat-header-row>\\r\\n\\r\\n\\t\\t\\t\\t<mat-row *matRowDef=\\\"let row; columns: displayedColumns\\\"></mat-row>\\r\\n\\t\\t\\t\\t<mat-footer-row *matFooterRowDef=\\\"['loading']\\\" [ngClass]=\\\"{'hide':listData!=null}\\\"></mat-footer-row>\\r\\n\\t\\t\\t\\t<mat-footer-row *matFooterRowDef=\\\"['NoData']\\\"  [ngClass]=\\\"{hide:checkedListData()}\\\">\\r\\n\\t\\t\\t\\t</mat-footer-row>\\r\\n\\t\\t\\t</mat-table>\\r\\n\\t\\t\\t<mat-paginator (page)=\\\"nextPage($event)\\\" [pageSizeOptions]=\\\"[2,10,25,100]\\\" [pageSize]=\\\"5\\\"></mat-paginator>\\r\\n\\t\\t</div>\\r\\n\\t\\t<!-- end: BOTTOM -->\\r\\n\\t</kt-portlet-body>\\r\\n\\t<!-- end::Body -->\\r\\n</kt-portlet>\\r\\n\"","import { AfterViewInit, AfterViewChecked } from '@angular/core';\r\n// Angular\r\nimport { Component, OnInit, ElementRef, ViewChild, ChangeDetectionStrategy, OnDestroy, ChangeDetectorRef } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\n// Material\r\nimport { SelectionModel } from '@angular/cdk/collections';\r\nimport { MatPaginator, MatSort, MatSnackBar, MatTableDataSource } from '@angular/material';\r\n// RXJS\r\nimport { debounceTime, distinctUntilChanged, tap, skip, take, delay, map } from 'rxjs/operators';\r\nimport { fromEvent, merge, Observable, of, Subscription } from 'rxjs';\r\n// LODASH\r\nimport { each, find } from 'lodash';\r\n\r\n// NGRX\r\nimport { Store, select } from '@ngrx/store';\r\nimport { AppState } from '../../../../../core/reducers';\r\n\r\n// Services\r\nimport { LayoutUtilsService, MessageType, QueryParamsModel } from '../../../../../core/_base/crud';\r\nimport {UserService} from '../../../../../core/auth/_services'\r\n// Models\r\nimport {\r\n\tUser,\r\n\tRole,\r\n\t\r\n\tUserDeleted,\r\n\tUsersPageRequested,\r\n\tselectUserById,\r\n\tselectAllRoles\r\n} from '../../../../../core/auth';\r\nimport { SubheaderService } from '../../../../../core/_base/layout';\r\n\r\n\r\n// Table with EDIT item in MODAL\r\n// ARTICLE for table with sort/filter/paginator\r\n// https://blog.angular-university.io/angular-material-data-table/\r\n// https://v5.material.angular.io/components/table/overview\r\n// https://v5.material.angular.io/components/sort/overview\r\n// https://v5.material.angular.io/components/table/overview#sorting\r\n// https://www.youtube.com/watch?v=NSt9CI3BXv4\r\n@Component({\r\n\tselector: 'kt-users-list',\r\n\ttemplateUrl: './users-list.component.html',\r\n\r\n\tstyleUrls: ['../../usser.management.scss'],\r\n\tchangeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class UsersListComponent implements OnInit, OnDestroy {\r\n\t// Table fields\r\n\tdataSource;\r\n\tlistData:MatTableDataSource<any>;\r\n\tdisplayedColumns = ['select', 'id', 'username', 'email', 'fullname', '_roles', 'actions'];\r\n\t@ViewChild(MatPaginator) paginator: MatPaginator;\r\n\t//@ViewChild(MatSort) sort: MatSort;\r\n\t// Filter fields\r\n\t@ViewChild('searchInput') searchInput: ElementRef;\r\n\tlastQuery: QueryParamsModel;\r\n\t// Selection\r\n\tselection = new SelectionModel<User>(true, []);\r\n\tusersResult: User[] = [];\r\n\tallRoles: Role[] = [];\r\n\tSearchKey:string='';\r\n\tfilterStatus: string = '';\r\n\tfilterRole: string = '';\r\n\tfilterPrivilidge: string = '';\r\n\tgetallroles : any;\r\n\torder : number = -1;\r\n\tallPrivilidge : any;\r\n\tselectedUser;\r\n\t// Subscriptions\r\n\tprivate subscriptions: Subscription[] = [];\r\n\r\n\t/**\r\n\t *\r\n\t * @param activatedRoute: ActivatedRoute\r\n\t * @param store: Store<AppState>\r\n\t * @param router: Router\r\n\t * @param layoutUtilsService: LayoutUtilsService\r\n\t * @param subheaderService: SubheaderService\r\n\t */\r\n\tconstructor(\r\n\t\tprivate activatedRoute: ActivatedRoute,\r\n\t\tprivate store: Store<AppState>,\r\n\t\tprivate router: Router,\r\n\t\tprivate layoutUtilsService: LayoutUtilsService,\r\n\t\tprivate subheaderService: SubheaderService,\r\n\t\tprivate cdr: ChangeDetectorRef,\r\n\t\tprivate ser :UserService\r\n\t\t) {}\r\n\t/**\r\n\t * @ Lifecycle sequences => https://angular.io/guide/lifecycle-hooks\r\n\t */\r\n\r\n\t/**\r\n\t * On init\r\n\t */\r\n\tngOnInit() {\r\n\t\t\r\n\t              \tthis.getuser();\r\n\t\t\t\r\n\t\t\r\n\t\tthis.getallroles=[];\r\n\t\tif(this.checkedpermissions('getprivilidgestype')){\r\n\t\tthis.getallrole();\r\n\t\t}\r\n\r\n\r\n\t\t// load roles list\r\n\t\tconst rolesSubscription = this.store.pipe(select(selectAllRoles)).subscribe(res => this.allRoles = res)\r\n\t\tthis.subscriptions.push(rolesSubscription);\r\n\r\n\t\t// Set title to page breadCrumbs\r\n\t\tthis.subheaderService.setTitle('User management');\r\n\r\n\r\n\t}\r\n\r\n\r\n\tcheckedpermissions(key: String) {\r\n\t\tlet checked = false\r\n\t\tif (localStorage.getItem('user')) {\r\n\r\n\t\t\tif (JSON.parse(localStorage.getItem('user'))) {\r\n\t\t\t\tlet user = JSON.parse(localStorage.getItem('user'))\r\n\r\n\t\t\t\tif (user['allPrivilidge']) {\r\n\t\t\t\t\tconst privilidge = user['allPrivilidge']\r\n\r\n\t\t\t\t\tObject.keys(privilidge).forEach(role => {\r\n\t\t\t\t\t\tObject.keys(privilidge[role]).forEach(pri => {\r\n\r\n\t\t\t\t\t\t\tlet per = (privilidge[role][pri].toString()).trim()\r\n\t\t\t\t\t\t\tif (key.trim() == per) {\r\n\t\t\t\t\t\t\t\tchecked = true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn checked\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * On Destroy\r\n\t */\r\n\tngOnDestroy() {\r\n\t\tthis.subscriptions.forEach(el => el.unsubscribe());\r\n\t}\r\n\r\n\r\n\t/** FILTRATION */\r\n\tfilterConfiguration(): any {\r\n\t\tconst filter: any = {};\r\n\t\tconst searchText: string = this.searchInput.nativeElement.value;\r\n\r\n\t\tfilter.lastName = searchText;\r\n\r\n\t\tfilter.username = searchText;\r\n\t\tfilter.email = searchText;\r\n\t\tfilter.fillname = searchText;\r\n\t\treturn filter;\r\n\t}\r\n\r\n\t/** ACTIONS */\r\n\t/**\r\n\t * Delete user\r\n\t *\r\n\t * @param _item: User\r\n\t */\r\n\tdeleteUser(_item: User) {\r\n\t\t\r\n\t\tconst _title: string = 'User Delete';\r\n\t\tconst _description: string = 'Are you sure to permanently delete this user?';\r\n\t\tconst _waitDesciption: string = 'User is deleting...';\r\n\t\tconst _deleteMessage = `User has been deleted`;\r\n        const _failedToDelete=`sorry there is problem to delete this user try again`\r\n\t\tconst dialogRef = this.layoutUtilsService.deleteElement(_title, _description, _waitDesciption);\r\n\t\tdialogRef.afterClosed().subscribe(res => {\r\n\t\t\tif (!res) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.ser.deleteUser(_item['pub_key']).subscribe(res=>{\r\n\t\t\t\tif(res['result'])\r\n\t\t\t\t{\r\n\r\n\t\t\t\t\tthis.listData.data.slice(this.listData.data.indexOf(_item),1)\r\n\t\t\t\t\tthis.getuser()\r\n\t\t\t\t\tthis.store.dispatch(new UserDeleted({ id: _item['_id'] }));\r\n\t\t\t\t\tthis.layoutUtilsService.showActionNotification(_deleteMessage, MessageType.Delete);\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n                    this.layoutUtilsService.showActionNotification(_failedToDelete, MessageType.Delete);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t});\r\n\t}\r\n\r\n\r\n\tactivateuser(id,status) {\r\n\t\tconst _title: string = 'User Delete';\r\n\t\tconst _description: string = 'Are you sure to permanently delete this user?';\r\n\t\tconst _waitDesciption: string = 'User is deleting...';\r\n\t\tconst dialogRef = this.layoutUtilsService.deleteElement(_title, _description, _waitDesciption);\r\n\t\tdialogRef.afterClosed().subscribe(res => {\r\n\t\t\tif (!res) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\tif(status == 'Active') var message = 'User Activated Successfully';\r\n\t\telse  var message = 'User DeActivated Successfully';\r\n\t\tvar ids = new Array();ids.push(id);\r\n\t\tthis.ser.activateuser(ids,status).subscribe(\r\n\t\t\tresult=>{\r\n\t\t\t\tif(this.router.url == '/default/user-management/users')\r\n\t\t\t\t\tthis.router.navigateByUrl(\"/default/user-management/user\");\r\n\t\t\t\telse this.router.navigateByUrl(\"/default/user-management/users\");\r\n\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\tthis.layoutUtilsService.showActionNotification(message, MessageType.Update);\r\n\t\t\t\t}, 1000)\r\n\t\t\t}\r\n\t\t)\r\n\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Fetch selected rows\r\n\t */\r\n\tfetchUsers() {\r\n\t\tconst messages = [];\r\n\t\tthis.selection.selected.forEach(elem => {\r\n\t\t\tmessages.push({\r\n\t\t\t\ttext: `${elem.name}, ${elem.email}`,\r\n\t\t\t\ttype: `${elem['type'].toString()}`,\r\n\t\t\t\tstatus: elem.username\r\n\t\t\t});\r\n\t\t//this.ser.getUserPriviliges().forEach(item=>{console.log(item,elem['havePrivilidge'])})\r\n\t\t});\r\n\t\tthis.layoutUtilsService.fetchElements(messages);\r\n\t}\r\n\r\n\tactiveallusers(status) {\r\n\t\tvar ids = [];\r\n\t\tthis.selection.selected.forEach(elem => {\r\n\t\t\tids.push(elem['pub_key']);\r\n\t\t});\r\n\t\tconsole.log(ids);\r\n\t\tif(status == 'Active') var message = 'User Activated Successfully';\r\n\t\telse  var message = 'User DeActivated Successfully';\r\n\r\n\t\tthis.ser.activateuser(ids,status).subscribe(\r\n\t\t\tres=>{\r\n\t\t\t\tif(this.router.url == '/default/user-management/users')\r\n\t\t\t\t\tthis.router.navigateByUrl(\"/default/user-management/user\");\r\n\t\t\t\telse this.router.navigateByUrl(\"/default/user-management/users\");\r\n\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\tthis.layoutUtilsService.showActionNotification(message, MessageType.Update);\r\n\t\t\t\t}, 1000)\r\n\t\t\t}\r\n\t\t)\r\n\t}\r\n\r\n\t/**\r\n\t * Check all rows are selected\r\n\t */\r\n\tisAllSelected(): boolean {\r\n\t\tconst numSelected = this.selection.selected.length;\r\n\t\tconst numRows = this.usersResult.length;\r\n\t\treturn numSelected === numRows;\r\n\t}\r\n\r\n\t/**\r\n\t * Toggle selection\r\n\t */\r\n\tmasterToggle() {\r\n\t\tif (this.selection.selected.length === this.usersResult.length) {\r\n\t\t\tthis.selection.clear();\r\n\t\t} else {\r\n\t\t\tthis.usersResult.forEach(row => this.selection.select(row));\r\n\t\t}\r\n\t}\r\n\r\n\t/* UI */\r\n\t/**\r\n\t * Returns user roles string\r\n\t *\r\n\t * @param user: User\r\n\t */\r\n\tgetUserRolesStr(user: User): string {\r\n\t\tconst titles: string[] = [];\r\n\t\tif(user['havePrivilidge'])\r\n        {\r\n\t\t//this.ser.getUserPriviliges().forEach(item=>{console.log(item),user['havePrivilidge']})\r\n\t\treturn\r\n\t    }\r\n\t}\r\n\r\n\teditUser(_item) {\r\n\t    this.ser.changeuser(_item);\r\n\t\tthis.router.navigate(['/default/user-management/users',_item._id,'edit',_item._id]);\r\n\t}\r\n\tonSearchClear()\r\n    {\r\n\t\tthis.SearchKey=\"\"\r\n\t\tthis.applyFilter()\r\n\t}\r\n\t/*\r\n\t*\r\n\t*\r\n\t*/\r\n\t//method to  search online\r\n\tapplyFilter(orderby=''){\r\n\t\tif(this.SearchKey && this.SearchKey.length > 0)\r\n\t\t\tvar search = this.SearchKey.trim().toLowerCase();\r\n\t\telse var search='';\r\n\t\tif (this.filterStatus && this.filterStatus.length > 0)\r\n\t\t\tvar status = this.filterStatus;\r\n\t\telse status = '';\r\n\r\n\t\tif (this.filterRole && this.filterRole.length > 0)\r\n\t\t\tvar role = this.filterRole;\r\n\t\telse role = '';\r\n\r\n\t\tif (this.filterPrivilidge && this.filterPrivilidge.length > 0)\r\n\t\t\tvar privilidge = this.filterPrivilidge;\r\n\t\telse privilidge = '';\r\n\r\n\t\tif(orderby !=''){\r\n\t\t\tif(this.order == -1) this.order=1;\r\n\t\t\telse if(this.order == 1) this.order=-1;\r\n\t\t}\r\n\r\n\t\tthis.getuser(null,null,search,status,role,privilidge,orderby,this.order);\r\n\t}\r\n\r\n\t/*\r\n\t*\r\n\t*\r\n\t*/\r\n  nextPage(event){\r\n\t\t//console.log(event)\r\n        this.getuser(event.pageIndex+1,event.pageSize,null)\r\n\t}\r\n\t/*\r\n\t*\r\n\t*\r\n\t*/\r\n\tgetuser(pages=1,prepage=30,search=null,status='',role='',privilidge='',orderby='',order=-1)\r\n\t{\tif(this.checkedpermissions('getallusers')){\r\n\t\tthis.ser.getallusers(pages,prepage,search,status,role,privilidge,orderby,order).subscribe(\r\n\t\t\tres=>{\r\n\t\t\t\t//console.log(res)\r\n\t\t\t\tthis.listData=new MatTableDataSource(res['users'])\r\n\t\t\t\t//this.listData.sort=this.sort\r\n\t\t\t\tthis.listData.paginator=this.paginator\r\n\t\t\t\tthis.cdr.detectChanges()\r\n\t\t\t}\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\t/*\r\n\t*\r\n\t*\r\n\t*/\r\n\tgetallrole()\r\n\t{\r\n\t\tthis.ser.getallrole().subscribe(\r\n\t\t\tres=>{\r\n\t\t\t\t//console.log(res)\r\n\t\t\t\tthis.getallroles = res['result'];\r\n\t\t\t}\r\n\t\t)\r\n\r\n\t\tvar privilidge = JSON.parse(localStorage.getItem('user'))['allPrivilidge'];\r\n\t\tvar result = [];\r\n\t\tObject.keys(privilidge).forEach(function(key) {\r\n\t\t\tvar items = new Array();\r\n\t\t\tObject.keys(privilidge[key]).forEach(function(item){\r\n\t\t\t\titems.push({key:item,value:privilidge[key][item]})\r\n\t\t\t});\r\n\t\t\tresult.push({key,value:items})\r\n\t\t});\r\n\t\tconsole.log(result);\r\n\t\tthis.allPrivilidge = result;\r\n\t}\r\n\t//check if listdata has data to show\r\n\tcheckedListData()\r\n\t{\r\n\t\tif(this.listData)\r\n\t\t{\r\n\t\t\tif(this.listData.data)\r\n\t\t\t{\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\telse false\r\n\t\t}\r\n\t\telse false\r\n\t}\r\n\tcheckedpermission(key)\r\n\t{\r\n\r\n\t\tif( localStorage.getItem('user'))\r\n\t\t{\r\n\r\n\t\t\tif(JSON.parse(localStorage.getItem('user'))['allPrivilidge'])\r\n\t\t\t{\r\n\t\t\tif(JSON.parse(localStorage.getItem('user'))['allPrivilidge']['Users Mangement'])\r\n\t\t\t{\r\n\t\t\t\tif(key=='del')\r\n\t\t\t\t{\r\n\r\n\t\t\t  if(JSON.parse(localStorage.getItem('user'))['allPrivilidge']['Users Mangement']['Delete user'])\r\n\t\t\t  return true\r\n\t\t\t\t}\r\n\t\t\t\telse if(key=='update')\r\n\t\t\t\t{\r\n\r\n\t\t\t\t\tif( JSON.parse(localStorage.getItem('user'))['allPrivilidge']['Users Mangement']['Update User'])\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t}\r\n\r\n\t\treturn false\r\n\t}\r\n}\r\n","module.exports = \".hide {\\n  display: none; }\\n\\nmat-footer-row mat-footer-cell {\\n  justify-content: center; }\\n\\n.mat-dialog-actions[align='end'] {\\n  justify-content: flex-end; }\\n\\n.mat-dialog-actions[align='center'] {\\n  justify-content: center; }\\n\\n.mat-list-content {\\n  font-size: 10px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdmlld3MvcGFnZXMvdXNlci1tYW5hZ2VtZW50L0U6XFxHRU1JTlxcZ3ltaW4tMi4wLXNhYXMtZnJvbnRlbmQvc3JjXFxhcHBcXHZpZXdzXFxwYWdlc1xcdXNlci1tYW5hZ2VtZW50XFx1c3Nlci5tYW5hZ2VtZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxhQUNKLEVBQUE7O0FBQ0E7RUFDQSx1QkFBdUIsRUFBQTs7QUFHdkI7RUFHTSx5QkFBeUIsRUFBQTs7QUFIL0I7RUFPTSx1QkFBdUIsRUFBQTs7QUFJM0I7RUFFRSxlQUFlLEVBQUEiLCJmaWxlIjoic3JjL2FwcC92aWV3cy9wYWdlcy91c2VyLW1hbmFnZW1lbnQvdXNzZXIubWFuYWdlbWVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmhpZGV7XHJcbiAgICBkaXNwbGF5OiBub25lXHJcbn1cclxubWF0LWZvb3Rlci1yb3cgIG1hdC1mb290ZXItY2VsbHtcclxuanVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcblxyXG59XHJcbi5tYXQtZGlhbG9nLWFjdGlvbnMge1xyXG4gIFxyXG4gICAgJlthbGlnbj0nZW5kJ10ge1xyXG4gICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgJlthbGlnbj0nY2VudGVyJ10ge1xyXG4gICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC5tYXQtbGlzdC1jb250ZW50e1xyXG4gICBcclxuICAgIGZvbnQtc2l6ZTogMTBweDsgICBcclxufVxyXG4iXX0= */\""],"sourceRoot":""}